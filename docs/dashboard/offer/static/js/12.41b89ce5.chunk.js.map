{"version":3,"sources":["../node_modules/@material-ui/icons/esm/CheckCircleOutline.js","../node_modules/@material-ui/icons/esm/RadioButtonUnchecked.js","../node_modules/@material-ui/icons/esm/ArrowForwardIos.js","../node_modules/@material-ui/icons/esm/CancelOutlined.js","components/BuyerOffersSteps/Step.js","components/BuyerOffersSteps/utils/constants.js","components/BuyerOffersSteps/utils/stepActionHelpers.js","components/BuyerOffersSteps/utils/helpers.js","components/BuyerOffersSteps/Offer.js","containers/BuyerOffer/NewOfferList/ViewOfferActionButtons.js","containers/BuyerOffer/NewOfferList/ViewOfferDialog.js","components/BuyerOfferStep/Step500/ConfirmTransferModal.js","components/BuyerOfferStep/Step600/ConfirmInspectionDialog.js","components/BuyerOffersSteps/OriginalOfferDialog/OriginalOfferDialog.js","components/BuyerOffersSteps/OriginalOfferDialog/index.js","components/BuyerOffersSteps/OriginalOfferDialog/helpers.js","components/BuyerOffersSteps/BuyerOffersSteps.js"],"names":["d","createSvgIcon","useStyles","makeStyles","theme","link","fontFamily","typography","avenirLT","border","backgroundColor","palette","background","lightGray","padding","spacing","marginBottom","display","alignItems","cursor","name","h5","marginLeft","color","text","dark","flex","marginTop","linkHighlight","fontWeight","disabledLink","pointerEvents","opacity","selectIcon","float","width","height","primary","main","checkIcon","disabledIcon","gray","loopIcon","cancelIcon","error","Step","props","step","isEnabled","isFinished","isCancelled","action","offer","classes","redirectTo","onClickHandler","getContent","CancelOutlined","className","CheckCircleOutline","RadioButtonUnchecked","clsx","ArrowForwardIos","to","onClick","VALID_STEPS","OFFER_STEPS","viewOriginalOffer","contingencyRemoval","STEPS","id","pleaseComplete","counteredBySeller","confirmTransfer","scheduleAProperty","submitCorrectiveAction","getFormLink","offerId","formId","stepId","getStepAction","openOfferDialogHandler","openConfirmTransferHandler","openScheduleInspectionHandler","openOriginalOfferDialogHandler","_get","getOfferSubmitLink","scarForm","find","form","FORM_TYPE_IDS","scar","getSubmitCorrectiveActionLink","removalForm","getContingencyRemovalLink","isCancelledStep","offerStep","advisorDecline","sellerDecline","buyerDecline","includes","getStepProps","contingencies","isPleaseCompleteEnabled","pleaseResubmit","isViewOriginalOfferEnabled","isContingencyRemovalEnabled","_isEmpty","isEnabledStep","awaitingAdvisorApproval","isFinishedStep","widget","description","Offer","Widget","title","map","key","wrapper","justifyContent","acceptButton","borderRadius","common","white","borderWidth","declineButton","counterButton","borderColor","black","ViewOfferActionButtons","onAccept","onDecline","onCounter","disabled","Grid","container","item","Button","variant","disableElevation","avenir85","dialogContent","paddingTop","field","fieldLabel","textTransform","fieldValue","secondaryDark","ViewOfferDialog","open","onClose","handleApproval","handleDecline","handleCounter","isSubmitting","funding","fields","label","value","formatPrice","FUNDING_PURCHASE_TYPES","cash","getBuyerName","getFullName","Dialog","aria-labelledby","scroll","fullWidth","maxWidth","visible","disableTypography","root","Typography","xs","Divider","modal","paper","boxShadow","shadows","structuredSelector","createStructuredSelector","isLoading","state","mapDispatchToProps","updateOfferStep","compose","connect","hideIfInvalidProps","memo","handleClose","Modal","aria-describedby","closeAfterTransition","BackdropComponent","Backdrop","BackdropProps","timeout","Fade","in","newStep","actionWrapper","OriginalOfferDialog","getOriginalOfferDialogFields","minHeight","loading","isUpdatedStep","isFormLoaded","saveOfferStep","withErrorBoundary","useState","undefined","selectedOffer","setSelectedOffer","openOfferDialog","setOpenOfferDialog","openOriginalOfferDialog","setOpenOriginalOfferDialog","openConfirmDialog","setOpenConfirmDialog","children","onAgree","confirmDialogProps","setConfirmDialogProps","openCounterOfferDialog","setOpenCounterOfferDialog","openConfirmTransfer","setOpenConfirmTransfer","openScheduleInspection","setOpenScheduleInspection","useQuery","GET_USER_OVERVIEW_OFFERS","errorPolicy","dataBuyerOffers","data","getBuyerOffers","refetch","offers","useEffect","message","toastr","OFFER_ERROR_MESSAGES","saveFailure","handleClickCloseDialog","getConfirmContent","type","handleAccept","buyerAcceptCounterOffer","isReload","mappingSelectedOffer","mappingCounterData","tag","blocking","loader","active","CounterOfferModal","ConfirmDialog"],"mappings":"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","file":"static/js/12.41b89ce5.chunk.js","sourcesContent":["import * as React from 'react';\nimport createSvgIcon from './utils/createSvgIcon';\nexport default createSvgIcon( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M16.59 7.58L10 14.17l-3.59-3.58L5 12l5 5 8-8zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z\"\n}), 'CheckCircleOutline');","import * as React from 'react';\nimport createSvgIcon from './utils/createSvgIcon';\nexport default createSvgIcon( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z\"\n}), 'RadioButtonUnchecked');","import * as React from 'react';\nimport createSvgIcon from './utils/createSvgIcon';\nexport default createSvgIcon( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M5.88 4.12L13.76 12l-7.88 7.88L8 22l10-10L8 2z\"\n}), 'ArrowForwardIos');","import * as React from 'react';\nimport createSvgIcon from './utils/createSvgIcon';\nexport default createSvgIcon( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm3.59-13L12 10.59 8.41 7 7 8.41 10.59 12 7 15.59 8.41 17 12 13.41 15.59 17 17 15.59 13.41 12 17 8.41z\"\n}), 'CancelOutlined');","// @flow\nimport * as React from 'react';\nimport clsx from 'clsx';\nimport { makeStyles } from '@material-ui/core/styles';\nimport {\n  CancelOutlined,\n  CheckCircleOutline,\n  RadioButtonUnchecked,\n  ArrowForwardIos,\n} from '@material-ui/icons';\nimport { Link } from 'react-router-dom';\n\ntype Props = {\n  step: Object,\n  isEnabled: boolean,\n  isFinished: boolean,\n  isCancelled: boolean,\n  action: Object,\n  offer: Object,\n};\n\nconst useStyles = makeStyles(theme => ({\n  link: {\n    fontFamily: theme.typography.fontFamily.avenirLT,\n    border: '1px solid #E0E0E0',\n    backgroundColor: theme.palette.background.lightGray,\n    padding: theme.spacing(2.125),\n    marginBottom: theme.spacing(1),\n    display: 'flex',\n    alignItems: 'center',\n    cursor: 'pointer',\n  },\n  name: {\n    ...theme.typography.h5,\n    marginLeft: theme.spacing(1),\n    color: theme.palette.text.dark,\n    flex: 1,\n    marginTop: '2px',\n  },\n  linkHighlight: {\n    fontWeight: '900',\n  },\n  disabledLink: {\n    pointerEvents: 'none',\n    opacity: 0.5,\n  },\n  selectIcon: {\n    float: 'right',\n    width: '14px',\n    height: '14px',\n    color: theme.palette.primary.main,\n  },\n  checkIcon: {\n    color: theme.palette.primary.main,\n  },\n  disabledIcon: {\n    color: theme.palette.primary.gray,\n  },\n  loopIcon: {\n    color: theme.palette.primary.gray,\n  },\n  cancelIcon: {\n    color: theme.palette.error.dark,\n  },\n}));\n\nconst Step = (props: Props): React.Element<'div'> => {\n  const { step, isEnabled, isFinished, isCancelled, action, offer } = props;\n  const classes = useStyles();\n\n  const { redirectTo, onClickHandler } = action;\n\n  const getIcon = () => {\n    if (isCancelled) return <CancelOutlined className={classes.cancelIcon} />;\n    if (isFinished) return <CheckCircleOutline className={classes.checkIcon} />;\n    return <RadioButtonUnchecked className={classes.loopIcon} />;\n  };\n\n  const getContent = () => {\n    return (\n      <>\n        {getIcon()}\n        <span\n          className={clsx(classes.name, {\n            [classes.linkHighlight]: isEnabled,\n          })}\n        >\n          {step.name}\n        </span>\n        <ArrowForwardIos\n          className={clsx(classes.selectIcon, {\n            [classes.disabledIcon]: !isEnabled,\n          })}\n        />\n      </>\n    );\n  };\n\n  if (redirectTo)\n    return (\n      <Link\n        className={clsx(classes.link, {\n          [classes.disabledLink]: !isEnabled,\n        })}\n        to={redirectTo}\n      >\n        {getContent()}\n      </Link>\n    );\n\n  return (\n    <div\n      className={clsx(classes.link, {\n        [classes.disabledLink]: !isEnabled,\n      })}\n      onClick={() => onClickHandler(offer)}\n    >\n      {getContent()}\n    </div>\n  );\n};\nexport default Step;\n","// @flow\nimport { OFFER_STEPS } from 'shared/Consts';\n\nexport const VALID_STEPS = {\n  ...OFFER_STEPS,\n  viewOriginalOffer: 101,\n  contingencyRemoval: 801,\n};\n\nexport const STEPS = [\n  {\n    id: VALID_STEPS.pleaseComplete,\n    name: 'Continue Offer',\n  },\n  {\n    id: VALID_STEPS.viewOriginalOffer,\n    name: 'View Original Offer',\n  },\n  {\n    id: VALID_STEPS.counteredBySeller,\n    name: 'Negotiate',\n  },\n  {\n    id: VALID_STEPS.confirmTransfer,\n    name: 'Wire',\n  },\n  {\n    id: VALID_STEPS.scheduleAProperty,\n    name: 'Inspection',\n  },\n  {\n    id: VALID_STEPS.submitCorrectiveAction,\n    name: 'Request for Repair',\n  },\n  {\n    id: VALID_STEPS.contingencyRemoval,\n    name: 'Contingency Removal',\n  },\n];\n","// @flow\nimport _get from 'lodash.get';\nimport type { Offer as OfferType } from 'types/Offer';\nimport { OFFER_STEPS, FORM_TYPE_IDS } from 'shared/Consts';\nimport { VALID_STEPS } from './constants';\n\ntype isEnabledStepParams = {\n  offer: OfferType,\n  stepId: number,\n};\n\nexport type handlersType = {\n  openOfferDialogHandler: Function,\n  openConfirmTransferHandler: Function,\n  openScheduleInspectionHandler: Function,\n  openOriginalOfferDialogHandler: Function,\n};\n\ntype getStepActionParams = isEnabledStepParams & handlersType;\n\nconst getFormLink = ({ offerId, stepId, formId }) =>\n  `/offer?offerId=${offerId}&step=${OFFER_STEPS.pleaseComplete}&formId=${formId}`;\n\nconst getOfferSubmitLink = (offer: OfferType): Object => {\n  return {\n    redirectTo: getFormLink({\n      offerId: _get(offer, ['OfferId']),\n      stepId: OFFER_STEPS.pleaseComplete,\n      formId: _get(offer, ['Forms', 0, 'FormId']),\n    }),\n  };\n};\n\nconst getSubmitCorrectiveActionLink = (offer: OfferType): Object => {\n  const forms = _get(offer, ['Forms']) || [];\n  const scarForm = forms.find(\n    form => _get(form, ['FormTypeId']) === FORM_TYPE_IDS.scar,\n  );\n  const formId = _get(scarForm, ['FormId']);\n\n  return {\n    redirectTo: getFormLink({\n      offerId: _get(offer, ['OfferId']),\n      stepId: OFFER_STEPS.submitCorrectiveAction,\n      formId,\n    }),\n  };\n};\n\nconst getContingencyRemovalLink = (offer: OfferType): Object => {\n  const forms = _get(offer, ['Forms']) || [];\n  const removalForm = forms.find(\n    form => _get(form, ['FormTypeId']) === FORM_TYPE_IDS.contingencyRemoval,\n  );\n  const formId = _get(removalForm, ['FormId']);\n\n  return {\n    redirectTo: getFormLink({\n      offerId: _get(offer, ['OfferId']),\n      stepId: OFFER_STEPS.confirmTransfer,\n      formId,\n    }),\n  };\n};\n\nexport const getStepAction = ({\n  offer,\n  stepId,\n  openOfferDialogHandler,\n  openConfirmTransferHandler,\n  openScheduleInspectionHandler,\n  openOriginalOfferDialogHandler,\n}: getStepActionParams): Object => {\n  switch (stepId) {\n    case VALID_STEPS.pleaseComplete: {\n      return getOfferSubmitLink(offer);\n    }\n    case VALID_STEPS.viewOriginalOffer: {\n      return {\n        onClickHandler: openOriginalOfferDialogHandler,\n      };\n    }\n    case VALID_STEPS.counteredBySeller: {\n      return {\n        onClickHandler: openOfferDialogHandler,\n      };\n    }\n    case VALID_STEPS.confirmTransfer: {\n      return {\n        onClickHandler: openConfirmTransferHandler,\n      };\n    }\n    case VALID_STEPS.scheduleAProperty: {\n      return {\n        onClickHandler: openScheduleInspectionHandler,\n      };\n    }\n    case VALID_STEPS.submitCorrectiveAction: {\n      return getSubmitCorrectiveActionLink(offer);\n    }\n    case VALID_STEPS.contingencyRemoval: {\n      return getContingencyRemovalLink(offer);\n    }\n\n    default:\n      return { redirectTo: '/' };\n  }\n};\n","// @flow\nimport _get from 'lodash.get';\nimport type { Offer as OfferType } from 'types/Offer';\nimport _isEmpty from 'lodash/isEmpty';\nimport { VALID_STEPS } from './constants';\nimport { getStepAction } from './stepActionHelpers';\nimport type { handlersType } from './stepActionHelpers';\n\ntype isEnabledStepParams = {\n  offerStep: number,\n  contingencies: Array<Object>,\n  stepId: number,\n};\n\ntype isCancellStepParams = {\n  offerStep: number,\n  stepId: number,\n};\n\ntype getStepPropsParams = {\n  offer: OfferType,\n  step: Object,\n} & handlersType;\n\nconst isEnabledStep = ({\n  offerStep,\n  contingencies,\n  stepId,\n}: isEnabledStepParams): boolean => {\n  const isPleaseCompleteEnabled =\n    stepId === VALID_STEPS.pleaseComplete &&\n    offerStep === VALID_STEPS.pleaseResubmit; // Combine step 1 with step 150\n\n  const isViewOriginalOfferEnabled =\n    stepId === VALID_STEPS.viewOriginalOffer &&\n    offerStep > VALID_STEPS.pleaseComplete;\n\n  const isContingencyRemovalEnabled =\n    stepId === VALID_STEPS.contingencyRemoval &&\n    !(\n      isCancelledStep({ offerStep, stepId }) ||\n      _isEmpty(contingencies) ||\n      _get(contingencies, 'AllRemoved')\n    );\n\n  return (\n    isPleaseCompleteEnabled ||\n    isViewOriginalOfferEnabled ||\n    isContingencyRemovalEnabled ||\n    offerStep === stepId\n  );\n};\n\nconst isFinishedStep = ({\n  offerStep,\n  contingencies,\n  stepId,\n}: isEnabledStepParams): boolean => {\n  if (stepId === VALID_STEPS.viewOriginalOffer)\n    return offerStep >= VALID_STEPS.awaitingAdvisorApproval;\n\n  if (stepId === VALID_STEPS.contingencyRemoval)\n    return _get(contingencies, 'AllRemoved');\n\n  return stepId < offerStep;\n};\n\nconst isCancelledStep = ({\n  offerStep,\n  stepId,\n}: isCancellStepParams): boolean => {\n  return (\n    [\n      VALID_STEPS.advisorDecline,\n      VALID_STEPS.sellerDecline,\n      VALID_STEPS.buyerDecline,\n    ].includes(offerStep) && stepId >= VALID_STEPS.counteredBySeller\n  );\n};\n\nexport const getStepProps = ({\n  offer,\n  step,\n  openOfferDialogHandler,\n  openConfirmTransferHandler,\n  openScheduleInspectionHandler,\n  openOriginalOfferDialogHandler,\n}: getStepPropsParams): Object => {\n  const offerStep = _get(offer, 'StepId', 0);\n  const contingencies = _get(offer, 'Contingencies');\n  const stepId = _get(step, 'id', 0);\n  const isCancelled = isCancelledStep({ offerStep, stepId });\n  const isEnabled = isEnabledStep({ offerStep, contingencies, stepId });\n  const isFinished = isFinishedStep({ offerStep, contingencies, stepId });\n  const action =\n    !isCancelled && isEnabled\n      ? getStepAction({\n          offer,\n          stepId,\n          openOfferDialogHandler,\n          openConfirmTransferHandler,\n          openScheduleInspectionHandler,\n          openOriginalOfferDialogHandler,\n        })\n      : {};\n\n  return {\n    offer,\n    step,\n    stepId,\n    isCancelled,\n    isEnabled,\n    isFinished,\n    action,\n  };\n};\n","// @flow\nimport React, { Fragment } from 'react';\nimport _get from 'lodash.get';\nimport { makeStyles } from '@material-ui/core/styles';\nimport type { Element } from 'react';\nimport { Widget } from 'components/Widget';\nimport type { Offer as OfferType } from 'types/Offer';\nimport _isEmpty from 'lodash/isEmpty';\nimport Step from './Step';\nimport { getStepProps } from './utils/helpers';\nimport { STEPS } from './utils/constants';\n\nconst useStyles = makeStyles(theme => ({\n  widget: {\n    marginBottom: theme.spacing(3),\n  },\n  description: {\n    ...theme.typography.h5,\n    marginBottom: theme.spacing(3),\n    color: theme.palette.primary.gray,\n  },\n}));\n\ntype Props = {\n  offer: OfferType,\n  openOfferDialogHandler: Function,\n  openConfirmTransferHandler: Function,\n  openScheduleInspectionHandler: Function,\n  openOriginalOfferDialogHandler: Function,\n};\n\nconst Offer = ({\n  offer = {},\n  openOfferDialogHandler,\n  openConfirmTransferHandler,\n  openScheduleInspectionHandler,\n  openOriginalOfferDialogHandler,\n}: Props): Element<'div' | typeof Fragment> => {\n  const classes = useStyles();\n\n  if (_isEmpty(offer)) return <></>;\n\n  return (\n    <Widget className={classes.widget} title=\"Home Purchase Action Steps\">\n      <div className={classes.description}>\n        To purchase property{' '}\n        <strong>{_get(offer, 'Property.PropertyData.FullAddress', '')}</strong>{' '}\n        you need to complete the steps below:\n      </div>\n      {STEPS.map(step => {\n        const { stepId, ...props } = getStepProps({\n          offer,\n          step,\n          openOfferDialogHandler,\n          openConfirmTransferHandler,\n          openScheduleInspectionHandler,\n          openOriginalOfferDialogHandler,\n        });\n        return <Step {...props} key={stepId} />;\n      })}\n    </Widget>\n  );\n};\n\nexport default Offer;\n","// @flow\nimport type { Element } from 'react';\nimport React from 'react';\nimport _get from 'lodash.get';\nimport { Button, Grid, makeStyles } from '@material-ui/core';\nimport { Fragment } from 'react';\n\nconst useStyles = makeStyles(theme => ({\n  wrapper: {\n    backgroundColor: theme.palette.background.lightGray,\n    justifyContent: 'space-between',\n    padding: '1rem',\n  },\n  acceptButton: {\n    borderRadius: 0,\n    padding: '0.5625rem 2rem',\n    color: theme.palette.common.white,\n    borderWidth: '2px',\n  },\n  declineButton: {\n    borderRadius: 0,\n    padding: '0.5625rem 2rem',\n    color: theme.palette.error.dark,\n  },\n  counterButton: {\n    borderRadius: 0,\n    padding: '0.5625rem 2rem',\n    borderColor: theme.palette.common.black,\n    borderWidth: '2px',\n    '&:hover': {\n      borderWidth: '2px',\n    },\n  },\n}));\n\ntype Props = {\n  offer: Object,\n  onAccept: Function,\n  onDecline: Function,\n  onCounter: Function,\n  disabled: boolean,\n};\n\nexport const ViewOfferActionButtons = ({\n  offer,\n  onAccept,\n  onDecline,\n  onCounter,\n  disabled,\n}: Props): Element<typeof Grid | typeof Fragment> => {\n  const classes = useStyles();\n  const offerId = _get(offer, 'OfferId', '');\n\n  return (\n    <Grid container alignItems=\"center\" className={classes.wrapper}>\n      <Grid item>\n        <Button\n          variant=\"outlined\"\n          color=\"primary\"\n          className={classes.counterButton}\n          onClick={() => onCounter(offer)}\n          disabled={disabled}\n        >\n          Counter\n        </Button>\n      </Grid>\n      <Grid item>\n        <Button\n          className={classes.declineButton}\n          onClick={() => onDecline(offerId)}\n          disabled={disabled}\n        >\n          Decline\n        </Button>\n        <Button\n          variant=\"contained\"\n          color=\"primary\"\n          disableElevation\n          className={classes.acceptButton}\n          onClick={() => onAccept(offerId)}\n          disabled={disabled}\n        >\n          Accept\n        </Button>\n      </Grid>\n    </Grid>\n  );\n};\n","// @flow\nimport type { Element } from 'react';\nimport React from 'react';\nimport _get from 'lodash.get';\nimport Typography from '@material-ui/core/Typography';\nimport { Divider, Grid, makeStyles } from '@material-ui/core';\nimport {\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n} from 'components/Dialog';\nimport { formatPrice } from '../../../helpers/number';\nimport { ViewOfferActionButtons } from './ViewOfferActionButtons';\nimport { getBuyerName, getFullName } from '../../../helpers/Offer';\nimport { FUNDING_PURCHASE_TYPES } from '../../../shared/Consts';\n\nconst useStyles = makeStyles(theme => ({\n  spacing: {\n    padding: theme.spacing(2),\n  },\n  title: {\n    fontFamily: theme.typography.fontFamily.avenir85,\n  },\n  dialogContent: {\n    padding: theme.spacing(2),\n    paddingTop: 0,\n  },\n  field: {\n    marginBottom: theme.spacing(1.5),\n  },\n  fieldLabel: {\n    marginBottom: theme.spacing(1),\n    color: theme.palette.primary.gray,\n    textTransform: 'uppercase',\n  },\n  fieldValue: {\n    color: theme.palette.text.secondaryDark,\n  },\n}));\n\ntype Props = {\n  open: boolean,\n  onClose: Function,\n  offer?: Object,\n  handleApproval: Function,\n  handleDecline: Function,\n  handleCounter: Function,\n  isSubmitting: boolean,\n};\n\nexport const ViewOfferDialog = (props: Props): Element<typeof Dialog> => {\n  const {\n    open,\n    onClose,\n    offer,\n    handleApproval,\n    handleDecline,\n    handleCounter,\n    isSubmitting,\n  } = props;\n\n  const classes = useStyles();\n\n  const funding = _get(offer, 'Funding.PurchaseType', '');\n\n  const fields = [\n    { label: 'Offer No', value: _get(offer, 'OfferNo', '') },\n    {\n      label: 'Down Payment',\n      value: formatPrice(_get(offer, 'Funding.DownPayment', 0)),\n    },\n    {\n      label: 'funding',\n      value: funding,\n    },\n    {\n      label: 'asking price',\n      value: _get(offer, 'Property.ListPrice')\n        ? formatPrice(_get(offer, 'Property.ListPrice'))\n        : 'TBD',\n    },\n    {\n      label: 'offer price',\n      value: _get(offer, 'MappingCounter.OfferPrice')\n        ? formatPrice(_get(offer, 'MappingCounter.OfferPrice'))\n        : 'TBD',\n    },\n    {\n      label: 'finance contingency',\n      value:\n        funding === FUNDING_PURCHASE_TYPES.cash\n          ? 'N/A'\n          : _get(offer, 'MappingCounter.FinanceContingency', ''),\n    },\n    {\n      label: 'due diligence contingency',\n      value: _get(offer, 'MappingCounter.InspectionContingency', ''),\n    },\n    {\n      label: 'home sale contingency',\n      value: _get(offer, 'MappingCounter.SaleOfHomeContingency', ''),\n    },\n    {\n      label: 'Closing Period',\n      value: _get(offer, 'MappingCounter.ClosingPeriod', ''),\n    },\n    {\n      label: 'Furniture',\n      value: _get(offer, 'MappingCounter.Furniture', ''),\n    },\n    { label: 'Buyer Name', value: getBuyerName(offer) },\n    {\n      label: 'Buyer Agent Name',\n      value: getFullName(_get(offer, 'AgentInfo', {})),\n    },\n    {\n      label: 'Nile Listing Agent Name',\n      value: 'Khaled Yatim',\n    },\n    {\n      label: 'Property Address',\n      value: _get(offer, 'Property.PropertyData.FullAddress', ''),\n    },\n  ];\n\n  return (\n    <Dialog\n      open={open}\n      aria-labelledby=\"customized-dialog-title\"\n      onClose={onClose}\n      scroll=\"paper\"\n      fullWidth\n      maxWidth=\"sm\"\n      visible={1}\n    >\n      <DialogTitle\n        id=\"customized-dialog-title\"\n        disableTypography\n        onClose={onClose}\n        classes={{ root: classes.spacing }}\n      >\n        <Typography variant=\"h4\" className={classes.title}>\n          Offer {_get(offer, 'OfferNo', '')}\n        </Typography>\n      </DialogTitle>\n      <DialogContent className={classes.dialogContent}>\n        <Grid container>\n          {fields.map(({ label, value }) => (\n            <Grid item xs={4} key={label} className={classes.field}>\n              <Typography variant=\"h6\" className={classes.fieldLabel}>\n                {label}\n              </Typography>\n              <Typography variant=\"h5\" className={classes.fieldValue}>\n                {value}\n              </Typography>\n            </Grid>\n          ))}\n        </Grid>\n      </DialogContent>\n      <Divider />\n      <DialogActions>\n        <ViewOfferActionButtons\n          offer={offer}\n          onAccept={handleApproval}\n          onDecline={handleDecline}\n          onCounter={handleCounter}\n          disabled={isSubmitting}\n        />\n      </DialogActions>\n    </Dialog>\n  );\n};\n","// @flow\nimport React, { memo } from 'react';\nimport type { Element, AbstractComponent } from 'react';\nimport Modal from '@material-ui/core/Modal';\nimport Backdrop from '@material-ui/core/Backdrop';\nimport Fade from '@material-ui/core/Fade';\nimport { makeStyles } from '@material-ui/core/styles';\nimport _get from 'lodash/get';\nimport type { Offer } from 'types/Offer';\nimport { hideIfInvalidProps } from 'utils/RenderComponent';\nimport { updateOfferStep } from 'containers/BuyerOffer/redux/Actions';\nimport { createStructuredSelector } from 'reselect';\nimport { connect } from 'react-redux';\nimport { compose } from 'redux';\nimport { OFFER_STEPS } from 'shared/Consts';\nimport './Modal.css';\n\ntype Props = {\n  offer: Offer | typeof undefined,\n  open: boolean,\n  handleClose: Function,\n};\n\ntype PropsWithRedux = {\n  ...Props,\n  isLoading: boolean,\n  updateOfferStep: Function,\n};\n\nconst useStyles = makeStyles(theme => ({\n  modal: {\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  paper: {\n    backgroundColor: theme.palette.background.paper,\n    border: 'none',\n    boxShadow: theme.shadows[5],\n    padding: theme.spacing(2, 4, 3),\n  },\n}));\n\nconst checkProps = ({ offer }) => offer && _get(offer, ['OfferId']);\n\nconst ConfirmTransferModal = ({\n  open,\n  handleClose,\n  offer,\n  isLoading,\n  updateOfferStep,\n}: PropsWithRedux): Element<typeof Modal> => {\n  const classes = useStyles();\n\n  const onClickConfirm = () => {\n    updateOfferStep({\n      offerId: _get(offer, ['OfferId']),\n      newStep: OFFER_STEPS.scheduleAProperty,\n    });\n    handleClose();\n  };\n\n  return (\n    <Modal\n      aria-labelledby=\"transition-modal-title\"\n      aria-describedby=\"transition-modal-description\"\n      className={classes.modal}\n      open={open}\n      onClose={handleClose}\n      closeAfterTransition\n      BackdropComponent={Backdrop}\n      BackdropProps={{\n        timeout: 500,\n      }}\n    >\n      <Fade in={open}>\n        <div className={classes.paper}>\n          <div className=\"wire-instruction\">\n            <p>Payable to: Endpoint Escrow, Inc.</p>\n            <p>Receiving Bank: First American Trust, FSB</p>\n            <p>\n              <span>5 First American Way</span>\n              <br />\n              <span>Santa Ana, CA 92707</span>\n            </p>\n            <p>Routing #: 122241255</p>\n            <p>Credit Beneficiary: Endpoint Escrow, Inc.</p>\n            <p>Account #: 3145220000</p>\n            <p>\n              NOTICE: Funds from a U.S. Bank: Funds should be wired from a bank\n              within the United States.\n            </p>\n            <p>\n              NOTICE: ACH Transfers are NOT wire transfers: An ACH transfer is\n              not immediately available funds and requires additional time for\n              clearance. An ACH transfer cannot be accepted for an imminent\n              closing. Acceptance of ACH transfers are subject to state law.\n            </p>\n            <p>\n              <b>\n                BEWARE OF CYBER-CRIME! Our bank wire instructions will not\n                change.\n              </b>\n            </p>\n            <p>\n              If you receive an e-mail or any other communication that appears\n              to be generated from NILE or Endpoint that contains new, revised\n              or altered bank wire instructions, consider it suspect and call\n              our office at a number you trust.\n            </p>\n          </div>\n          <div className=\"wire-instruction-action\">\n            <button className=\"prev_btn\" onClick={handleClose}>\n              Close\n            </button>\n            <button\n              className=\"next_btn animated_fastest\"\n              onClick={onClickConfirm}\n              disabled={isLoading}\n            >\n              Confirm Wire 3%\n            </button>\n          </div>\n        </div>\n      </Fade>\n    </Modal>\n  );\n};\n\nconst structuredSelector = createStructuredSelector({\n  isLoading: state => _get(state, ['buyerOffer', 'isLoading']),\n});\n\nconst mapDispatchToProps = {\n  updateOfferStep,\n};\n\nexport default (compose(\n  connect(structuredSelector, mapDispatchToProps),\n  hideIfInvalidProps(checkProps),\n  memo,\n)(ConfirmTransferModal): AbstractComponent<Props>);\n","// @flow\nimport React, { memo } from 'react';\nimport type { Element, AbstractComponent } from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport { Divider, Button, Grid, makeStyles } from '@material-ui/core';\nimport {\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n} from 'components/Dialog';\nimport _get from 'lodash/get';\nimport type { Offer } from 'types/Offer';\nimport { hideIfInvalidProps } from 'utils/RenderComponent';\nimport { updateOfferStep } from 'containers/BuyerOffer/redux/Actions';\nimport { createStructuredSelector } from 'reselect';\nimport { connect } from 'react-redux';\nimport { compose } from 'redux';\nimport { OFFER_STEPS } from 'shared/Consts';\n\ntype Props = {\n  offer: Offer | typeof undefined,\n  open: boolean,\n  handleClose: Function,\n};\n\ntype PropsWithRedux = {\n  ...Props,\n  isLoading: boolean,\n  updateOfferStep: Function,\n};\n\nconst useStyles = makeStyles(theme => ({\n  spacing: {\n    padding: theme.spacing(2),\n  },\n  title: {\n    fontFamily: theme.typography.fontFamily.avenir85,\n  },\n  dialogContent: {\n    fontFamily: theme.typography.fontFamily.avenir85,\n    padding: theme.spacing(2),\n    paddingTop: 0,\n  },\n  actionWrapper: {\n    backgroundColor: theme.palette.background.lightGray,\n    justifyContent: 'flex-end',\n    padding: '1rem',\n  },\n  acceptButton: {\n    borderRadius: 0,\n    padding: '0.5625rem 2rem',\n    color: theme.palette.common.white,\n    borderWidth: '2px',\n  },\n  declineButton: {\n    borderRadius: 0,\n    padding: '0.5625rem 2rem',\n    color: theme.palette.error.dark,\n  },\n}));\n\nconst checkProps = ({ offer }) => offer && _get(offer, ['OfferId']);\n\nconst ConfirmInspectionDialog = ({\n  open,\n  handleClose,\n  offer,\n  isLoading,\n  updateOfferStep,\n}: PropsWithRedux): Element<typeof Dialog> => {\n  const classes = useStyles();\n\n  const onClickConfirm = () => {\n    updateOfferStep({\n      offerId: _get(offer, ['OfferId']),\n      newStep: OFFER_STEPS.submitCorrectiveAction,\n    });\n    handleClose();\n  };\n\n  return (\n    <Dialog\n      open={open}\n      onClose={handleClose}\n      scroll=\"paper\"\n      fullWidth\n      maxWidth=\"sm\"\n      visible={1}\n    >\n      <DialogTitle\n        id=\"customized-dialog-title\"\n        disableTypography\n        onClose={handleClose}\n        classes={{ root: classes.spacing }}\n      >\n        <Typography variant=\"h3\" className={classes.title}>\n          Schedule Inspection\n        </Typography>\n      </DialogTitle>\n      <DialogContent className={classes.dialogContent}>\n        <Typography variant=\"h4\">\n          Please contact a NILE Advisor to schedule a house inspection\n        </Typography>\n      </DialogContent>\n      <Divider />\n      <DialogActions>\n        <Grid container alignItems=\"center\" className={classes.actionWrapper}>\n          <Button\n            className={classes.declineButton}\n            onClick={handleClose}\n            disabled={isLoading}\n          >\n            Close\n          </Button>\n          <Button\n            variant=\"contained\"\n            color=\"primary\"\n            disableElevation\n            className={classes.acceptButton}\n            onClick={onClickConfirm}\n            disabled={isLoading}\n          >\n            Schedule Inspection\n          </Button>\n        </Grid>\n      </DialogActions>\n    </Dialog>\n  );\n};\n\nconst structuredSelector = createStructuredSelector({\n  isLoading: state => _get(state, ['buyerOffer', 'isLoading']),\n});\n\nconst mapDispatchToProps = {\n  updateOfferStep,\n};\n\nexport default (compose(\n  connect(structuredSelector, mapDispatchToProps),\n  hideIfInvalidProps(checkProps),\n  memo,\n)(ConfirmInspectionDialog): AbstractComponent<Props>);\n","// @flow\nimport React, { Fragment } from 'react';\nimport type { Element } from 'react';\nimport _get from 'lodash.get';\nimport _isEmpty from 'lodash/isEmpty';\nimport Typography from '@material-ui/core/Typography';\nimport { Grid, makeStyles } from '@material-ui/core';\nimport { Dialog, DialogContent, DialogTitle } from 'components/Dialog';\nimport { getOriginalOfferDialogFields } from './helpers';\n\nconst useStyles = makeStyles(theme => ({\n  spacing: {\n    padding: theme.spacing(2),\n  },\n  title: {\n    fontFamily: theme.typography.fontFamily.avenir85,\n  },\n  dialogContent: {\n    padding: theme.spacing(2),\n    paddingTop: 0,\n  },\n  field: {\n    marginBottom: theme.spacing(1.5),\n  },\n  fieldLabel: {\n    marginBottom: theme.spacing(1),\n    color: theme.palette.primary.gray,\n    textTransform: 'uppercase',\n  },\n  fieldValue: {\n    color: theme.palette.text.secondaryDark,\n  },\n}));\n\ntype Props = {\n  open: boolean,\n  onClose: Function,\n  offer: Object,\n};\n\nconst OriginalOfferDialog = (\n  props: Props,\n): Element<typeof Dialog | typeof Fragment> => {\n  const { open, onClose, offer } = props;\n  const classes = useStyles();\n\n  if (_isEmpty(offer)) return <></>;\n\n  const fields = getOriginalOfferDialogFields(offer);\n  return (\n    <Dialog\n      open={open}\n      aria-labelledby=\"customized-dialog-title\"\n      onClose={onClose}\n      scroll=\"paper\"\n      fullWidth\n      maxWidth=\"sm\"\n      visible={1}\n    >\n      <DialogTitle\n        id=\"customized-dialog-title\"\n        disableTypography\n        onClose={onClose}\n        classes={{ root: classes.spacing }}\n      >\n        <Typography variant=\"h4\" className={classes.title}>\n          Offer {_get(offer, 'OfferNo', '')} - Original Offer\n        </Typography>\n      </DialogTitle>\n      <DialogContent className={classes.dialogContent}>\n        <Grid container>\n          {fields.map(({ label, value }) => (\n            <Grid item xs={4} key={label} className={classes.field}>\n              <Typography variant=\"h6\" className={classes.fieldLabel}>\n                {label}\n              </Typography>\n              <Typography variant=\"h5\" className={classes.fieldValue}>\n                {value}\n              </Typography>\n            </Grid>\n          ))}\n        </Grid>\n      </DialogContent>\n    </Dialog>\n  );\n};\n\nexport default OriginalOfferDialog;\n","import OriginalOfferDialog from './OriginalOfferDialog';\n\nexport default OriginalOfferDialog;\n","// @flow\nimport _get from 'lodash.get';\nimport type { Offer as OfferType } from 'types/Offer';\nimport { FUNDING_PURCHASE_TYPES } from 'shared/Consts';\nimport { formatPrice } from 'helpers/number';\nimport _isEmpty from 'lodash/isEmpty';\nimport { getBuyerName, getFullName } from '../../../helpers/Offer';\n\ntype fieldType = {\n  label: string,\n  value: string | number,\n};\n\nexport const getOriginalOfferDialogFields = (\n  offer: OfferType,\n): Array<fieldType> => {\n  if (!offer || _isEmpty(offer)) return [];\n\n  const funding = _get(offer, 'Funding.PurchaseType', '');\n\n  return [\n    { label: 'Offer No', value: _get(offer, 'OfferNo', '') },\n    {\n      label: 'offer price',\n      value: _get(offer, 'Offer.OfferPrice')\n        ? formatPrice(_get(offer, 'Offer.OfferPrice'))\n        : 'TBD',\n    },\n    {\n      label: 'funding',\n      value: funding,\n    },\n    {\n      label: 'Loan Type',\n      value:\n        funding === FUNDING_PURCHASE_TYPES.cash\n          ? 'N/A'\n          : _get(offer, 'Funding.LoanType', ''),\n    },\n    {\n      label: 'finance contingency',\n      value:\n        funding === FUNDING_PURCHASE_TYPES.cash\n          ? 'N/A'\n          : _get(offer, 'Offer.FinanceContingency', ''),\n    },\n    {\n      label: 'due diligence contingency',\n      value: _get(offer, 'Offer.InspectionContingency', ''),\n    },\n    {\n      label: 'home sale contingency',\n      value: _get(offer, 'Offer.SaleOfHomeContingency', ''),\n    },\n    {\n      label: 'Closing Period',\n      value: _get(offer, 'Offer.ClosingPeriod', ''),\n    },\n    {\n      label: 'Furniture',\n      value: _get(offer, 'Offer.Furniture', ''),\n    },\n    { label: 'Buyer Name', value: getBuyerName(offer) },\n    {\n      label: 'Buyer Agent Name',\n      value: getFullName(_get(offer, 'AgentInfo', {})),\n    },\n    {\n      label: 'Nile Listing Agent Name',\n      value: 'Khaled Yatim',\n    },\n    {\n      label: 'Property Address',\n      value: _get(offer, 'Property.PropertyData.FullAddress', ''),\n    },\n  ];\n};\n","// @flow\nimport React, { Fragment, useEffect, useState } from 'react';\nimport _isEmpty from 'lodash/isEmpty';\nimport _get from 'lodash.get';\nimport { Loader } from 'react-loaders';\nimport BlockUi from 'react-block-ui';\nimport clsx from 'clsx';\nimport { makeStyles } from '@material-ui/core/styles';\nimport type { Element } from 'react';\nimport { withErrorBoundary } from 'components/ErrorBoundary';\nimport { updateOfferStep } from 'containers/BuyerOffer/redux/Actions';\nimport { connect } from 'react-redux';\nimport { createStructuredSelector } from 'reselect';\nimport { toastr } from 'react-redux-toastr';\nimport { OFFER_STEPS } from 'shared/Consts';\nimport { OFFER_ERROR_MESSAGES } from 'shared/Messages';\nimport Offer from './Offer';\nimport { ViewOfferDialog } from 'containers/BuyerOffer/NewOfferList/ViewOfferDialog';\nimport { mappingCounterData } from 'helpers/Offer';\nimport type { Offer as OfferType } from 'types/Offer';\nimport { ConfirmDialog } from 'components/ConfirmDialog';\nimport CounterOfferModal from 'components/Offers/CounterOfferModal';\nimport ConfirmTransferModal from 'components/BuyerOfferStep/Step500/ConfirmTransferModal';\nimport ConfirmInspectionDialog from 'components/BuyerOfferStep/Step600/ConfirmInspectionDialog';\nimport OriginalOfferDialog from 'components/BuyerOffersSteps/OriginalOfferDialog';\nimport { useQuery } from '@apollo/client';\nimport { GET_USER_OVERVIEW_OFFERS } from 'graphql/queries/user/overview';\n\ntype PropsWithoutRedux = {};\n\ntype Props = {\n  ...PropsWithoutRedux,\n  isUpdatedStep: boolean,\n  error: Object,\n  saveOfferStep: Function,\n  isFormLoaded: boolean,\n};\n\nconst useStyles = makeStyles(theme => ({\n  container: {\n    minHeight: '100px',\n    marginBottom: theme.spacing(3),\n  },\n  loading: {\n    border: '1px solid #E0E0E0',\n    backgroundColor: theme.palette.common.white,\n  },\n}));\n\nconst BuyerOffersSteps = (props: Props): Element<'div' | typeof Fragment> => {\n  const { error, saveOfferStep, isFormLoaded, isUpdatedStep } = props;\n  const classes = useStyles();\n  const [selectedOffer, setSelectedOffer] = useState(undefined);\n  const [openOfferDialog, setOpenOfferDialog] = useState(false);\n  const [openOriginalOfferDialog, setOpenOriginalOfferDialog] = useState(false);\n  const [openConfirmDialog, setOpenConfirmDialog] = useState(false);\n  const [confirmDialogProps, setConfirmDialogProps] = useState({\n    children: '',\n    onAgree: () => '',\n  });\n  const [openCounterOfferDialog, setOpenCounterOfferDialog] = useState(false);\n  const [openConfirmTransfer, setOpenConfirmTransfer] = useState(false);\n  const [openScheduleInspection, setOpenScheduleInspection] = useState(false);\n\n  const {\n    data: dataBuyerOffers,\n    loading: isLoading,\n    refetch: getBuyerOffers,\n  } = useQuery(GET_USER_OVERVIEW_OFFERS, { errorPolicy: 'all' });\n  const offers: Array<OfferType> = _get(\n    dataBuyerOffers,\n    ['getUserOverview', 'Offers', 'Items'],\n    [],\n  );\n\n  useEffect(() => {\n    const { message } = error || {};\n\n    if (message) {\n      toastr.error(OFFER_ERROR_MESSAGES.saveFailure, message);\n    }\n  }, [error]);\n\n  useEffect(() => {\n    if (isUpdatedStep) {\n      getBuyerOffers();\n      handleClickCloseDialog();\n    }\n    // eslint-disable-next-line\n  }, [isUpdatedStep]);\n\n  if (_isEmpty(offers) && !isLoading) {\n    return <></>;\n  }\n\n  const openOfferDialogHandler = (offer: OfferType) => {\n    setSelectedOffer(offer);\n    setOpenOfferDialog(true);\n  };\n\n  const closeDialogHandler = () => {\n    setSelectedOffer(undefined);\n    setOpenOfferDialog(false);\n  };\n\n  const getConfirmContent = type =>\n    `Are you sure? - This action cannot be reverted. Do you want to ${type} the offer?`;\n\n  const openAcceptConfirmHandler = offerId => {\n    setOpenConfirmDialog(true);\n    setConfirmDialogProps({\n      children: getConfirmContent('accept'),\n      onAgree: () => {\n        setOpenConfirmDialog(false);\n        handleAccept(offerId);\n      },\n    });\n  };\n\n  const handleOpenDeclineConfirm = offerId => {\n    setOpenConfirmDialog(true);\n    setConfirmDialogProps({\n      children: getConfirmContent('decline'),\n      onAgree: () => {\n        setOpenConfirmDialog(false);\n        handleDecline(offerId);\n      },\n    });\n  };\n\n  const handleAccept = offerId => {\n    saveOfferStep({ offerId, newStep: OFFER_STEPS.buyerAcceptCounterOffer });\n  };\n\n  const handleDecline = offerId => {\n    saveOfferStep({ offerId, newStep: OFFER_STEPS.buyerDecline });\n  };\n\n  const handleClickOpenCounterDialog = offer => {\n    setSelectedOffer(offer);\n    setOpenOfferDialog(false);\n    setOpenCounterOfferDialog(true);\n  };\n\n  const handleClickCloseDialog = ({ isReload } = {}) => {\n    setSelectedOffer();\n    setOpenCounterOfferDialog(false);\n    setOpenOfferDialog(false);\n    setOpenConfirmDialog(false);\n\n    if (isReload) {\n      getBuyerOffers();\n    }\n  };\n\n  const openConfirmTransferHandler = offer => {\n    setSelectedOffer(offer);\n    setOpenConfirmTransfer(true);\n  };\n\n  const openScheduleInspectionHandler = offer => {\n    setSelectedOffer(offer);\n    setOpenScheduleInspection(true);\n  };\n\n  const openOriginalOfferDialogHandler = offer => {\n    setSelectedOffer(offer);\n    setOpenOriginalOfferDialog(true);\n  };\n\n  const mappingSelectedOffer =\n    selectedOffer && mappingCounterData(selectedOffer);\n\n  return (\n    <BlockUi\n      tag=\"div\"\n      blocking={isLoading}\n      loader={<Loader active type=\"ball-pulse\" color=\"rgba(231,28,99,1)\" />}\n      className={clsx(classes.container, {\n        [classes.loading]: isLoading,\n      })}\n    >\n      {offers.map(offer => (\n        <Offer\n          offer={offer}\n          key={_get(offer, 'OfferId')}\n          openOfferDialogHandler={openOfferDialogHandler}\n          openConfirmTransferHandler={openConfirmTransferHandler}\n          openScheduleInspectionHandler={openScheduleInspectionHandler}\n          openOriginalOfferDialogHandler={openOriginalOfferDialogHandler}\n        />\n      ))}\n      <CounterOfferModal\n        offer={mappingSelectedOffer}\n        open={openCounterOfferDialog}\n        handleClickCloseDialog={handleClickCloseDialog}\n        isFormLoaded={isFormLoaded}\n      />\n      <ViewOfferDialog\n        open={openOfferDialog}\n        offer={mappingSelectedOffer}\n        onClose={closeDialogHandler}\n        handleApproval={openAcceptConfirmHandler}\n        handleDecline={handleOpenDeclineConfirm}\n        handleCounter={handleClickOpenCounterDialog}\n        isSubmitting={isLoading}\n      />\n      <ConfirmDialog\n        open={openConfirmDialog}\n        onClose={() => setOpenConfirmDialog(false)}\n        {...confirmDialogProps}\n      />\n      <ConfirmTransferModal\n        open={openConfirmTransfer}\n        handleClose={() => setOpenConfirmTransfer(false)}\n        offer={mappingSelectedOffer}\n      />\n      <ConfirmInspectionDialog\n        open={openScheduleInspection}\n        handleClose={() => setOpenScheduleInspection(false)}\n        offer={mappingSelectedOffer}\n      />\n      <OriginalOfferDialog\n        open={openOriginalOfferDialog}\n        onClose={() => setOpenOriginalOfferDialog(false)}\n        offer={mappingSelectedOffer}\n      />\n    </BlockUi>\n  );\n};\n\nconst structuredSelector = createStructuredSelector({\n  isUpdatedStep: state => _get(state, ['buyerOffer', 'isUpdatedStep']),\n  error: state => _get(state, ['buyerOffer', 'error']),\n  isFormLoaded: state => _get(state, ['form', 'isFormLoaded']),\n});\n\nconst mapDispatchToProps = {\n  saveOfferStep: updateOfferStep,\n};\n\nexport default (connect(\n  structuredSelector,\n  mapDispatchToProps,\n)(withErrorBoundary(BuyerOffersSteps)): Element<PropsWithoutRedux>);\n"],"sourceRoot":""}