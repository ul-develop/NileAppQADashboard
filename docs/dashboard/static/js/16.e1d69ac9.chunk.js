(this.webpackJsonpnilehome=this.webpackJsonpnilehome||[]).push([[16],{1553:function(e,t,n){"use strict";n.r(t);var a=n(112),r=n(68),c=n(0),o=n.n(c),i=n(402),s=n(1456),u=n(1442),l=n(21),d=n.n(l),f=n(1356),m=n(73),p=n(27),b=Object(f.a)((function(e){return{today:{backgroundColor:Object(m.a)(e.palette.primary.main,.16)}}})),g=function(e){var t=b(),n=e.today;return c.createElement(u.g.DayScaleCell,Object.assign({},e,{className:Object(p.a)(Object(a.a)({},t.today,n))}))},O=n(151),v=n(182),h=n(183),j=n(171),k=n.n(j),E="Something went wrong",y="".concat("MM-DD-YYYY"," HH:mm:ss"),D=function(e){var t=e.config,n=e.dateString,a=e.key,r=d()(t,a)||"";return k()("".concat(n," ").concat(r),y)},S=function(e){var t=e.dateString,n=e.config,a=function(e){return new Date(e).toLocaleString("en-us",{weekday:"short"}).toLowerCase()}(t),r=k()(t);if(function(e){return k()().isSame(e,"day")}(r))return!1;if(function(e){return k()().diff(e,"hours")>0}(r))return!1;if(!function(e){var t=e.dateName,n=e.config;return d()(n,"".concat(t,"Active"))||!1}({dateName:a,config:n}))return!1;var c=r.format("MM-DD-YYYY");return!!function(e){var t=e.config,n=e.currentMoment,a=e.currentDate,r=e.dateName,c=D({config:t,dateString:a,key:"".concat(r,"Start")}),o=D({config:t,dateString:a,key:"".concat(r,"End")});return n.isSameOrAfter(c)&&n.isSameOrBefore(o)}({config:n,currentMoment:r,currentDate:c,dateName:a})&&!function(e){var t=e.config,n=e.currentMoment,a=e.currentDate,r=D({config:t,dateString:a,key:"breakStart"}),c=D({config:t,dateString:a,key:"breakEnd"});return n.isSameOrAfter(r)&&n.isSameOrBefore(c)}({config:n,currentMoment:r,currentDate:c})},w=Object(f.a)((function(e){return{disableCell:{background:"linear-gradient(-45deg,".concat(e.palette.action.disabledBackground," 10%,transparent 10%,transparent 50%,").concat(e.palette.action.disabledBackground," 50%,").concat(e.palette.action.disabledBackground," 60%,transparent 60%,transparent)"),backgroundSize:"8px 8px",pointerEvents:"none"}}})),x=Object(v.a)({config:function(e){return d()(e,["calendar","config"])}}),C=Object(O.connect)(x,void 0)(Object(h.a)((function(e){var t=w(),n=e.startDate,r=e.config;return c.createElement(u.g.TimeTableCell,Object.assign({},e,{className:Object(p.a)(Object(a.a)({},t.disableCell,!S({dateString:n,config:r})))}))}))),M=n(287),T=["children"],Y=Object(f.a)((function(e){return{appointment:{backgroundColor:e.palette.primary.main,"&:hover":{backgroundColor:e.palette.primary.main}}}})),I=function(e){var t=e.children,n=Object(M.a)(e,T),a=Y();return c.createElement(u.b.Appointment,Object.assign({},n,{className:a.appointment}),t)},L=n(240),B=n(1550),A=n(1551),N=Object(f.a)((function(e){return{wrapper:{padding:e.spacing(2),paddingTop:0},section:{marginBottom:e.spacing(1)}}})),R=function(e){var t=e.appointmentData,n=N(),a=function(e){var t=e.startDate,n=e.endDate;return{displayDate:k()(t).format("dddd, MMMM DD, YYYY"),displayTime:"".concat(k()(t).format("hh:mm A")," - ").concat(k()(n).format("hh:mm A"))}}(t),r=a.displayDate,o=a.displayTime;return c.createElement(i.a,{className:n.wrapper},c.createElement(L.a,{variant:"h3",color:"primary",className:n.section},d()(t,"title","")),c.createElement("div",{className:n.section},c.createElement(L.a,{variant:"p"},c.createElement(B.a,null)," ",r)),c.createElement("div",null,c.createElement(L.a,{variant:"p"},c.createElement(A.a,null)," ",o)))},W=n(60),H=n.n(W),P=n(237),G=function(e){return{type:P.a.setConfig,payload:e}},U=function(e){return{type:P.a.setError,payload:e}},V=function(e){return{type:P.a.setIsLoading,payload:e}},F=n(1447),J={setStartOfWeek:function(e){return{type:P.a.setStartOfWeek,payload:e}},setEndOfWeek:function(e){return{type:P.a.setEndOfWeek,payload:e}}},q=Object(O.connect)(void 0,J)(Object(h.a)((function(e){var t=e.setStartOfWeek,n=e.setEndOfWeek;return o.a.createElement(F.f,{name:"IntegratedDates"},o.a.createElement(F.e,{name:"startViewDate",computed:function(e){var n=e.startViewDate;return t(n),n}}),o.a.createElement(F.e,{name:"endViewDate",computed:function(e){var t=e.endViewDate;return n(t),t}}))}))),z=n(138),K=n(124),Q=n(10),X=n.n(Q),Z=n(28),$=n(9),_=n(11),ee=n(13),te=n(12),ne=n(4),ae=n(95),re=n.n(ae),ce=n(410),oe=function(){function e(){Object($.a)(this,e),this.baseURL="".concat("https://api.youcanbook.me/v1","/").concat("f331b6f1-44e8-4d50-a3b8-8f45cce72dcd","/"),this.cancelToken=null}return Object(_.a)(e,[{key:"cancel",value:function(){null!==this.cancelToken&&this.cancelToken()}},{key:"axios",value:function(e){var t=e.method,n=e.baseURL,a=void 0===n?this.baseURL:n,r=e.url,c=e.data,o=e.params,i=e.headers,s=void 0===i?{}:i,u=e.needResHeaders,l=void 0!==u&&u,f=this,m=re.a.CancelToken;return new Promise((function(e,n){var i={method:t,url:r,baseURL:a,timeout:3e4,params:o,data:c,headers:Object(ne.a)(Object(ne.a)({},s),{},{Authorization:ce.b}),cancelToken:new m((function(e){f.cancelToken=e}))};re.a.request(i).then((function(t){var n="object"===typeof t.data?t.data:JSON.parse(t.data);e(l?{data:n,headers:t.headers}:n)}),(function(e){var t=d()(e,["response","status"]),a=d()(e,["response","data","message"]),r=d()(e,["response","data","errors"]);n({status:t,message:a,errors:r})}))}))}}]),e}(),ie=new(function(e){Object(ee.a)(n,e);var t=Object(te.a)(n);function n(){return Object($.a)(this,n),t.apply(this,arguments)}return Object(_.a)(n,[{key:"getProfileById",value:function(e){var t=e.id,n=e.fields;return t?this.axios({method:"GET",url:"".concat(ce.a.PROFILES,"/").concat(t),params:{fields:n}}):{}}}]),n}(oe)),se=n(152),ue=n(1513),le=n.n(ue),de=function(e){Object(ee.a)(n,e);var t=Object(te.a)(n);function n(){return Object($.a)(this,n),t.apply(this,arguments)}return Object(_.a)(n,[{key:"getBookings",value:function(){var e=Object(Z.a)(X.a.mark((function e(t){var n,a,r,c,o,i,s,u,l,f;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.profileId,a=t.from,r=t.to,n){e.next=3;break}return e.abrupt("return",{});case 3:c=!0,o="",i=[];case 6:if(!c){e.next=25;break}if(o){e.next=13;break}return e.next=10,this.axios({method:"GET",url:"".concat(ce.a.PROFILES,"/").concat(n,"/").concat(ce.a.BOOKINGS),params:{fields:"id,startsAt,endsAt,answers,answers.*",jumpToDate:k()(a).format("YYYY-MM-DD")},needResHeaders:!0});case 10:e.t0=e.sent,e.next=16;break;case 13:return e.next=15,this.axios({method:"GET",url:o,needResHeaders:!0});case 15:e.t0=e.sent;case 16:s=e.t0,u=d()(s,["headers","link"],""),o=d()(le()(u),["next","url"],""),l=d()(s,["data"]),i=[].concat(Object(se.a)(i),Object(se.a)(l)),f=d()(l,[l.length-1,"startsAt"],""),c=o&&k()(f).isBefore(r),e.next=6;break;case 25:return e.abrupt("return",me(i));case 26:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(oe),fe=function(e){var t=d()(e,["answers"],[]).filter((function(e){return"EMAIL"===e.code}))[0];return d()(t,"string","")},me=function(e){return e.map((function(e){return{title:fe(e),id:d()(e,"id"),startDate:d()(e,"startsAt"),endDate:d()(e,"endsAt")}}))},pe=new de,be=function(e){var t=e.profileId,n=Object(O.useDispatch)();Object(c.useEffect)((function(){return Object(Z.a)(X.a.mark((function e(){var a;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(V(!0)),e.prev=1,e.next=4,ie.getProfileById({id:t,fields:"times,times.*"});case 4:a=e.sent,n(G(d()(a,"times")||{})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),n(U(e.t0));case 11:n(V(!1));case 12:case"end":return e.stop()}}),e,null,[[1,8]])})))(),function(){ie.cancel()}}),[])},ge=function(e){var t=e.profileId,n=Object(O.useDispatch)(),a=Object(O.useSelector)((function(e){return d()(e,["calendar","startOfWeek"])})),o=Object(O.useSelector)((function(e){return d()(e,["calendar","endOfWeek"])})),i=Object(c.useState)([]),s=Object(r.a)(i,2),u=s[0],l=s[1];return Object(c.useEffect)((function(){return Object(Z.a)(X.a.mark((function e(){var r;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,n(V(!0)),e.next=6,pe.getBookings({profileId:t,from:a,to:o});case 6:r=e.sent,l(r),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),n(U(e.t0));case 13:n(V(!1));case 14:case"end":return e.stop()}}),e,null,[[2,10]])})))(),function(){pe.cancel()}}),[o]),[u,l]},Oe=n(41),ve=function(){var e=Object(O.useSelector)((function(e){return d()(e,["calendar","error"])}));Object(c.useEffect)((function(){if(e){var t=(e||{}).message;t&&Oe.toastr.error(E,t)}}),[e])},he=Object(f.a)((function(e){return{container:{minHeight:"100px",marginBottom:e.spacing(3),padding:e.spacing(3)},loading:{border:"1px solid #E0E0E0",backgroundColor:e.palette.common.white}}})),je=Object(v.a)({config:function(e){return d()(e,["calendar","config"])},isLoading:function(e){return d()(e,["calendar","isLoading"])}});t.default=Object(O.connect)(je,void 0)(Object(h.a)((function(e){var t=e.config,n=e.profileId,c=e.isLoading,l=he();be({profileId:n});var f=ge({profileId:n}),m=Object(r.a)(f,1)[0];return ve(),H()(t)&&!c?o.a.createElement(o.a.Fragment,null):o.a.createElement(K.a,{tag:"div",blocking:c,loader:o.a.createElement(z.Loader,{active:!0,type:"ball-pulse",color:"rgba(231,28,99,1)"}),className:Object(p.a)(l.container,Object(a.a)({},l.loading,c))},o.a.createElement(i.a,{elevation:3},o.a.createElement(u.d,{data:m},o.a.createElement(s.q,null),o.a.createElement(u.g,{timeTableCellComponent:C,dayScaleCellComponent:g,cellDuration:d()(t,"slotLengthMinutes")||60}),o.a.createElement(q,null),o.a.createElement(u.f,null),o.a.createElement(u.c,null),o.a.createElement(u.e,null),o.a.createElement(u.b,{appointmentComponent:I}),o.a.createElement(u.a,{showCloseButton:!0,contentComponent:R}))))})))}}]);
//# sourceMappingURL=16.e1d69ac9.chunk.js.map