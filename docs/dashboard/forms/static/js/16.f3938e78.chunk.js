(this.webpackJsonpnilehome=this.webpackJsonpnilehome||[]).push([[16],{1606:function(e,t,a){"use strict";a.r(t);var n,r,c=a(82),o=a(0),i=a.n(o),l=a(405),s=a(1490),u=a(1460),m=a(21),p=a.n(m),d=a(1359),f=a(60),b=a(24),v=Object(d.a)((function(e){return{cell:{paddingTop:e.spacing(1)},today:{backgroundColor:Object(f.a)(e.palette.primary.main,.16)}}})),g=function(e){var t=v(),a=e.today;return o.createElement(u.h.DayScaleCell,Object.assign({},e,{className:Object(b.a)(t.cell,Object(c.a)({},t.today,a))}))},O=a(4),h=a(135),y=a(164),E=a(165),j=a(173),k=a.n(j),D=(a(1494),a(1)),x="Something went wrong",C="".concat("YYYY-MM-DD"," HH:mm:ss"),w=function(e){var t=e.config,a=e.dateString,n=e.key,r=p()(t,n)||"",c=p()(t,"timeZone");return L("".concat(a," ").concat(r),c)},S=function(e){var t=e.dateString,a=e.config,n=function(e){return new Date(e).toLocaleString("en-us",{weekday:"short"}).toLowerCase()}(t),r=k()(t);if(function(e){return k()().diff(e,"hours")>0}(r))return!1;if(!function(e){var t=e.dateName,a=e.config;return p()(a,"".concat(t,"Active"))||!1}({dateName:n,config:a}))return!1;var c=r.format("YYYY-MM-DD");return!!function(e){var t=e.config,a=e.currentMoment,n=e.currentDate,r=e.dateName,c=w({config:t,dateString:n,key:"".concat(r,"Start")}),o=w({config:t,dateString:n,key:"".concat(r,"End")});return a.isSameOrAfter(c)&&a.isBefore(o)}({config:a,currentMoment:r,currentDate:c,dateName:n})&&!function(e){var t=e.config,a=e.currentMoment,n=e.currentDate,r=w({config:t,dateString:n,key:"breakStart"}),c=w({config:t,dateString:n,key:"breakEnd"});return a.isSameOrAfter(r)&&a.isBefore(c)}({config:a,currentMoment:r,currentDate:c})},Y=function(e){var t=e.startDate,a=e.endDate;return{displayDate:k()(t).format("dddd, MMMM DD, YYYY"),displayTime:"".concat(k()(t).format("hh:mm A")," - ").concat(k()(a).format("hh:mm A"))}},T=function(e){var t=e.services.find((function(e){return e.name.toLowerCase()===D.n}));return Boolean(t)},L=function(e,t){return t?k.a.tz(e,t).local().format(C):k()(e,C)},I=Object(d.a)((function(e){return{disableCell:{background:"linear-gradient(-45deg,".concat(e.palette.action.disabledBackground," 10%,transparent 10%,transparent 50%,").concat(e.palette.action.disabledBackground," 50%,").concat(e.palette.action.disabledBackground," 60%,transparent 60%,transparent)"),backgroundSize:"8px 8px",pointerEvents:"none"}}})),M=Object(y.a)({timeConfig:function(e){return Object(O.a)(Object(O.a)({},p()(e,"calendar.config.times")),{},{timeZone:p()(e,"calendar.config.timeZone")})}}),B=Object(h.connect)(M,void 0)(Object(E.a)((function(e){var t=I(),a=e.startDate,n=e.timeConfig;return o.createElement(u.h.TimeTableCell,Object.assign({},e,{className:Object(b.a)(Object(c.a)({},t.disableCell,!S({dateString:a,config:n})))}))}))),N=a(272),A=a(65),q=a.n(A),F=a(242),P=["property","children"],R=Object(d.a)((function(e){return{appointment:{padding:e.spacing(.5,1),backgroundColor:e.palette.primary.main,color:e.palette.common.white,"&:hover":{backgroundColor:e.palette.primary.main}},busy:{backgroundColor:e.palette.common.lightGray,color:e.palette.primary.gray,"&:hover":{backgroundColor:e.palette.common.lightGray}},title:{overflow:"hidden",fontWeight:"bold",whiteSpace:"nowrap",textOverflow:"ellipsis"}}})),H=Object(y.a)({property:function(e){return q()(e,["calendar","property"])}}),W=Object(h.connect)(H)((function(e){var t=e.property,a=(e.children,Object(N.a)(e,P)),n=a.data,r=R(),i=!t,l=T(n),s=n.title,m=Y(n).displayTime;return o.createElement(u.c.Appointment,Object.assign({},a,{className:Object(b.a)(r.appointment,Object(c.a)({},r.busy,l))}),i&&T(n)?o.createElement("div",null,"Busy"):o.createElement("div",null,o.createElement(F.a,{variant:"subtitle1",classes:{root:r.title}},s),o.createElement(F.a,{variant:"subtitle1"},m)))})),V=a(1602),z=a(1603),G=Object(d.a)((function(e){return{wrapper:{padding:e.spacing(2),paddingTop:0},section:{marginBottom:e.spacing(1)}}})),U=function(e){var t=e.appointmentData,a=G(),n=Y(t),r=n.displayDate,c=n.displayTime;return o.createElement(l.a,{className:a.wrapper},o.createElement(F.a,{variant:"h3",color:"primary",className:a.section},p()(t,"title","")),o.createElement("div",{className:a.section},o.createElement(F.a,{variant:"h5"},o.createElement(V.a,null)," ",r)),o.createElement("div",null,o.createElement(F.a,{variant:"h5"},o.createElement(z.a,null)," ",c)))},Z=a(61),K=a.n(Z),_=a(410),J=a(1465),X={setStartOfWeek:_.i,setEndOfWeek:_.d},Q=Object(h.connect)(void 0,X)(Object(E.a)((function(e){var t=e.setStartOfWeek,a=e.setEndOfWeek;return i.a.createElement(J.f,{name:"IntegratedDates"},i.a.createElement(J.e,{name:"startViewDate",computed:function(e){var a=e.startViewDate;return t(a),a}}),i.a.createElement(J.e,{name:"endViewDate",computed:function(e){var t=e.endViewDate;return a(t),t}}))}))),$=a(127),ee=a(111),te=a(10),ae=a.n(te),ne=a(28),re=a(9),ce=a(11),oe=a(13),ie=a(12),le=a(97),se=a.n(le),ue=a(413),me=function(){function e(){Object(re.a)(this,e),this.baseURL="".concat("https://api.youcanbook.me/v1","/").concat("dc7ded13-f988-4671-b5d1-142c6096066e","/"),this.cancelToken=null}return Object(ce.a)(e,[{key:"cancel",value:function(){null!==this.cancelToken&&this.cancelToken()}},{key:"axios",value:function(e){var t=e.method,a=e.baseURL,n=void 0===a?this.baseURL:a,r=e.url,c=e.data,o=e.params,i=e.headers,l=void 0===i?{}:i,s=e.needResHeaders,u=void 0!==s&&s,m=this,d=se.a.CancelToken;return new Promise((function(e,a){var i={method:t,url:r,baseURL:n,timeout:3e4,params:o,data:c,headers:Object(O.a)(Object(O.a)({},l),{},{Authorization:ue.c}),cancelToken:new d((function(e){m.cancelToken=e}))};se.a.request(i).then((function(t){var a="object"===typeof t.data?t.data:JSON.parse(t.data);e(u?{data:a,headers:t.headers}:a)}),(function(e){var t=p()(e,["response","status"]),n=p()(e,["response","data","message"]),r=p()(e,["response","data","errors"]);a({status:t,message:n,errors:r})}))}))}}]),e}(),pe=new(function(e){Object(oe.a)(a,e);var t=Object(ie.a)(a);function a(){return Object(re.a)(this,a),t.apply(this,arguments)}return Object(ce.a)(a,[{key:"getProfileById",value:function(e){var t=e.id,a=e.fields;return t?this.axios({method:"GET",url:"".concat(ue.b.PROFILES,"/").concat(t),params:{fields:a}}):{}}}]),a}(me)),de=a(129),fe=a(1554),be=a.n(fe),ve=function(e){var t=p()(e,["answers"],[]).filter((function(e){return"EMAIL"===e.code}))[0];return p()(t,"string","")},ge=function(e){return!e.cancelled},Oe=function(e){return e.map((function(e){return function(e){var t=p()(e,"startsAt"),a=p()(e,"endsAt"),n=p()(e,"timeZone");return{title:ve(e),id:p()(e,"id"),startDate:L(t,n),endDate:L(a,n),services:p()(e,"services",[]),cancelled:p()(e,"cancelled")}}(e)})).filter(ge)},he=new(function(e){Object(oe.a)(a,e);var t=Object(ie.a)(a);function a(){return Object(re.a)(this,a),t.apply(this,arguments)}return Object(ce.a)(a,[{key:"createBooking",value:function(){var e=Object(ne.a)(ae.a.mark((function e(t){var a,n,r;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.profileId,n=t.data,e.next=3,this.axios({method:"POST",url:"".concat(ue.b.PROFILES,"/").concat(a,"/").concat(ue.b.BOOKINGS),params:{fields:ue.a},data:Object(O.a)({},n)});case 3:return r=e.sent,e.abrupt("return",Oe([r]));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createBookings",value:function(){var e=Object(ne.a)(ae.a.mark((function e(t){var a,n,r,c,o,i;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.profileId,n=t.data,r=0,c=[],o=[];case 4:if(r===n.length){e.next=18;break}return e.prev=5,e.next=8,this.axios({method:"POST",url:"".concat(ue.b.PROFILES,"/").concat(a,"/").concat(ue.b.BOOKINGS),params:{fields:ue.a},data:n[r]});case 8:i=e.sent,o.push(i),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),c.push(n[r]);case 15:r+=1,e.next=4;break;case 18:return e.abrupt("return",{bookings:Oe(o),errors:c});case 19:case"end":return e.stop()}}),e,this,[[5,12]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getBookings",value:function(){var e=Object(ne.a)(ae.a.mark((function e(t){var a,n,r,c,o,i,l,s,u,m;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.profileId,n=t.from,r=t.to,a){e.next=3;break}return e.abrupt("return",[]);case 3:c=!0,o="",i=[];case 6:if(!c){e.next=25;break}if(o){e.next=13;break}return e.next=10,this.axios({method:"GET",url:"".concat(ue.b.PROFILES,"/").concat(a,"/").concat(ue.b.BOOKINGS),params:{fields:ue.a,jumpToDate:k()(n).format("YYYY-MM-DD")},needResHeaders:!0});case 10:e.t0=e.sent,e.next=16;break;case 13:return e.next=15,this.axios({method:"GET",url:o,needResHeaders:!0});case 15:e.t0=e.sent;case 16:l=e.t0,s=p()(l,["headers","link"],""),o=p()(be()(s),["next","url"],""),u=p()(l,["data"]),i=[].concat(Object(de.a)(i),Object(de.a)(u)),m=p()(u,[u.length-1,"startsAt"],""),c=o&&k()(m).isBefore(r),e.next=6;break;case 25:return e.abrupt("return",Oe(i));case 26:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),a}(me)),ye=function(e){var t=e.profileId,a=Object(h.useDispatch)();Object(o.useEffect)((function(){return a(Object(_.g)(t)),Object(ne.a)(ae.a.mark((function e(){var n;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(Object(_.f)(!0)),e.prev=1,e.next=4,pe.getProfileById({id:t,fields:"times,times.*,questions,questions.*,services, services.*,services.items.*,actions,actions.*,title,timeZone"});case 4:n=e.sent,a(Object(_.c)(n||{})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),a(Object(_.e)(e.t0));case 11:a(Object(_.f)(!1));case 12:case"end":return e.stop()}}),e,null,[[1,8]])})))(),function(){pe.cancel()}}),[t])},Ee=function(e){var t=e.profileId,a=Object(h.useDispatch)(),n=Object(h.useSelector)((function(e){return p()(e,["calendar","startOfWeek"])})),r=Object(h.useSelector)((function(e){return p()(e,["calendar","endOfWeek"])}));Object(o.useEffect)((function(){return Object(ne.a)(ae.a.mark((function e(){var c;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,a(Object(_.f)(!0)),e.next=6,he.getBookings({profileId:t,from:n,to:r});case 6:c=e.sent,a(Object(_.b)(c)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),a(Object(_.e)(e.t0));case 13:a(Object(_.f)(!1));case 14:case"end":return e.stop()}}),e,null,[[2,10]])})))(),function(){he.cancel()}}),[r,t])},je=a(39),ke=function(){var e=Object(h.useSelector)((function(e){return p()(e,["calendar","error"])}));Object(o.useEffect)((function(){if(e){var t=(e||{}).message;t&&je.toastr.error(x,t)}}),[e])},De=a(63),xe=a(1439),Ce=a(1418),we=a(585),Se=a(1452),Ye=a(67),Te="SIMPLE",Le="CHECKBOX",Ie="MULTI_DROPDOWN",Me=(n={},Object(c.a)(n,Te,""),Object(c.a)(n,Le,!1),Object(c.a)(n,Ie,""),n),Be="daily",Ne="weekly",Ae=function(e){return e.reduce((function(e,t){var a=t.code,n=t.type;return Object(O.a)(Object(O.a)({},e),{},Object(c.a)({},a,Me[n]))}),{appointmentType:void 0})},qe=function(e,t){return e.map((function(e){var a=e.code;return{code:a,string:t[a]}}))},Fe=function(e){var t=e.appointmentData,a=e.values,n=e.config,r=n.title,c=n.questions,o=a.FNAME,i=a.appointmentType,l=t.startDate;return{title:"".concat(o," and ").concat(r),startsAt:k()(l).format("YYYY-MM-DDTHH:mm:ss"),tentative:"NOT_USED",timeZone:k.a.tz.guess(),cancelled:!1,units:1,services:[{id:i.id,name:i.name}],answers:qe(c,a)}},Pe=function(e){var t=e.appointmentData,a=e.values,n=e.config,r=n.questions,c=t.startDate,o=a.repeat,i=a.repeatType,l=a.startDate,s=a.endDate,u=function(e){return e.find((function(e){return"busy"===e.name}))}(q()(n,"services.items",[]));if(!o)return[{title:"busy",startsAt:k()(c).format("YYYY-MM-DDTHH:mm:ss"),tentative:"NOT_USED",timeZone:k.a.tz.guess(),cancelled:!1,units:1,services:[u],answers:qe(r,a)}];var m=k()(c).format("HH:mm:ss"),p=k()(l),d=k()(s).diff(p,"day"),f=i===Ne?7:1;return Array.from(Array(Math.floor(d/f)+1),(function(e,t){return t*f})).map((function(e){var t=k()(l).add(e,"day");return{title:"busy",startsAt:"".concat(t.format("YYYY-MM-DD"),"T").concat(m),tentative:"NOT_USED",timeZone:k.a.tz.guess(),cancelled:!1,units:1,services:[u],answers:qe(r,a)}}))},Re=function(e){var t=e.map((function(e){return e.startsAt})).join(", ");return{message:"Cannot book at dates: ".concat(t)}},He=Object(d.a)((function(e){return{wrapper:Object(O.a)(Object(O.a)({},e.typography.h4),{},{padding:e.spacing(2,0),backgroundColor:e.palette.background.gray,textAlign:"center"})}})),We=function(e){var t=e.appointmentData,a=t.startDate,n=t.endDate,r=He(),c=Y({startDate:a,endDate:n}),o=c.displayDate,l=c.displayTime;return i.a.createElement("div",{className:r.wrapper},i.a.createElement(F.a,{variant:"h4"},o),i.a.createElement(xe.a,{sx:{mt:1}},i.a.createElement(F.a,{variant:"h3"},l)))},Ve=a(1559),ze=a.n(Ve),Ge=a(1444),Ue=a(1435),Ze=Object(d.a)((function(e){return{group:{width:"100%",margin:e.spacing(1,0,2,0)},button:{padding:e.spacing(1.5,2),textTransform:"none"},buttonLabel:{width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center"},duration:{display:"flex",alignItems:"center"},selected:{"&&, &&:hover":{backgroundColor:e.palette.primary.main}}}})),Ke=function(e){var t=e.appointmentTypes,a=Ze(),n=Object(Se.c)(),r=n.values,c=n.setFieldValue,o=q()(r,"appointmentType.id")||"";return i.a.createElement(i.a.Fragment,null,i.a.createElement(F.a,{variant:"h4"},"Choose an appointment type"),i.a.createElement(Ge.a,{orientation:"vertical",value:o,exclusive:!0,onChange:function(e,a){var n=t.find((function(e){return e.id===a}));c("appointmentType",n)},classes:{root:a.group}},t.map((function(e){return i.a.createElement(Ue.a,{value:e.id,classes:{root:a.button,label:a.buttonLabel,selected:a.selected},key:e.id},i.a.createElement(F.a,{variant:"h5",color:"textPrimary"},e.name),i.a.createElement(F.a,{variant:"subtitle1",classes:{root:a.duration}},i.a.createElement(ze.a,{fontSize:"small"}),i.a.createElement(xe.a,{sx:{ml:.5,mt:.25}},function(e){var t=e.numberOfSlots,a=e.slotLengthMinutes;return"".concat(t*a," minutes")}(e))))}))))},_e=a(1599),Je=a(1597),Xe=a(1598),Qe=a(1620),$e=Object(d.a)((function(e){return{textField:{marginTop:e.spacing(.5)},label:Object(O.a)({color:e.palette.primary.dark},e.typography.h4),input:Object(O.a)(Object(O.a)({},e.typography.h5),{},{padding:e.spacing(1,1.5)})}})),et=function(e){var t=$e(),a=e.name,n=e.variant,r=e.placeholder,c=void 0===r?"":r,o=e.label,l=e.value,s=e.required,u=e.onChange,m=e.classes,p=void 0===m?{}:m;return i.a.createElement(Je.a,{required:s},i.a.createElement(Xe.a,{color:"secondary",className:t.label},o),i.a.createElement(Qe.a,{name:a,variant:n,placeholder:c,value:l,onChange:u,classes:{root:Object(b.a)(t.textField,p.textField)},InputProps:{classes:{input:Object(b.a)(t.input,p.input)}}}))},tt=Object(d.a)((function(e){return{after:Object(O.a)({},e.typography.subtitle)}})),at=a(1611),nt=a(1593),rt=Object(d.a)((function(e){return{wrapper:{"& .MuiOutlinedInput-notchedOutline>legend>span":{display:"none"}},label:{"&&":Object(O.a)({color:e.palette.primary.dark},e.typography.h4)},select:Object(O.a)(Object(O.a)({},e.typography.h5),{},{padding:e.spacing(1,1.5)}),item:Object(O.a)({},e.typography.h5)}})),ct=function(e){var t=rt(),a=e.name,n=e.value,r=e.onChange,c=e.label,o=e.variant,l=e.required,s=e.options,u=e.classes,m=void 0===u?{}:u;return i.a.createElement(Je.a,{required:l,classes:{root:t.wrapper}},i.a.createElement(Xe.a,{className:t.label},c),i.a.createElement(at.a,{name:a,classes:{root:Object(b.a)(t.select,m.select)},value:n,onChange:r,label:"",variant:o,MenuProps:{anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},getContentAnchorEl:null}},i.a.createElement(nt.a,{classes:{root:Object(b.a)(t.item,m.item)},value:""},i.a.createElement("em",null,"None")),s.map((function(e){return i.a.createElement(nt.a,{key:e,value:e,classes:{root:Object(b.a)(t.item,m.item)}},e)}))))},ot=a(1601),it=a(1615),lt=Object(d.a)((function(e){return{label:Object(O.a)({},e.typography.h5),checkbox:{}}})),st=function(e){var t=lt(),a=e.name,n=e.required,r=e.checked,c=e.onChange,o=e.label,l=e.color,s=void 0===l?"primary":l,u=e.classes,m=void 0===u?{}:u;return i.a.createElement(Je.a,{required:n},i.a.createElement(ot.a,{classes:{label:Object(b.a)(t.label,m.label)},control:i.a.createElement(it.a,{classes:{root:Object(b.a)(t.checkbox,m.checkbox)},checked:r,onChange:c,name:a,color:s}),label:o}))},ut=Object(d.a)((function(e){return{after:Object(O.a)({},e.typography.subtitle)}})),mt=(r={},Object(c.a)(r,Te,(function(e){var t=e.question,a=tt(),n=t.code,r=t.before,c=t.after,o=t.required,l=Object(Se.c)(),s=l.values,u=l.handleChange;return i.a.createElement(xe.a,{sx:{display:"flex",flexDirection:"column",my:1}},i.a.createElement(et,{name:n,variant:"outlined",placeholder:"",label:r,value:s[n],onChange:u,required:o}),Boolean(c)&&i.a.createElement(_e.a,{className:a.after},c))})),Object(c.a)(r,Le,(function(e){var t=e.question,a=ut(),n=t.after,r=t.before,c=t.required,o=t.code,l=Object(Se.c)(),s=l.values,u=l.handleChange;return i.a.createElement(xe.a,{sx:{display:"flex",flexDirection:"column",my:1}},i.a.createElement(st,{checked:s[o],onChange:u,name:o,color:"primary",label:r,required:c}),Boolean(n)&&i.a.createElement(_e.a,{className:a.after},n))})),Object(c.a)(r,Ie,(function(e){var t=e.question,a=t.code,n=t.after,r=t.before,c=t.required,o=t.options,l=void 0===o?[]:o,s=Object(Se.c)(),u=s.values,m=s.handleChange;return i.a.createElement(xe.a,{sx:{display:"flex",flexDirection:"column",my:1}},i.a.createElement(ct,{name:a,value:u[a],onChange:m,label:r,variant:"outlined",required:c,options:l}),Boolean(n)&&i.a.createElement(xe.a,{sx:{mt:1}},n))})),r),pt=function(e){var t=e.questions;return i.a.createElement(i.a.Fragment,null,t.map((function(e){var t=mt[e.type];return i.a.createElement(t,{key:e.code,question:e})})))},dt=Object(y.a)({profileId:function(e){return p()(e,"calendar.profileId")},config:function(e){return p()(e,"calendar.config")},isLoading:function(e){return p()(e,"calendar.isLoading")}}),ft={setIsLoading:_.f,setError:_.e,addAppointments:_.a},bt=Object(h.connect)(dt,ft)(Object(E.a)((function(e){var t=e.profileId,a=e.config,n=e.appointmentData,r=e.setIsLoading,c=e.setError,o=e.addAppointments,l=e.onSave,s=e.isLoading,u=p()(a,"questions",[]),m=p()(a,"services.items",[]).filter((function(e){return e.name!==D.n})),d=Ae(u),f=function(){var e=Object(ne.a)(ae.a.mark((function e(i){var s,u;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r(!0),s=Fe({appointmentData:n,values:i,config:a}),e.next=5,he.createBooking({profileId:t,data:s});case 5:u=e.sent,o(u),l(),r(!1),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),r(!1),c(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}();return i.a.createElement(xe.a,{sx:{display:"flex",flexDirection:"column"}},i.a.createElement(Se.b,{initialValues:d,onSubmit:f},i.a.createElement(Se.a,null,i.a.createElement(Ke,{appointmentTypes:m}),i.a.createElement(We,{appointmentData:n}),i.a.createElement(Ce.a,null),i.a.createElement(xe.a,{sx:{mt:4}},i.a.createElement(pt,{questions:u})),i.a.createElement(we.a,{type:"submit",color:"primary",disableElevation:!0,fullWidth:!0,variant:"contained",disabled:s},"Confirm Booking"))))}))),vt=a(1492),gt=a(1604),Ot=a(1410),ht=a(1621),yt=a(1612),Et=a(1415),jt=a(1451),kt=a(1605),Dt=function(){var e=Object(Se.c)(),t=e.values,a=e.handleChange,n=e.setFieldValue,r=function(e){return function(t){n(e,k()(t).format("MM/DD/YYYY"))}};return i.a.createElement("div",null,i.a.createElement(ot.a,{control:i.a.createElement(gt.a,{name:"repeat",checked:t.repeat,onChange:a,color:"primary"}),label:"Repeat"}),i.a.createElement(Ot.a,{in:t.repeat},i.a.createElement("div",null,i.a.createElement(ht.a,{name:"repeatType",value:t.repeatType,onChange:a},i.a.createElement(ot.a,{value:"daily",control:i.a.createElement(yt.a,{color:"primary"}),label:"Daily"}),i.a.createElement(ot.a,{value:"weekly",control:i.a.createElement(yt.a,{color:"primary"}),label:"Weekly"}))),i.a.createElement(Et.a,{container:!0,justifyContent:"space-between"},i.a.createElement(jt.a,{utils:vt.a},i.a.createElement(kt.a,{disableToolbar:!0,inputVariant:"outlined",format:"MM/DD/YYYY",margin:"normal",label:"Start date",value:new Date(t.startDate),onChange:r("startDate")}),i.a.createElement(kt.a,{disableToolbar:!0,inputVariant:"outlined",format:"MM/DD/YYYY",margin:"normal",label:"End date",value:new Date(t.endDate),onChange:r("endDate")})))))},xt=Object(y.a)({profileId:function(e){return p()(e,"calendar.profileId")},config:function(e){return p()(e,"calendar.config")},property:function(e){return p()(e,"calendar.property")},isLoading:function(e){return p()(e,"calendar.isLoading")}}),Ct={setIsLoading:_.f,setError:_.e,addAppointments:_.a},wt=Object(h.connect)(xt,Ct)(Object(E.a)((function(e){var t=e.profileId,a=e.config,n=e.appointmentData,r=e.setIsLoading,c=e.setError,o=e.addAppointments,l=e.property,s=e.onSave,u=e.isLoading,m=function(e){var t=e.property,a=e.appointmentData,n=e.config.questions,r=a.startDate,c=k()(r).format("MM/DD/YYYY"),o=q()(t,"PropertyData.FullAddress",""),i=q()(Ye.a,["user","attributes","email"],"");return Object(O.a)(Object(O.a)({},Ae(n)),{},{FNAME:o,EMAIL:i,repeat:!1,repeatType:Be,startDate:c,endDate:c})}({property:l,appointmentData:n,config:a}),p=function(){var e=Object(ne.a)(ae.a.mark((function e(i){var l,u,m,p;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r(!0),l=Pe({appointmentData:n,values:i,config:a}),e.next=5,he.createBookings({profileId:t,data:l});case 5:u=e.sent,m=u.bookings,p=u.errors,K()(p)||c(Re(p)),o(m),s(),r(!1),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),r(!1),c(e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}();return i.a.createElement(xe.a,{sx:{display:"flex",flexDirection:"column"}},i.a.createElement(Se.b,{initialValues:m,onSubmit:p},i.a.createElement(Se.a,null,i.a.createElement(xe.a,{sx:{mb:2}},i.a.createElement(F.a,{variant:"h4"},"Block available slots")),i.a.createElement(We,{appointmentData:n}),i.a.createElement(Ce.a,null),i.a.createElement(xe.a,{sx:{my:2}},i.a.createElement(Dt,null)),i.a.createElement(we.a,{type:"submit",color:"primary",disableElevation:!0,fullWidth:!0,variant:"contained",disabled:u},"Confirm Booking"))))}))),St=Object(y.a)({property:function(e){return q()(e,["calendar","property"])}}),Yt=Object(h.connect)(St)(Object(E.a)((function(e){var t=e.appointmentData,a=e.property,n=e.onSave,r=a?wt:bt;return o.createElement(r,{appointmentData:t,onSave:n})}))),Tt=["basicLayoutComponent","commandLayoutComponent","recurrenceLayoutComponent","isRecurrence","children"],Lt=Object(d.a)((function(e){return{layout:{background:e.palette.common.white},content:{padding:e.spacing(4)}}})),It=function(e){var t=e.basicLayoutComponent,a=e.commandLayoutComponent,n=e.recurrenceLayoutComponent,r=(e.isRecurrence,e.children),c=Object(N.a)(e,Tt),o=Lt();return i.a.createElement("div",Object.assign({className:o.layout},c),i.a.createElement(a,null),i.a.createElement("div",{className:o.content},i.a.createElement(t,null),i.a.createElement(n,null)),r)},Mt=function(e){var t=e.onCommitButtonClick,a=e.isSaving,n=e.setIsSaving;return Object(o.useEffect)((function(){a&&(t(),n(!1))}),[a]),i.a.createElement("div",null)},Bt=function(){var e=Object(o.useState)(!1),t=Object(De.a)(e,2),a=t[0],n=t[1],r=Object(J.k)(Yt,(function(){return{onSave:function(){return n(!0)}}})),c=Object(J.k)(Mt,(function(){return{isSaving:a,setIsSaving:n}}));return i.a.createElement(u.a,{layoutComponent:It,basicLayoutComponent:r,commandLayoutComponent:c})},Nt=Object(d.a)((function(e){return{container:{minHeight:"100px",fontFamily:e.typography.fontFamily.avenirLT},loading:{border:"1px solid #E0E0E0",backgroundColor:e.palette.common.white}}})),At=Object(y.a)({config:function(e){return p()(e,["calendar","config"])},isLoading:function(e){return p()(e,["calendar","isLoading"])},appointments:function(e){return p()(e,["calendar","appointments"])}});t.default=Object(h.connect)(At,void 0)(Object(E.a)((function(e){var t=e.config,a=e.profileId,n=e.isLoading,r=e.appointments,o=Nt();ye({profileId:a}),Ee({profileId:a}),ke();return K()(t)&&!n?i.a.createElement(i.a.Fragment,null):i.a.createElement(ee.a,{tag:"div",blocking:n,loader:i.a.createElement($.Loader,{active:!0,type:"ball-pulse",color:"rgba(231,28,99,1)"}),className:Object(b.a)(o.container,Object(c.a)({},o.loading,n))},i.a.createElement(l.a,{elevation:3},i.a.createElement(u.e,{data:r},i.a.createElement(s.r,null),i.a.createElement(u.h,{timeTableCellComponent:B,dayScaleCellComponent:g,cellDuration:p()(t,"times.slotLengthMinutes")||60}),i.a.createElement(s.k,{onCommitChanges:function(){}}),i.a.createElement(Q,null),i.a.createElement(u.g,null),i.a.createElement(u.d,null),i.a.createElement(u.f,null),i.a.createElement(u.c,{appointmentComponent:W}),i.a.createElement(u.b,{showCloseButton:!0,contentComponent:U}),i.a.createElement(Bt,null))))})))}}]);
//# sourceMappingURL=16.f3938e78.chunk.js.map