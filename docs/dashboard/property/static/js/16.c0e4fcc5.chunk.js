(this.webpackJsonpnilehome=this.webpackJsonpnilehome||[]).push([[16],{1602:function(e,t,a){"use strict";a.r(t);var n,r,c=a(80),o=a(0),i=a.n(o),l=a(409),s=a(1487),u=a(1461),m=a(19),p=a.n(m),d=a(1365),f=a(59),b=a(24),v=Object(d.a)((function(e){return{cell:{paddingTop:e.spacing(1)},today:{backgroundColor:Object(f.a)(e.palette.primary.main,.16)}}})),g=function(e){var t=v(),a=e.today;return o.createElement(u.h.DayScaleCell,Object.assign({},e,{className:Object(b.a)(t.cell,Object(c.a)({},t.today,a))}))},h=a(4),O=a(136),y=a(163),E=a(164),j=a(174),k=a.n(j),D=(a(1491),a(1)),x="Something went wrong",C="".concat("YYYY-MM-DD"," ").concat("HH:mm:ss"),w=function(e){var t=e.config,a=e.dateString,n=e.key,r=p()(t,n);if(!r)return"";var c=p()(t,"timeZone");return T("".concat(a," ").concat(r),c)},S=function(e){var t=e.dateString,a=e.config,n=function(e){return new Date(e).toLocaleString("en-us",{weekday:"short"}).toLowerCase()}(t),r=k()(t);if(function(e){return k()().diff(e,"hours")>0}(r))return!1;if(!function(e){var t=e.dateName,a=e.config;return p()(a,"".concat(t,"Active"))||!1}({dateName:n,config:a}))return!1;var c=r.format("YYYY-MM-DD");return!!function(e){var t=e.config,a=e.currentMoment,n=e.currentDate,r=e.dateName,c=w({config:t,dateString:n,key:"".concat(r,"Start")}),o=w({config:t,dateString:n,key:"".concat(r,"End")});return I({start:c,end:o,current:a})}({config:a,currentMoment:r,currentDate:c,dateName:n})&&!function(e){var t=e.config,a=e.currentMoment,n=e.currentDate,r=w({config:t,dateString:n,key:"breakStart"}),c=w({config:t,dateString:n,key:"breakEnd"});return I({start:r,end:c,current:a})}({config:a,currentMoment:r,currentDate:c})},Y=function(e){var t=e.startDate,a=e.endDate;return{displayDate:k()(t).format("dddd, MMMM DD, YYYY"),displayTime:"".concat(k()(t).format("hh:mm A")," - ").concat(k()(a).format("hh:mm A"))}},L=function(e){var t=e.services.find((function(e){return e.name.toLowerCase()===D.n}));return Boolean(t)},T=function(e,t){return t?k.a.tz(e,t).local().format(C):k()(e).format(C)},I=function(e){var t=e.start,a=e.end,n=e.current;if(!t||!a||!n)return!1;var r=k()(k()(t).format("HH:mm:ss"),"HH:mm:ss"),c=k()(k()(a).format("HH:mm:ss"),"HH:mm:ss"),o=k()(k()(n).format("HH:mm:ss"),"HH:mm:ss");return r.isAfter(c)&&(c.add(1,"days"),o.hour()<=12&&o.add(1,"days")),o.isSameOrAfter(r)&&o.isBefore(c)},M=Object(d.a)((function(e){return{disableCell:{background:"linear-gradient(-45deg,".concat(e.palette.action.disabledBackground," 10%,transparent 10%,transparent 50%,").concat(e.palette.action.disabledBackground," 50%,").concat(e.palette.action.disabledBackground," 60%,transparent 60%,transparent)"),backgroundSize:"8px 8px",pointerEvents:"none"}}})),N=Object(y.a)({timeConfig:function(e){return Object(h.a)(Object(h.a)({},p()(e,"calendar.config.times")),{},{timeZone:p()(e,"calendar.config.timeZone")})}}),B=Object(O.connect)(N,void 0)(Object(E.a)((function(e){var t=M(),a=e.startDate,n=e.timeConfig;return o.createElement(u.h.TimeTableCell,Object.assign({},e,{className:Object(b.a)(Object(c.a)({},t.disableCell,!S({dateString:a,config:n})))}))}))),A=a(276),q=a(190),H=a.n(q),F=a(242),P=["property","children"],R=Object(d.a)((function(e){return{appointment:{padding:e.spacing(.5,1),backgroundColor:e.palette.primary.main,color:e.palette.common.white,"&:hover":{backgroundColor:e.palette.primary.main}},busy:{backgroundColor:e.palette.common.lightGray,color:e.palette.primary.gray,"&:hover":{backgroundColor:e.palette.common.lightGray}},title:{overflow:"hidden",fontWeight:"bold",whiteSpace:"nowrap",textOverflow:"ellipsis"}}})),W=Object(y.a)({property:function(e){return H()(e,["calendar","property"])}}),V=Object(O.connect)(W)((function(e){var t=e.property,a=(e.children,Object(A.a)(e,P)),n=a.data,r=R(),i=!t,l=L(n),s=n.title,m=Y(n).displayTime;return o.createElement(u.c.Appointment,Object.assign({},a,{className:Object(b.a)(r.appointment,Object(c.a)({},r.busy,l))}),i&&L(n)?o.createElement("div",null,"Busy"):o.createElement("div",null,o.createElement(F.a,{variant:"subtitle1",classes:{root:r.title}},s),o.createElement(F.a,{variant:"subtitle1"},m)))})),z=a(1598),G=a(1599),U=Object(d.a)((function(e){return{wrapper:{padding:e.spacing(2),paddingTop:0},section:{marginBottom:e.spacing(1)}}})),Z=function(e){var t=e.appointmentData,a=U(),n=Y(t),r=n.displayDate,c=n.displayTime;return o.createElement(l.a,{className:a.wrapper},o.createElement(F.a,{variant:"h3",color:"primary",className:a.section},p()(t,"title","")),o.createElement("div",{className:a.section},o.createElement(F.a,{variant:"h5"},o.createElement(z.a,null)," ",r)),o.createElement("div",null,o.createElement(F.a,{variant:"h5"},o.createElement(G.a,null)," ",c)))},K=a(60),_=a.n(K),J=a(414),X=a(1464),Q={setStartOfWeek:J.i,setEndOfWeek:J.d},$=Object(O.connect)(void 0,Q)(Object(E.a)((function(e){var t=e.setStartOfWeek,a=e.setEndOfWeek;return i.a.createElement(X.f,{name:"IntegratedDates"},i.a.createElement(X.e,{name:"startViewDate",computed:function(e){var a=e.startViewDate;return t(a),a}}),i.a.createElement(X.e,{name:"endViewDate",computed:function(e){var t=e.endViewDate;return a(t),t}}))}))),ee=a(127),te=a(111),ae=a(10),ne=a.n(ae),re=a(28),ce=a(9),oe=a(12),ie=a(14),le=a(13),se=a(97),ue=a.n(se),me=a(417),pe=function(){function e(){Object(ce.a)(this,e),this.baseURL="".concat("https://api.youcanbook.me/v1","/").concat("dc7ded13-f988-4671-b5d1-142c6096066e","/"),this.cancelToken=null}return Object(oe.a)(e,[{key:"cancel",value:function(){null!==this.cancelToken&&this.cancelToken()}},{key:"axios",value:function(e){var t=e.method,a=e.baseURL,n=void 0===a?this.baseURL:a,r=e.url,c=e.data,o=e.params,i=e.headers,l=void 0===i?{}:i,s=e.needResHeaders,u=void 0!==s&&s,m=this,d=ue.a.CancelToken;return new Promise((function(e,a){var i={method:t,url:r,baseURL:n,timeout:3e4,params:o,data:c,headers:Object(h.a)(Object(h.a)({},l),{},{Authorization:me.c}),cancelToken:new d((function(e){m.cancelToken=e}))};ue.a.request(i).then((function(t){var a="object"===typeof t.data?t.data:JSON.parse(t.data);e(u?{data:a,headers:t.headers}:a)}),(function(e){var t=p()(e,["response","status"]),n=p()(e,["response","data","message"]),r=p()(e,["response","data","errors"]);a({status:t,message:n,errors:r})}))}))}}]),e}(),de=new(function(e){Object(ie.a)(a,e);var t=Object(le.a)(a);function a(){return Object(ce.a)(this,a),t.apply(this,arguments)}return Object(oe.a)(a,[{key:"getProfileById",value:function(e){var t=e.id,a=e.fields;return t?this.axios({method:"GET",url:"".concat(me.b.PROFILES,"/").concat(t),params:{fields:a}}):{}}}]),a}(pe)),fe=a(130),be=a(1550),ve=a.n(be),ge=function(e){var t=p()(e,["answers"],[]).filter((function(e){return"EMAIL"===e.code}))[0];return p()(t,"string","")},he=function(e){return!e.cancelled},Oe=function(e){return e.map((function(e){return function(e){var t=p()(e,"startsAt"),a=p()(e,"endsAt"),n=p()(e,"timeZone");return{title:ge(e),id:p()(e,"id"),startDate:T(t,n),endDate:T(a,n),services:p()(e,"services",[]),cancelled:p()(e,"cancelled")}}(e)})).filter(he)},ye=new(function(e){Object(ie.a)(a,e);var t=Object(le.a)(a);function a(){return Object(ce.a)(this,a),t.apply(this,arguments)}return Object(oe.a)(a,[{key:"createBooking",value:function(){var e=Object(re.a)(ne.a.mark((function e(t){var a,n,r;return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.profileId,n=t.data,e.next=3,this.axios({method:"POST",url:"".concat(me.b.PROFILES,"/").concat(a,"/").concat(me.b.BOOKINGS),params:{fields:me.a},data:Object(h.a)({},n)});case 3:return r=e.sent,e.abrupt("return",Oe([r]));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createBookings",value:function(){var e=Object(re.a)(ne.a.mark((function e(t){var a,n,r,c,o,i;return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.profileId,n=t.data,r=0,c=[],o=[];case 4:if(r===n.length){e.next=18;break}return e.prev=5,e.next=8,this.axios({method:"POST",url:"".concat(me.b.PROFILES,"/").concat(a,"/").concat(me.b.BOOKINGS),params:{fields:me.a},data:n[r]});case 8:i=e.sent,o.push(i),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),c.push(n[r]);case 15:r+=1,e.next=4;break;case 18:return e.abrupt("return",{bookings:Oe(o),errors:c});case 19:case"end":return e.stop()}}),e,this,[[5,12]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getBookings",value:function(){var e=Object(re.a)(ne.a.mark((function e(t){var a,n,r,c,o,i,l,s,u,m;return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.profileId,n=t.from,r=t.to,a){e.next=3;break}return e.abrupt("return",[]);case 3:c=!0,o="",i=[];case 6:if(!c){e.next=25;break}if(o){e.next=13;break}return e.next=10,this.axios({method:"GET",url:"".concat(me.b.PROFILES,"/").concat(a,"/").concat(me.b.BOOKINGS),params:{fields:me.a,jumpToDate:k()(n).format("YYYY-MM-DD")},needResHeaders:!0});case 10:e.t0=e.sent,e.next=16;break;case 13:return e.next=15,this.axios({method:"GET",url:o,needResHeaders:!0});case 15:e.t0=e.sent;case 16:l=e.t0,s=p()(l,["headers","link"],""),o=p()(ve()(s),["next","url"],""),u=p()(l,["data"]),i=[].concat(Object(fe.a)(i),Object(fe.a)(u)),m=p()(u,[u.length-1,"startsAt"],""),c=o&&k()(m).isBefore(r),e.next=6;break;case 25:return e.abrupt("return",Oe(i));case 26:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),a}(pe)),Ee=function(e){var t=e.profileId,a=Object(O.useDispatch)();Object(o.useEffect)((function(){return a(Object(J.g)(t)),Object(re.a)(ne.a.mark((function e(){var n;return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(Object(J.f)(!0)),e.prev=1,e.next=4,de.getProfileById({id:t,fields:"times,times.*,questions,questions.*,services, services.*,services.items.*,actions,actions.*,title,timeZone"});case 4:n=e.sent,a(Object(J.c)(n||{})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),a(Object(J.e)(e.t0));case 11:a(Object(J.f)(!1));case 12:case"end":return e.stop()}}),e,null,[[1,8]])})))(),function(){de.cancel()}}),[t])},je=function(e){var t=e.profileId,a=Object(O.useDispatch)(),n=Object(O.useSelector)((function(e){return p()(e,["calendar","startOfWeek"])})),r=Object(O.useSelector)((function(e){return p()(e,["calendar","endOfWeek"])}));Object(o.useEffect)((function(){return Object(re.a)(ne.a.mark((function e(){var c;return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,a(Object(J.f)(!0)),e.next=6,ye.getBookings({profileId:t,from:n,to:r});case 6:c=e.sent,a(Object(J.b)(c)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),a(Object(J.e)(e.t0));case 13:a(Object(J.f)(!1));case 14:case"end":return e.stop()}}),e,null,[[2,10]])})))(),function(){ye.cancel()}}),[r,t])},ke=a(39),De=function(){var e=Object(O.useSelector)((function(e){return p()(e,["calendar","error"])}));Object(o.useEffect)((function(){if(e){var t=(e||{}).message;t&&ke.toastr.error(x,t)}}),[e])},xe=a(62),Ce=a(1445),we=a(1424),Se=a(591),Ye=a(1457),Le=a(66),Te="SIMPLE",Ie="CHECKBOX",Me="MULTI_DROPDOWN",Ne=(n={},Object(c.a)(n,Te,""),Object(c.a)(n,Ie,!1),Object(c.a)(n,Me,""),n),Be="daily",Ae="weekly",qe=function(e){return e.reduce((function(e,t){var a=t.code,n=t.type;return Object(h.a)(Object(h.a)({},e),{},Object(c.a)({},a,Ne[n]))}),{appointmentType:void 0})},He=function(e,t){return e.map((function(e){var a=e.code;return{code:a,string:t[a]}})).filter((function(e){return e.string}))},Fe=function(e){var t=e.appointmentData,a=e.values,n=e.config,r=n.title,c=n.questions,o=a.FNAME,i=a.appointmentType,l=t.startDate;return{title:"".concat(o," and ").concat(r),startsAt:k()(l).format("YYYY-MM-DDTHH:mm:ss"),tentative:"NOT_USED",timeZone:k.a.tz.guess(),cancelled:!1,units:1,services:[{id:i.id,name:i.name}],answers:He(c,a)}},Pe=function(e){var t=e.appointmentData,a=e.values,n=e.config,r=n.questions,c=t.startDate,o=a.repeat,i=a.repeatType,l=a.startDate,s=a.endDate,u=function(e){return e.find((function(e){return"busy"===e.name.toLowerCase()}))}(H()(n,"services.items",[]));if(!o)return[{title:"busy",startsAt:k()(c).format("YYYY-MM-DDTHH:mm:ss"),tentative:"NOT_USED",timeZone:k.a.tz.guess(),cancelled:!1,units:1,services:[u],answers:He(r,a)}];var m=k()(c).format("HH:mm:ss"),p=k()(l),d=k()(s).diff(p,"day"),f=i===Ae?7:1;return Array.from(Array(Math.floor(d/f)+1),(function(e,t){return t*f})).map((function(e){var t=k()(l).add(e,"day");return{title:"busy",startsAt:"".concat(t.format("YYYY-MM-DD"),"T").concat(m),tentative:"NOT_USED",timeZone:k.a.tz.guess(),cancelled:!1,units:1,services:[u],answers:He(r,a)}}))},Re=function(e){var t=e.map((function(e){return e.startsAt})).join(", ");return{message:"Cannot book at dates: ".concat(t)}},We=Object(d.a)((function(e){return{wrapper:Object(h.a)(Object(h.a)({},e.typography.h4),{},{padding:e.spacing(2,0),backgroundColor:e.palette.background.gray,textAlign:"center"})}})),Ve=function(e){var t=e.appointmentData,a=t.startDate,n=t.endDate,r=We(),c=Y({startDate:a,endDate:n}),o=c.displayDate,l=c.displayTime;return i.a.createElement("div",{className:r.wrapper},i.a.createElement(F.a,{variant:"h4"},o),i.a.createElement(Ce.a,{sx:{mt:1}},i.a.createElement(F.a,{variant:"h3"},l)))},ze=a(1555),Ge=a.n(ze),Ue=a(1450),Ze=a(1441),Ke=Object(d.a)((function(e){return{group:{width:"100%",margin:e.spacing(1,0,2,0)},button:{padding:e.spacing(1.5,2),textTransform:"none"},buttonLabel:{width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center"},duration:{display:"flex",alignItems:"center"},selected:{"&&, &&:hover":{backgroundColor:e.palette.primary.main}}}})),_e=function(e){var t=e.appointmentTypes,a=Ke(),n=Object(Ye.c)(),r=n.values,c=n.setFieldValue,o=H()(r,"appointmentType.id")||"";return i.a.createElement(i.a.Fragment,null,i.a.createElement(F.a,{variant:"h4"},"Choose an appointment type"),i.a.createElement(Ue.a,{orientation:"vertical",value:o,exclusive:!0,onChange:function(e,a){var n=t.find((function(e){return e.id===a}));c("appointmentType",n)},classes:{root:a.group}},t.map((function(e){return i.a.createElement(Ze.a,{value:e.id,classes:{root:a.button,label:a.buttonLabel,selected:a.selected},key:e.id},i.a.createElement(F.a,{variant:"h5",color:"textPrimary"},e.name),i.a.createElement(F.a,{variant:"subtitle1",classes:{root:a.duration}},i.a.createElement(Ge.a,{fontSize:"small"}),i.a.createElement(Ce.a,{sx:{ml:.5,mt:.25}},function(e){var t=e.numberOfSlots,a=e.slotLengthMinutes;return"".concat(t*a," minutes")}(e))))}))))},Je=a(1595),Xe=a(1593),Qe=a(1594),$e=a(1616),et=Object(d.a)((function(e){return{textField:{marginTop:e.spacing(.5)},label:Object(h.a)({color:e.palette.primary.dark},e.typography.h4),input:Object(h.a)(Object(h.a)({},e.typography.h5),{},{padding:e.spacing(1,1.5)})}})),tt=function(e){var t=et(),a=e.name,n=e.variant,r=e.placeholder,c=void 0===r?"":r,o=e.label,l=e.value,s=e.required,u=e.onChange,m=e.classes,p=void 0===m?{}:m;return i.a.createElement(Xe.a,{required:s},i.a.createElement(Qe.a,{color:"secondary",className:t.label},o),i.a.createElement($e.a,{name:a,variant:n,placeholder:c,value:l,onChange:u,classes:{root:Object(b.a)(t.textField,p.textField)},InputProps:{classes:{input:Object(b.a)(t.input,p.input)}}}))},at=Object(d.a)((function(e){return{after:Object(h.a)({},e.typography.subtitle)}})),nt=a(1607),rt=a(1589),ct=Object(d.a)((function(e){return{wrapper:{"& .MuiOutlinedInput-notchedOutline>legend>span":{display:"none"}},label:{"&&":Object(h.a)({color:e.palette.primary.dark},e.typography.h4)},select:Object(h.a)(Object(h.a)({},e.typography.h5),{},{padding:e.spacing(1,1.5)}),item:Object(h.a)({},e.typography.h5)}})),ot=function(e){var t=ct(),a=e.name,n=e.value,r=e.onChange,c=e.label,o=e.variant,l=e.required,s=e.options,u=e.classes,m=void 0===u?{}:u;return i.a.createElement(Xe.a,{required:l,classes:{root:t.wrapper}},i.a.createElement(Qe.a,{className:t.label},c),i.a.createElement(nt.a,{name:a,classes:{root:Object(b.a)(t.select,m.select)},value:n,onChange:r,label:"",variant:o,MenuProps:{anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},getContentAnchorEl:null}},i.a.createElement(rt.a,{classes:{root:Object(b.a)(t.item,m.item)},value:""},i.a.createElement("em",null,"None")),s.map((function(e){return i.a.createElement(rt.a,{key:e,value:e,classes:{root:Object(b.a)(t.item,m.item)}},e)}))))},it=a(1597),lt=a(1611),st=Object(d.a)((function(e){return{label:Object(h.a)({},e.typography.h5),checkbox:{}}})),ut=function(e){var t=st(),a=e.name,n=e.required,r=e.checked,c=e.onChange,o=e.label,l=e.color,s=void 0===l?"primary":l,u=e.classes,m=void 0===u?{}:u;return i.a.createElement(Xe.a,{required:n},i.a.createElement(it.a,{classes:{label:Object(b.a)(t.label,m.label)},control:i.a.createElement(lt.a,{classes:{root:Object(b.a)(t.checkbox,m.checkbox)},checked:r,onChange:c,name:a,color:s}),label:o}))},mt=Object(d.a)((function(e){return{after:Object(h.a)({},e.typography.subtitle)}})),pt=(r={},Object(c.a)(r,Te,(function(e){var t=e.question,a=at(),n=t.code,r=t.before,c=t.after,o=t.required,l=Object(Ye.c)(),s=l.values,u=l.handleChange;return i.a.createElement(Ce.a,{sx:{display:"flex",flexDirection:"column",my:1}},i.a.createElement(tt,{name:n,variant:"outlined",placeholder:"",label:r,value:s[n],onChange:u,required:o}),Boolean(c)&&i.a.createElement(Je.a,{className:a.after},c))})),Object(c.a)(r,Ie,(function(e){var t=e.question,a=mt(),n=t.after,r=t.before,c=t.required,o=t.code,l=Object(Ye.c)(),s=l.values,u=l.handleChange;return i.a.createElement(Ce.a,{sx:{display:"flex",flexDirection:"column",my:1}},i.a.createElement(ut,{checked:s[o],onChange:u,name:o,color:"primary",label:r,required:c}),Boolean(n)&&i.a.createElement(Je.a,{className:a.after},n))})),Object(c.a)(r,Me,(function(e){var t=e.question,a=t.code,n=t.after,r=t.before,c=t.required,o=t.options,l=void 0===o?[]:o,s=Object(Ye.c)(),u=s.values,m=s.handleChange;return i.a.createElement(Ce.a,{sx:{display:"flex",flexDirection:"column",my:1}},i.a.createElement(ot,{name:a,value:u[a],onChange:m,label:r,variant:"outlined",required:c,options:l}),Boolean(n)&&i.a.createElement(Ce.a,{sx:{mt:1}},n))})),r),dt=function(e){var t=e.questions;return i.a.createElement(i.a.Fragment,null,t.map((function(e){var t=pt[e.type];return t?i.a.createElement(t,{key:e.code,question:e}):i.a.createElement(i.a.Fragment,null)})))},ft=Object(y.a)({profileId:function(e){return p()(e,"calendar.profileId")},config:function(e){return p()(e,"calendar.config")},isLoading:function(e){return p()(e,"calendar.isLoading")}}),bt={setIsLoading:J.f,setError:J.e,addAppointments:J.a},vt=Object(O.connect)(ft,bt)(Object(E.a)((function(e){var t=e.profileId,a=e.config,n=e.appointmentData,r=e.setIsLoading,c=e.setError,o=e.addAppointments,l=e.onSave,s=e.isLoading,u=p()(a,"questions",[]),m=p()(a,"services.items",[]).filter((function(e){return e.name!==D.n})),d=qe(u),f=function(){var e=Object(re.a)(ne.a.mark((function e(i){var s,u;return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r(!0),s=Fe({appointmentData:n,values:i,config:a}),e.next=5,ye.createBooking({profileId:t,data:s});case 5:u=e.sent,o(u),l(),r(!1),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),r(!1),c(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}();return i.a.createElement(Ce.a,{sx:{display:"flex",flexDirection:"column"}},i.a.createElement(Ye.b,{initialValues:d,onSubmit:f},i.a.createElement(Ye.a,null,i.a.createElement(_e,{appointmentTypes:m}),i.a.createElement(Ve,{appointmentData:n}),i.a.createElement(we.a,null),i.a.createElement(Ce.a,{sx:{mt:4}},i.a.createElement(dt,{questions:u})),i.a.createElement(Se.a,{type:"submit",color:"primary",disableElevation:!0,fullWidth:!0,variant:"contained",disabled:s},"Confirm Booking"))))}))),gt=a(1489),ht=a(1600),Ot=a(1416),yt=a(1617),Et=a(1608),jt=a(1421),kt=a(1456),Dt=a(1601),xt=function(){var e=Object(Ye.c)(),t=e.values,a=e.handleChange,n=e.setFieldValue,r=function(e){return function(t){n(e,k()(t).format("MM/DD/YYYY"))}};return i.a.createElement("div",null,i.a.createElement(it.a,{control:i.a.createElement(ht.a,{name:"repeat",checked:t.repeat,onChange:a,color:"primary"}),label:"Repeat"}),i.a.createElement(Ot.a,{in:t.repeat},i.a.createElement("div",null,i.a.createElement(yt.a,{name:"repeatType",value:t.repeatType,onChange:a},i.a.createElement(it.a,{value:"daily",control:i.a.createElement(Et.a,{color:"primary"}),label:"Daily"}),i.a.createElement(it.a,{value:"weekly",control:i.a.createElement(Et.a,{color:"primary"}),label:"Weekly"}))),i.a.createElement(jt.a,{container:!0,justifyContent:"space-between"},i.a.createElement(kt.a,{utils:gt.a},i.a.createElement(Dt.a,{disableToolbar:!0,inputVariant:"outlined",format:"MM/DD/YYYY",margin:"normal",label:"Start date",value:new Date(t.startDate),onChange:r("startDate")}),i.a.createElement(Dt.a,{disableToolbar:!0,inputVariant:"outlined",format:"MM/DD/YYYY",margin:"normal",label:"End date",value:new Date(t.endDate),onChange:r("endDate")})))))},Ct=Object(y.a)({profileId:function(e){return p()(e,"calendar.profileId")},config:function(e){return p()(e,"calendar.config")},property:function(e){return p()(e,"calendar.property")},isLoading:function(e){return p()(e,"calendar.isLoading")}}),wt={setIsLoading:J.f,setError:J.e,addAppointments:J.a},St=Object(O.connect)(Ct,wt)(Object(E.a)((function(e){var t=e.profileId,a=e.config,n=e.appointmentData,r=e.setIsLoading,c=e.setError,o=e.addAppointments,l=e.property,s=e.onSave,u=e.isLoading,m=function(e){var t=e.property,a=e.appointmentData,n=e.config.questions,r=a.startDate,c=k()(r).format("MM/DD/YYYY"),o=H()(t,"PropertyData.FullAddress",""),i=H()(Le.a,["user","attributes","email"],"");return Object(h.a)(Object(h.a)({},qe(n)),{},{FNAME:o,EMAIL:i,repeat:!1,repeatType:Be,startDate:c,endDate:c})}({property:l,appointmentData:n,config:a}),p=function(){var e=Object(re.a)(ne.a.mark((function e(i){var l,u,m,p;return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r(!0),l=Pe({appointmentData:n,values:i,config:a}),e.next=5,ye.createBookings({profileId:t,data:l});case 5:u=e.sent,m=u.bookings,p=u.errors,_()(p)||c(Re(p)),o(m),s(),r(!1),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),r(!1),c(e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}();return i.a.createElement(Ce.a,{sx:{display:"flex",flexDirection:"column"}},i.a.createElement(Ye.b,{initialValues:m,onSubmit:p},i.a.createElement(Ye.a,null,i.a.createElement(Ce.a,{sx:{mb:2}},i.a.createElement(F.a,{variant:"h4"},"Block available slots")),i.a.createElement(Ve,{appointmentData:n}),i.a.createElement(we.a,null),i.a.createElement(Ce.a,{sx:{my:2}},i.a.createElement(xt,null)),i.a.createElement(Se.a,{type:"submit",color:"primary",disableElevation:!0,fullWidth:!0,variant:"contained",disabled:u},"Confirm Booking"))))}))),Yt=Object(y.a)({property:function(e){return H()(e,["calendar","property"])}}),Lt=Object(O.connect)(Yt)(Object(E.a)((function(e){var t=e.appointmentData,a=e.property,n=e.onSave,r=a?St:vt;return o.createElement(r,{appointmentData:t,onSave:n})}))),Tt=["basicLayoutComponent","commandLayoutComponent","recurrenceLayoutComponent","isRecurrence","children"],It=Object(d.a)((function(e){return{layout:{background:e.palette.common.white},content:{padding:e.spacing(4)}}})),Mt=function(e){var t=e.basicLayoutComponent,a=e.commandLayoutComponent,n=e.recurrenceLayoutComponent,r=(e.isRecurrence,e.children),c=Object(A.a)(e,Tt),o=It();return i.a.createElement("div",Object.assign({className:o.layout},c),i.a.createElement(a,null),i.a.createElement("div",{className:o.content},i.a.createElement(t,null),i.a.createElement(n,null)),r)},Nt=function(e){var t=e.onCommitButtonClick,a=e.isSaving,n=e.setIsSaving;return Object(o.useEffect)((function(){a&&(t(),n(!1))}),[a]),i.a.createElement("div",null)},Bt=function(){var e=Object(o.useState)(!1),t=Object(xe.a)(e,2),a=t[0],n=t[1],r=Object(X.k)(Lt,(function(){return{onSave:function(){return n(!0)}}})),c=Object(X.k)(Nt,(function(){return{isSaving:a,setIsSaving:n}}));return i.a.createElement(u.a,{layoutComponent:Mt,basicLayoutComponent:r,commandLayoutComponent:c})},At=Object(d.a)((function(e){return{container:{minHeight:"100px",fontFamily:e.typography.fontFamily.avenirLT},loading:{border:"1px solid #E0E0E0",backgroundColor:e.palette.common.white}}})),qt=Object(y.a)({config:function(e){return p()(e,["calendar","config"])},isLoading:function(e){return p()(e,["calendar","isLoading"])},appointments:function(e){return p()(e,["calendar","appointments"])}});t.default=Object(O.connect)(qt,void 0)(Object(E.a)((function(e){var t=e.config,a=e.profileId,n=e.isLoading,r=e.appointments,o=At();Ee({profileId:a}),je({profileId:a}),De();return _()(t)&&!n?i.a.createElement(i.a.Fragment,null):i.a.createElement(te.a,{tag:"div",blocking:n,loader:i.a.createElement(ee.Loader,{active:!0,type:"ball-pulse",color:"rgba(231,28,99,1)"}),className:Object(b.a)(o.container,Object(c.a)({},o.loading,n))},i.a.createElement(l.a,{elevation:3},i.a.createElement(u.e,{data:r},i.a.createElement(s.r,null),i.a.createElement(u.h,{timeTableCellComponent:B,dayScaleCellComponent:g,cellDuration:p()(t,"times.slotLengthMinutes")||60}),i.a.createElement(s.k,{onCommitChanges:function(){}}),i.a.createElement($,null),i.a.createElement(u.g,null),i.a.createElement(u.d,null),i.a.createElement(u.f,null),i.a.createElement(u.c,{appointmentComponent:V}),i.a.createElement(u.b,{showCloseButton:!0,contentComponent:Z}),i.a.createElement(Bt,null))))})))}}]);
//# sourceMappingURL=16.c0e4fcc5.chunk.js.map