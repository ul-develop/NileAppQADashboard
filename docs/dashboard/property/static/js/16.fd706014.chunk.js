(this.webpackJsonpnilehome=this.webpackJsonpnilehome||[]).push([[16],{1603:function(e,t,a){"use strict";a.r(t);var n,r,c=a(82),o=a(0),i=a.n(o),l=a(405),s=a(1490),u=a(1460),m=a(21),p=a.n(m),d=a(1359),f=a(60),b=a(24),v=Object(d.a)((function(e){return{cell:{paddingTop:e.spacing(1)},today:{backgroundColor:Object(f.a)(e.palette.primary.main,.16)}}})),g=function(e){var t=v(),a=e.today;return o.createElement(u.h.DayScaleCell,Object.assign({},e,{className:Object(b.a)(t.cell,Object(c.a)({},t.today,a))}))},h=a(135),O=a(164),y=a(165),E=a(173),j=a.n(E),k=a(1),D="Something went wrong",x="".concat("MM-DD-YYYY"," HH:mm:ss"),C=function(e){var t=e.config,a=e.dateString,n=e.key,r=p()(t,n)||"";return j()("".concat(a," ").concat(r),x)},S=function(e){var t=e.dateString,a=e.config,n=function(e){return new Date(e).toLocaleString("en-us",{weekday:"short"}).toLowerCase()}(t),r=j()(t);if(function(e){return j()().isSame(e,"day")}(r))return!1;if(function(e){return j()().diff(e,"hours")>0}(r))return!1;if(!function(e){var t=e.dateName,a=e.config;return p()(a,"".concat(t,"Active"))||!1}({dateName:n,config:a}))return!1;var c=r.format("MM-DD-YYYY");return!!function(e){var t=e.config,a=e.currentMoment,n=e.currentDate,r=e.dateName,c=C({config:t,dateString:n,key:"".concat(r,"Start")}),o=C({config:t,dateString:n,key:"".concat(r,"End")});return a.isSameOrAfter(c)&&a.isSameOrBefore(o)}({config:a,currentMoment:r,currentDate:c,dateName:n})&&!function(e){var t=e.config,a=e.currentMoment,n=e.currentDate,r=C({config:t,dateString:n,key:"breakStart"}),c=C({config:t,dateString:n,key:"breakEnd"});return a.isSameOrAfter(r)&&a.isSameOrBefore(c)}({config:a,currentMoment:r,currentDate:c})},w=function(e){var t=e.startDate,a=e.endDate;return{displayDate:j()(t).format("dddd, MMMM DD, YYYY"),displayTime:"".concat(j()(t).format("hh:mm A")," - ").concat(j()(a).format("hh:mm A"))}},Y=function(e){var t=e.services.find((function(e){return e.name.toLowerCase()===k.n}));return Boolean(t)},L=Object(d.a)((function(e){return{disableCell:{background:"linear-gradient(-45deg,".concat(e.palette.action.disabledBackground," 10%,transparent 10%,transparent 50%,").concat(e.palette.action.disabledBackground," 50%,").concat(e.palette.action.disabledBackground," 60%,transparent 60%,transparent)"),backgroundSize:"8px 8px",pointerEvents:"none"}}})),M=Object(O.a)({timeConfig:function(e){return p()(e,["calendar","config","times"])}}),T=Object(h.connect)(M,void 0)(Object(y.a)((function(e){var t=L(),a=e.startDate,n=e.timeConfig;return o.createElement(u.h.TimeTableCell,Object.assign({},e,{className:Object(b.a)(Object(c.a)({},t.disableCell,!S({dateString:a,config:n})))}))}))),I=a(272),A=["children"],N=Object(d.a)((function(e){return{appointment:{backgroundColor:e.palette.primary.main,"&:hover":{backgroundColor:e.palette.primary.main}},busy:{backgroundColor:e.palette.primary.gray,"&:hover":{backgroundColor:e.palette.primary.gray}}}})),B=function(e){var t=e.children,a=Object(I.a)(e,A),n=a.data,r=N();return o.createElement(u.c.Appointment,Object.assign({},a,{className:Object(b.a)(r.appointment,Object(c.a)({},r.busy,Y(n)))}),t)},q=a(242),F=a(1599),H=a(1600),P=Object(d.a)((function(e){return{wrapper:{padding:e.spacing(2),paddingTop:0},section:{marginBottom:e.spacing(1)}}})),R=function(e){var t=e.appointmentData,a=P(),n=w(t),r=n.displayDate,c=n.displayTime;return o.createElement(l.a,{className:a.wrapper},o.createElement(q.a,{variant:"h3",color:"primary",className:a.section},p()(t,"title","")),o.createElement("div",{className:a.section},o.createElement(q.a,{variant:"h5"},o.createElement(F.a,null)," ",r)),o.createElement("div",null,o.createElement(q.a,{variant:"h5"},o.createElement(H.a,null)," ",c)))},V=a(61),W=a.n(V),_=a(410),U=a(1464),G={setStartOfWeek:_.i,setEndOfWeek:_.d},z=Object(h.connect)(void 0,G)(Object(y.a)((function(e){var t=e.setStartOfWeek,a=e.setEndOfWeek;return i.a.createElement(U.f,{name:"IntegratedDates"},i.a.createElement(U.e,{name:"startViewDate",computed:function(e){var a=e.startViewDate;return t(a),a}}),i.a.createElement(U.e,{name:"endViewDate",computed:function(e){var t=e.endViewDate;return a(t),t}}))}))),K=a(127),J=a(111),Z=a(10),X=a.n(Z),Q=a(28),$=a(9),ee=a(11),te=a(13),ae=a(12),ne=a(4),re=a(97),ce=a.n(re),oe=a(413),ie=function(){function e(){Object($.a)(this,e),this.baseURL="".concat("https://api.youcanbook.me/v1","/").concat("61dd0812-4dfe-4a42-ade9-c3565ec2a9a6","/"),this.cancelToken=null}return Object(ee.a)(e,[{key:"cancel",value:function(){null!==this.cancelToken&&this.cancelToken()}},{key:"axios",value:function(e){var t=e.method,a=e.baseURL,n=void 0===a?this.baseURL:a,r=e.url,c=e.data,o=e.params,i=e.headers,l=void 0===i?{}:i,s=e.needResHeaders,u=void 0!==s&&s,m=this,d=ce.a.CancelToken;return new Promise((function(e,a){var i={method:t,url:r,baseURL:n,timeout:3e4,params:o,data:c,headers:Object(ne.a)(Object(ne.a)({},l),{},{Authorization:oe.c}),cancelToken:new d((function(e){m.cancelToken=e}))};ce.a.request(i).then((function(t){var a="object"===typeof t.data?t.data:JSON.parse(t.data);e(u?{data:a,headers:t.headers}:a)}),(function(e){var t=p()(e,["response","status"]),n=p()(e,["response","data","message"]),r=p()(e,["response","data","errors"]);a({status:t,message:n,errors:r})}))}))}}]),e}(),le=new(function(e){Object(te.a)(a,e);var t=Object(ae.a)(a);function a(){return Object($.a)(this,a),t.apply(this,arguments)}return Object(ee.a)(a,[{key:"getProfileById",value:function(e){var t=e.id,a=e.fields;return t?this.axios({method:"GET",url:"".concat(oe.b.PROFILES,"/").concat(t),params:{fields:a}}):{}}}]),a}(ie)),se=a(129),ue=a(1551),me=a.n(ue),pe=function(e){Object(te.a)(a,e);var t=Object(ae.a)(a);function a(){return Object($.a)(this,a),t.apply(this,arguments)}return Object(ee.a)(a,[{key:"createBooking",value:function(){var e=Object(Q.a)(X.a.mark((function e(t){var a,n,r;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.profileId,n=t.data,r=this.axios({method:"POST",url:"".concat(oe.b.PROFILES,"/").concat(a,"/").concat(oe.b.BOOKINGS),params:{fields:oe.a},data:Object(ne.a)({},n)}),e.abrupt("return",fe([r]));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createBookings",value:function(){var e=Object(Q.a)(X.a.mark((function e(t){var a,n,r,c,o,i;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.profileId,n=t.data,r=0,c=[],o=[];case 4:if(r===n.length){e.next=18;break}return e.prev=5,e.next=8,this.axios({method:"POST",url:"".concat(oe.b.PROFILES,"/").concat(a,"/").concat(oe.b.BOOKINGS),params:{fields:oe.a},data:n[r]});case 8:i=e.sent,o.push(i),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),c.push(n[r]);case 15:r+=1,e.next=4;break;case 18:return e.abrupt("return",{bookings:fe(o),errors:c});case 19:case"end":return e.stop()}}),e,this,[[5,12]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getBookings",value:function(){var e=Object(Q.a)(X.a.mark((function e(t){var a,n,r,c,o,i,l,s,u,m;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.profileId,n=t.from,r=t.to,a){e.next=3;break}return e.abrupt("return",[]);case 3:c=!0,o="",i=[];case 6:if(!c){e.next=25;break}if(o){e.next=13;break}return e.next=10,this.axios({method:"GET",url:"".concat(oe.b.PROFILES,"/").concat(a,"/").concat(oe.b.BOOKINGS),params:{fields:oe.a,jumpToDate:j()(n).format("YYYY-MM-DD")},needResHeaders:!0});case 10:e.t0=e.sent,e.next=16;break;case 13:return e.next=15,this.axios({method:"GET",url:o,needResHeaders:!0});case 15:e.t0=e.sent;case 16:l=e.t0,s=p()(l,["headers","link"],""),o=p()(me()(s),["next","url"],""),u=p()(l,["data"]),i=[].concat(Object(se.a)(i),Object(se.a)(u)),m=p()(u,[u.length-1,"startsAt"],""),c=o&&j()(m).isBefore(r),e.next=6;break;case 25:return e.abrupt("return",fe(i));case 26:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),a}(ie),de=function(e){var t=p()(e,["answers"],[]).filter((function(e){return"EMAIL"===e.code}))[0];return p()(t,"string","")},fe=function(e){return e.map((function(e){return{title:de(e),id:p()(e,"id"),startDate:p()(e,"startsAt"),endDate:p()(e,"endsAt"),services:p()(e,"services",[]),cancelled:p()(e,"cancelled")}}))},be=new pe,ve=function(e){var t=e.profileId,a=Object(h.useDispatch)();Object(o.useEffect)((function(){return a(Object(_.g)(t)),Object(Q.a)(X.a.mark((function e(){var n;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(Object(_.f)(!0)),e.prev=1,e.next=4,le.getProfileById({id:t,fields:"times,times.*,questions,questions.*,services, services.*,services.items.*,actions,actions.*,title"});case 4:n=e.sent,a(Object(_.c)(n||{})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),a(Object(_.e)(e.t0));case 11:a(Object(_.f)(!1));case 12:case"end":return e.stop()}}),e,null,[[1,8]])})))(),function(){le.cancel()}}),[])},ge=function(e){var t=e.profileId,a=Object(h.useDispatch)(),n=Object(h.useSelector)((function(e){return p()(e,["calendar","startOfWeek"])})),r=Object(h.useSelector)((function(e){return p()(e,["calendar","endOfWeek"])}));Object(o.useEffect)((function(){return Object(Q.a)(X.a.mark((function e(){var c,o;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,a(Object(_.f)(!0)),e.next=6,be.getBookings({profileId:t,from:n,to:r});case 6:c=e.sent,o=c.filter((function(e){return!e.cancelled})),a(Object(_.b)(o)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),a(Object(_.e)(e.t0));case 14:a(Object(_.f)(!1));case 15:case"end":return e.stop()}}),e,null,[[2,11]])})))(),function(){be.cancel()}}),[r])},he=a(39),Oe=function(){var e=Object(h.useSelector)((function(e){return p()(e,["calendar","error"])}));Object(o.useEffect)((function(){if(e){var t=(e||{}).message;t&&he.toastr.error(D,t)}}),[e])},ye=a(63),Ee=a(1439),je=a(1418),ke=a(585),De=a(1452),xe=a(66),Ce="SIMPLE",Se="CHECKBOX",we="MULTI_DROPDOWN",Ye=a(70),Le=a.n(Ye),Me=(n={},Object(c.a)(n,Ce,""),Object(c.a)(n,Se,!1),Object(c.a)(n,we,""),n),Te="daily",Ie="weekly",Ae=function(e){return e.reduce((function(e,t){var a=t.code,n=t.type;return Object(ne.a)(Object(ne.a)({},e),{},Object(c.a)({},a,Me[n]))}),{appointmentType:void 0})},Ne=function(e,t){return e.map((function(e){var a=e.code;return{code:a,string:t[a]}}))},Be=function(e){var t=e.appointmentData,a=e.values,n=e.config,r=n.title,c=n.questions,o=a.FNAME,i=a.appointmentType,l=t.startDate;return{title:"".concat(o," and ").concat(r),startsAt:j()(l).format("YYYY-MM-DDTHH:mm:ss"),tentative:"NOT_USED",timeZone:"Asia/Ho_Chi_Minh",cancelled:!1,units:1,services:[{id:i.id,name:i.name}],answers:Ne(c,a)}},qe=function(e){var t=e.appointmentData,a=e.values,n=e.config,r=n.questions,c=t.startDate,o=a.repeat,i=a.repeatType,l=a.startDate,s=a.endDate,u=function(e){return e.find((function(e){return"busy"===e.name}))}(Le()(n,"services.items",[]));if(!o)return[{title:"busy",startsAt:j()(c).format("YYYY-MM-DDTHH:mm:ss"),tentative:"NOT_USED",timeZone:"Asia/Ho_Chi_Minh",cancelled:!1,units:1,services:[u],answers:Ne(r,a)}];var m=j()(c).format("HH:mm:ss"),p=j()(l),d=j()(s).diff(p,"day"),f=i===Ie?7:1;return Array.from(Array(Math.floor(d/f)+1),(function(e,t){return t*f})).map((function(e){var t=j()(l).add(e,"day");return{title:"busy",startsAt:"".concat(t.format("YYYY-MM-DD"),"T").concat(m),tentative:"NOT_USED",timeZone:"Asia/Ho_Chi_Minh",cancelled:!1,units:1,services:[u],answers:Ne(r,a)}}))},Fe=function(e){var t=e.map((function(e){return e.startsAt})).join(", ");return{message:"Cannot book at dates: ".concat(t)}},He=Object(d.a)((function(e){return{wrapper:Object(ne.a)(Object(ne.a)({},e.typography.h4),{},{padding:e.spacing(2,0),backgroundColor:e.palette.background.gray,textAlign:"center"})}})),Pe=function(e){var t=e.appointmentData,a=t.startDate,n=t.endDate,r=He(),c=w({startDate:a,endDate:n}),o=c.displayDate,l=c.displayTime;return i.a.createElement("div",{className:r.wrapper},i.a.createElement(q.a,{variant:"h4"},o),i.a.createElement(Ee.a,{sx:{mt:1}},i.a.createElement(q.a,{variant:"h3"},l)))},Re=a(1556),Ve=a.n(Re),We=a(1444),_e=a(1435),Ue=Object(d.a)((function(e){return{group:{width:"100%",margin:e.spacing(1,0,2,0)},button:{padding:e.spacing(1.5,2),textTransform:"none"},buttonLabel:{width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center"},duration:{display:"flex",alignItems:"center"},selected:{"&&, &&:hover":{backgroundColor:e.palette.primary.main}}}})),Ge=function(e){var t=e.appointmentTypes,a=Ue(),n=Object(De.c)(),r=n.values,c=n.setFieldValue,o=Le()(r,"appointmentType.id")||"";return i.a.createElement(i.a.Fragment,null,i.a.createElement(q.a,{variant:"h4"},"Choose an appointment type"),i.a.createElement(We.a,{orientation:"vertical",value:o,exclusive:!0,onChange:function(e,a){var n=t.find((function(e){return e.id===a}));c("appointmentType",n)},classes:{root:a.group}},t.map((function(e){return i.a.createElement(_e.a,{value:e.id,classes:{root:a.button,label:a.buttonLabel,selected:a.selected},key:e.id},i.a.createElement(q.a,{variant:"h5",color:"textPrimary"},e.name),i.a.createElement(q.a,{variant:"subtitle1",classes:{root:a.duration}},i.a.createElement(Ve.a,{fontSize:"small"}),i.a.createElement(Ee.a,{sx:{ml:.5,mt:.25}},function(e){var t=e.numberOfSlots,a=e.slotLengthMinutes;return"".concat(t*a," minutes")}(e))))}))))},ze=a(1596),Ke=a(1594),Je=a(1595),Ze=a(1617),Xe=Object(d.a)((function(e){return{textField:{marginTop:e.spacing(.5)},label:Object(ne.a)({color:e.palette.primary.dark},e.typography.h4),input:Object(ne.a)(Object(ne.a)({},e.typography.h5),{},{padding:e.spacing(1,1.5)})}})),Qe=function(e){var t=Xe(),a=e.name,n=e.variant,r=e.placeholder,c=void 0===r?"":r,o=e.label,l=e.value,s=e.required,u=e.onChange,m=e.classes,p=void 0===m?{}:m;return i.a.createElement(Ke.a,{required:s},i.a.createElement(Je.a,{color:"secondary",className:t.label},o),i.a.createElement(Ze.a,{name:a,variant:n,placeholder:c,value:l,onChange:u,classes:{root:Object(b.a)(t.textField,p.textField)},InputProps:{classes:{input:Object(b.a)(t.input,p.input)}}}))},$e=Object(d.a)((function(e){return{after:Object(ne.a)({},e.typography.subtitle)}})),et=a(1608),tt=a(1590),at=Object(d.a)((function(e){return{wrapper:{"& .MuiOutlinedInput-notchedOutline>legend>span":{display:"none"}},label:{"&&":Object(ne.a)({color:e.palette.primary.dark},e.typography.h4)},select:Object(ne.a)(Object(ne.a)({},e.typography.h5),{},{padding:e.spacing(1,1.5)}),item:Object(ne.a)({},e.typography.h5)}})),nt=function(e){var t=at(),a=e.name,n=e.value,r=e.onChange,c=e.label,o=e.variant,l=e.required,s=e.options,u=e.classes,m=void 0===u?{}:u;return i.a.createElement(Ke.a,{required:l,classes:{root:t.wrapper}},i.a.createElement(Je.a,{className:t.label},c),i.a.createElement(et.a,{name:a,classes:{root:Object(b.a)(t.select,m.select)},value:n,onChange:r,label:"",variant:o,MenuProps:{anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},getContentAnchorEl:null}},i.a.createElement(tt.a,{classes:{root:Object(b.a)(t.item,m.item)},value:""},i.a.createElement("em",null,"None")),s.map((function(e){return i.a.createElement(tt.a,{key:e,value:e,classes:{root:Object(b.a)(t.item,m.item)}},e)}))))},rt=a(1598),ct=a(1612),ot=Object(d.a)((function(e){return{label:Object(ne.a)({},e.typography.h5),checkbox:{}}})),it=function(e){var t=ot(),a=e.name,n=e.required,r=e.checked,c=e.onChange,o=e.label,l=e.color,s=void 0===l?"primary":l,u=e.classes,m=void 0===u?{}:u;return i.a.createElement(Ke.a,{required:n},i.a.createElement(rt.a,{classes:{label:Object(b.a)(t.label,m.label)},control:i.a.createElement(ct.a,{classes:{root:Object(b.a)(t.checkbox,m.checkbox)},checked:r,onChange:c,name:a,color:s}),label:o}))},lt=Object(d.a)((function(e){return{after:Object(ne.a)({},e.typography.subtitle)}})),st=(r={},Object(c.a)(r,Ce,(function(e){var t=e.question,a=$e(),n=t.code,r=t.before,c=t.after,o=t.required,l=Object(De.c)(),s=l.values,u=l.handleChange;return i.a.createElement(Ee.a,{sx:{display:"flex",flexDirection:"column",my:1}},i.a.createElement(Qe,{name:n,variant:"outlined",placeholder:"",label:r,value:s[n],onChange:u,required:o}),Boolean(c)&&i.a.createElement(ze.a,{className:a.after},c))})),Object(c.a)(r,Se,(function(e){var t=e.question,a=lt(),n=t.after,r=t.before,c=t.required,o=t.code,l=Object(De.c)(),s=l.values,u=l.handleChange;return i.a.createElement(Ee.a,{sx:{display:"flex",flexDirection:"column",my:1}},i.a.createElement(it,{checked:s[o],onChange:u,name:o,color:"primary",label:r,required:c}),Boolean(n)&&i.a.createElement(ze.a,{className:a.after},n))})),Object(c.a)(r,we,(function(e){var t=e.question,a=t.code,n=t.after,r=t.before,c=t.required,o=t.options,l=void 0===o?[]:o,s=Object(De.c)(),u=s.values,m=s.handleChange;return i.a.createElement(Ee.a,{sx:{display:"flex",flexDirection:"column",my:1}},i.a.createElement(nt,{name:a,value:u[a],onChange:m,label:r,variant:"outlined",required:c,options:l}),Boolean(n)&&i.a.createElement(Ee.a,{sx:{mt:1}},n))})),r),ut=function(e){var t=e.questions;return i.a.createElement(i.a.Fragment,null,t.map((function(e){var t=st[e.type];return i.a.createElement(t,{key:e.code,question:e})})))},mt=Object(O.a)({profileId:function(e){return p()(e,"calendar.profileId")},config:function(e){return p()(e,"calendar.config")},isLoading:function(e){return p()(e,"calendar.isLoading")}}),pt={setIsLoading:_.f,setError:_.e,addAppointments:_.a},dt=Object(h.connect)(mt,pt)(Object(y.a)((function(e){var t=e.profileId,a=e.config,n=e.appointmentData,r=e.setIsLoading,c=e.setError,o=e.addAppointments,l=e.onSave,s=e.isLoading,u=p()(a,"questions",[]),m=p()(a,"services.items",[]).filter((function(e){return e.name!==k.n})),d=Ae(u),f=function(){var e=Object(Q.a)(X.a.mark((function e(i){var s,u;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r(!0),s=Be({appointmentData:n,values:i,config:a}),e.next=5,be.createBooking({profileId:t,data:s});case 5:u=e.sent,o(u),l(),r(!1),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),r(!1),c(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}();return i.a.createElement(Ee.a,{sx:{display:"flex",flexDirection:"column"}},i.a.createElement(De.b,{initialValues:d,onSubmit:f},i.a.createElement(De.a,null,i.a.createElement(Ge,{appointmentTypes:m}),i.a.createElement(Pe,{appointmentData:n}),i.a.createElement(je.a,null),i.a.createElement(Ee.a,{sx:{mt:4}},i.a.createElement(ut,{questions:u})),i.a.createElement(ke.a,{type:"submit",color:"primary",disableElevation:!0,fullWidth:!0,variant:"contained",disabled:s},"Confirm Booking"))))}))),ft=a(1492),bt=a(1601),vt=a(1410),gt=a(1618),ht=a(1609),Ot=a(1415),yt=a(1451),Et=a(1602),jt=function(){var e=Object(De.c)(),t=e.values,a=e.handleChange,n=e.setFieldValue,r=function(e){return function(t){n(e,j()(t).format("MM/DD/YYYY"))}};return i.a.createElement("div",null,i.a.createElement(rt.a,{control:i.a.createElement(bt.a,{name:"repeat",checked:t.repeat,onChange:a,color:"primary"}),label:"Repeat"}),i.a.createElement(vt.a,{in:t.repeat},i.a.createElement("div",null,i.a.createElement(gt.a,{name:"repeatType",value:t.repeatType,onChange:a},i.a.createElement(rt.a,{value:"daily",control:i.a.createElement(ht.a,{color:"primary"}),label:"Daily"}),i.a.createElement(rt.a,{value:"weekly",control:i.a.createElement(ht.a,{color:"primary"}),label:"Weekly"}))),i.a.createElement(Ot.a,{container:!0,justifyContent:"space-between"},i.a.createElement(yt.a,{utils:ft.a},i.a.createElement(Et.a,{disableToolbar:!0,inputVariant:"outlined",format:"MM/DD/YYYY",margin:"normal",label:"Start date",value:new Date(t.startDate),onChange:r("startDate")}),i.a.createElement(Et.a,{disableToolbar:!0,inputVariant:"outlined",format:"MM/DD/YYYY",margin:"normal",label:"End date",value:new Date(t.endDate),onChange:r("endDate")})))))},kt=Object(O.a)({profileId:function(e){return p()(e,"calendar.profileId")},config:function(e){return p()(e,"calendar.config")},property:function(e){return p()(e,"calendar.property")},isLoading:function(e){return p()(e,"calendar.isLoading")}}),Dt={setIsLoading:_.f,setError:_.e,addAppointments:_.a},xt=Object(h.connect)(kt,Dt)(Object(y.a)((function(e){var t=e.profileId,a=e.config,n=e.appointmentData,r=e.setIsLoading,c=e.setError,o=e.addAppointments,l=e.property,s=e.onSave,u=e.isLoading,m=function(e){var t=e.property,a=e.appointmentData,n=e.config.questions,r=a.startDate,c=j()(r).format("MM/DD/YYYY"),o=Le()(t,"PropertyData.FullAddress",""),i=Le()(xe.a,["user","attributes","email"],"");return Object(ne.a)(Object(ne.a)({},Ae(n)),{},{FNAME:o,EMAIL:i,repeat:!1,repeatType:Te,startDate:c,endDate:c})}({property:l,appointmentData:n,config:a}),p=function(){var e=Object(Q.a)(X.a.mark((function e(i){var l,u,m,p;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r(!0),l=qe({appointmentData:n,values:i,config:a}),e.next=5,be.createBookings({profileId:t,data:l});case 5:u=e.sent,m=u.bookings,p=u.errors,W()(p)||c(Fe(p)),o(m),s(),r(!1),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),r(!1),c(e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}();return i.a.createElement(Ee.a,{sx:{display:"flex",flexDirection:"column"}},i.a.createElement(De.b,{initialValues:m,onSubmit:p},i.a.createElement(De.a,null,i.a.createElement(Ee.a,{sx:{mb:2}},i.a.createElement(q.a,{variant:"h4"},"Block available slots")),i.a.createElement(Pe,{appointmentData:n}),i.a.createElement(je.a,null),i.a.createElement(Ee.a,{sx:{my:2}},i.a.createElement(jt,null)),i.a.createElement(ke.a,{type:"submit",color:"primary",disableElevation:!0,fullWidth:!0,variant:"contained",disabled:u},"Confirm Booking"))))}))),Ct=Object(O.a)({property:function(e){return Le()(e,["calendar","property"])}}),St=Object(h.connect)(Ct)(Object(y.a)((function(e){var t=e.appointmentData,a=e.property,n=e.onSave,r=a?xt:dt;return o.createElement(r,{appointmentData:t,onSave:n})}))),wt=["basicLayoutComponent","commandLayoutComponent","recurrenceLayoutComponent","isRecurrence","children"],Yt=Object(d.a)((function(e){return{layout:{background:e.palette.common.white},content:{padding:e.spacing(4)}}})),Lt=function(e){var t=e.basicLayoutComponent,a=e.commandLayoutComponent,n=e.recurrenceLayoutComponent,r=(e.isRecurrence,e.children),c=Object(I.a)(e,wt),o=Yt();return i.a.createElement("div",Object.assign({className:o.layout},c),i.a.createElement(a,null),i.a.createElement("div",{className:o.content},i.a.createElement(t,null),i.a.createElement(n,null)),r)},Mt=function(e){var t=e.onCommitButtonClick,a=e.isSaving,n=e.setIsSaving;return Object(o.useEffect)((function(){a&&(t(),n(!1))}),[a]),i.a.createElement("div",null)},Tt=function(){var e=Object(o.useState)(!1),t=Object(ye.a)(e,2),a=t[0],n=t[1],r=Object(U.k)(St,(function(){return{onSave:function(){return n(!0)}}})),c=Object(U.k)(Mt,(function(){return{isSaving:a,setIsSaving:n}}));return i.a.createElement(u.a,{layoutComponent:Lt,basicLayoutComponent:r,commandLayoutComponent:c})},It=Object(d.a)((function(e){return{container:{minHeight:"100px",fontFamily:e.typography.fontFamily.avenirLT},loading:{border:"1px solid #E0E0E0",backgroundColor:e.palette.common.white}}})),At=Object(O.a)({config:function(e){return p()(e,["calendar","config"])},isLoading:function(e){return p()(e,["calendar","isLoading"])},appointments:function(e){return p()(e,["calendar","appointments"])}});t.default=Object(h.connect)(At,void 0)(Object(y.a)((function(e){var t=e.config,a=e.profileId,n=e.isLoading,r=e.appointments,o=It();ve({profileId:a}),ge({profileId:a}),Oe();return W()(t)&&!n?i.a.createElement(i.a.Fragment,null):i.a.createElement(J.a,{tag:"div",blocking:n,loader:i.a.createElement(K.Loader,{active:!0,type:"ball-pulse",color:"rgba(231,28,99,1)"}),className:Object(b.a)(o.container,Object(c.a)({},o.loading,n))},i.a.createElement(l.a,{elevation:3},i.a.createElement(u.e,{data:r},i.a.createElement(s.r,null),i.a.createElement(u.h,{timeTableCellComponent:T,dayScaleCellComponent:g,cellDuration:p()(t,"times.slotLengthMinutes")||60}),i.a.createElement(s.k,{onCommitChanges:function(){}}),i.a.createElement(z,null),i.a.createElement(u.g,null),i.a.createElement(u.d,null),i.a.createElement(u.f,null),i.a.createElement(u.c,{appointmentComponent:B}),i.a.createElement(u.b,{showCloseButton:!0,contentComponent:R}),i.a.createElement(Tt,null))))})))}}]);
//# sourceMappingURL=16.fd706014.chunk.js.map