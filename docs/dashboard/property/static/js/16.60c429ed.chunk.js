(this.webpackJsonpnilehome=this.webpackJsonpnilehome||[]).push([[16],{1606:function(e,t,a){"use strict";a.r(t);var n,r,c=a(82),o=a(0),i=a.n(o),l=a(405),s=a(1490),u=a(1460),m=a(21),p=a.n(m),d=a(1359),f=a(60),b=a(24),v=Object(d.a)((function(e){return{cell:{paddingTop:e.spacing(1)},today:{backgroundColor:Object(f.a)(e.palette.primary.main,.16)}}})),g=function(e){var t=v(),a=e.today;return o.createElement(u.h.DayScaleCell,Object.assign({},e,{className:Object(b.a)(t.cell,Object(c.a)({},t.today,a))}))},O=a(4),h=a(135),y=a(164),E=a(165),j=a(173),k=a.n(j),D=(a(1494),a(1)),x="Something went wrong",C="".concat("YYYY-MM-DD"," HH:mm:ss"),w=function(e){var t=e.config,a=e.dateString,n=e.key,r=p()(t,n)||"",c=p()(t,"timeZone");return T("".concat(a," ").concat(r),c)},S=function(e){var t=e.dateString,a=e.config,n=function(e){return new Date(e).toLocaleString("en-us",{weekday:"short"}).toLowerCase()}(t),r=k()(t);if(function(e){return k()().diff(e,"hours")>0}(r))return!1;if(!function(e){var t=e.dateName,a=e.config;return p()(a,"".concat(t,"Active"))||!1}({dateName:n,config:a}))return!1;var c=r.format("YYYY-MM-DD");return!!function(e){var t=e.config,a=e.currentMoment,n=e.currentDate,r=e.dateName,c=w({config:t,dateString:n,key:"".concat(r,"Start")}),o=w({config:t,dateString:n,key:"".concat(r,"End")});return a.isSameOrAfter(c)&&a.isBefore(o)}({config:a,currentMoment:r,currentDate:c,dateName:n})&&!function(e){var t=e.config,a=e.currentMoment,n=e.currentDate,r=w({config:t,dateString:n,key:"breakStart"}),c=w({config:t,dateString:n,key:"breakEnd"});return a.isSameOrAfter(r)&&a.isBefore(c)}({config:a,currentMoment:r,currentDate:c})},Y=function(e){var t=e.startDate,a=e.endDate;return{displayDate:k()(t).format("dddd, MMMM DD, YYYY"),displayTime:"".concat(k()(t).format("hh:mm A")," - ").concat(k()(a).format("hh:mm A"))}},L=function(e){var t=e.services.find((function(e){return e.name.toLowerCase()===D.n}));return Boolean(t)},T=function(e,t){return t?k.a.tz(e,t).local().format(C):k()(e,C)},I=Object(d.a)((function(e){return{disableCell:{background:"linear-gradient(-45deg,".concat(e.palette.action.disabledBackground," 10%,transparent 10%,transparent 50%,").concat(e.palette.action.disabledBackground," 50%,").concat(e.palette.action.disabledBackground," 60%,transparent 60%,transparent)"),backgroundSize:"8px 8px",pointerEvents:"none"}}})),M=Object(y.a)({timeConfig:function(e){return Object(O.a)(Object(O.a)({},p()(e,"calendar.config.times")),{},{timeZone:p()(e,"calendar.config.timeZone")})}}),N=Object(h.connect)(M,void 0)(Object(E.a)((function(e){var t=I(),a=e.startDate,n=e.timeConfig;return o.createElement(u.h.TimeTableCell,Object.assign({},e,{className:Object(b.a)(Object(c.a)({},t.disableCell,!S({dateString:a,config:n})))}))}))),B=a(272),A=["children"],q=Object(d.a)((function(e){return{appointment:{backgroundColor:e.palette.primary.main,"&:hover":{backgroundColor:e.palette.primary.main}},busy:{backgroundColor:e.palette.primary.gray,"&:hover":{backgroundColor:e.palette.primary.gray}}}})),F=function(e){var t=e.children,a=Object(B.a)(e,A),n=a.data,r=q();return o.createElement(u.c.Appointment,Object.assign({},a,{className:Object(b.a)(r.appointment,Object(c.a)({},r.busy,L(n)))}),t)},P=a(242),R=a(1602),H=a(1603),V=Object(d.a)((function(e){return{wrapper:{padding:e.spacing(2),paddingTop:0},section:{marginBottom:e.spacing(1)}}})),W=function(e){var t=e.appointmentData,a=V(),n=Y(t),r=n.displayDate,c=n.displayTime;return o.createElement(l.a,{className:a.wrapper},o.createElement(P.a,{variant:"h3",color:"primary",className:a.section},p()(t,"title","")),o.createElement("div",{className:a.section},o.createElement(P.a,{variant:"h5"},o.createElement(R.a,null)," ",r)),o.createElement("div",null,o.createElement(P.a,{variant:"h5"},o.createElement(H.a,null)," ",c)))},z=a(61),U=a.n(z),Z=a(410),G=a(1464),K={setStartOfWeek:Z.i,setEndOfWeek:Z.d},_=Object(h.connect)(void 0,K)(Object(E.a)((function(e){var t=e.setStartOfWeek,a=e.setEndOfWeek;return i.a.createElement(G.f,{name:"IntegratedDates"},i.a.createElement(G.e,{name:"startViewDate",computed:function(e){var a=e.startViewDate;return t(a),a}}),i.a.createElement(G.e,{name:"endViewDate",computed:function(e){var t=e.endViewDate;return a(t),t}}))}))),J=a(127),X=a(111),Q=a(10),$=a.n(Q),ee=a(28),te=a(9),ae=a(11),ne=a(13),re=a(12),ce=a(97),oe=a.n(ce),ie=a(413),le=function(){function e(){Object(te.a)(this,e),this.baseURL="".concat("https://api.youcanbook.me/v1","/").concat("61dd0812-4dfe-4a42-ade9-c3565ec2a9a6","/"),this.cancelToken=null}return Object(ae.a)(e,[{key:"cancel",value:function(){null!==this.cancelToken&&this.cancelToken()}},{key:"axios",value:function(e){var t=e.method,a=e.baseURL,n=void 0===a?this.baseURL:a,r=e.url,c=e.data,o=e.params,i=e.headers,l=void 0===i?{}:i,s=e.needResHeaders,u=void 0!==s&&s,m=this,d=oe.a.CancelToken;return new Promise((function(e,a){var i={method:t,url:r,baseURL:n,timeout:3e4,params:o,data:c,headers:Object(O.a)(Object(O.a)({},l),{},{Authorization:ie.c}),cancelToken:new d((function(e){m.cancelToken=e}))};oe.a.request(i).then((function(t){var a="object"===typeof t.data?t.data:JSON.parse(t.data);e(u?{data:a,headers:t.headers}:a)}),(function(e){var t=p()(e,["response","status"]),n=p()(e,["response","data","message"]),r=p()(e,["response","data","errors"]);a({status:t,message:n,errors:r})}))}))}}]),e}(),se=new(function(e){Object(ne.a)(a,e);var t=Object(re.a)(a);function a(){return Object(te.a)(this,a),t.apply(this,arguments)}return Object(ae.a)(a,[{key:"getProfileById",value:function(e){var t=e.id,a=e.fields;return t?this.axios({method:"GET",url:"".concat(ie.b.PROFILES,"/").concat(t),params:{fields:a}}):{}}}]),a}(le)),ue=a(129),me=a(1554),pe=a.n(me),de=function(e){var t=p()(e,["answers"],[]).filter((function(e){return"EMAIL"===e.code}))[0];return p()(t,"string","")},fe=function(e){return!e.cancelled},be=function(e){return e.map((function(e){return function(e){var t=p()(e,"startsAt"),a=p()(e,"endsAt"),n=p()(e,"timeZone");return{title:de(e),id:p()(e,"id"),startDate:T(t,n),endDate:T(a,n),services:p()(e,"services",[]),cancelled:p()(e,"cancelled")}}(e)})).filter(fe)},ve=new(function(e){Object(ne.a)(a,e);var t=Object(re.a)(a);function a(){return Object(te.a)(this,a),t.apply(this,arguments)}return Object(ae.a)(a,[{key:"createBooking",value:function(){var e=Object(ee.a)($.a.mark((function e(t){var a,n,r;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.profileId,n=t.data,r=this.axios({method:"POST",url:"".concat(ie.b.PROFILES,"/").concat(a,"/").concat(ie.b.BOOKINGS),params:{fields:ie.a},data:Object(O.a)({},n)}),e.abrupt("return",be([r]));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createBookings",value:function(){var e=Object(ee.a)($.a.mark((function e(t){var a,n,r,c,o,i;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.profileId,n=t.data,r=0,c=[],o=[];case 4:if(r===n.length){e.next=18;break}return e.prev=5,e.next=8,this.axios({method:"POST",url:"".concat(ie.b.PROFILES,"/").concat(a,"/").concat(ie.b.BOOKINGS),params:{fields:ie.a},data:n[r]});case 8:i=e.sent,o.push(i),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),c.push(n[r]);case 15:r+=1,e.next=4;break;case 18:return e.abrupt("return",{bookings:be(o),errors:c});case 19:case"end":return e.stop()}}),e,this,[[5,12]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getBookings",value:function(){var e=Object(ee.a)($.a.mark((function e(t){var a,n,r,c,o,i,l,s,u,m;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.profileId,n=t.from,r=t.to,a){e.next=3;break}return e.abrupt("return",[]);case 3:c=!0,o="",i=[];case 6:if(!c){e.next=25;break}if(o){e.next=13;break}return e.next=10,this.axios({method:"GET",url:"".concat(ie.b.PROFILES,"/").concat(a,"/").concat(ie.b.BOOKINGS),params:{fields:ie.a,jumpToDate:k()(n).format("YYYY-MM-DD")},needResHeaders:!0});case 10:e.t0=e.sent,e.next=16;break;case 13:return e.next=15,this.axios({method:"GET",url:o,needResHeaders:!0});case 15:e.t0=e.sent;case 16:l=e.t0,s=p()(l,["headers","link"],""),o=p()(pe()(s),["next","url"],""),u=p()(l,["data"]),i=[].concat(Object(ue.a)(i),Object(ue.a)(u)),m=p()(u,[u.length-1,"startsAt"],""),c=o&&k()(m).isBefore(r),e.next=6;break;case 25:return e.abrupt("return",be(i));case 26:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),a}(le)),ge=function(e){var t=e.profileId,a=Object(h.useDispatch)();Object(o.useEffect)((function(){return a(Object(Z.g)(t)),Object(ee.a)($.a.mark((function e(){var n;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(Object(Z.f)(!0)),e.prev=1,e.next=4,se.getProfileById({id:t,fields:"times,times.*,questions,questions.*,services, services.*,services.items.*,actions,actions.*,title,timeZone"});case 4:n=e.sent,a(Object(Z.c)(n||{})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),a(Object(Z.e)(e.t0));case 11:a(Object(Z.f)(!1));case 12:case"end":return e.stop()}}),e,null,[[1,8]])})))(),function(){se.cancel()}}),[])},Oe=function(e){var t=e.profileId,a=Object(h.useDispatch)(),n=Object(h.useSelector)((function(e){return p()(e,["calendar","startOfWeek"])})),r=Object(h.useSelector)((function(e){return p()(e,["calendar","endOfWeek"])}));Object(o.useEffect)((function(){return Object(ee.a)($.a.mark((function e(){var c;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,a(Object(Z.f)(!0)),e.next=6,ve.getBookings({profileId:t,from:n,to:r});case 6:c=e.sent,a(Object(Z.b)(c)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),a(Object(Z.e)(e.t0));case 13:a(Object(Z.f)(!1));case 14:case"end":return e.stop()}}),e,null,[[2,10]])})))(),function(){ve.cancel()}}),[r])},he=a(39),ye=function(){var e=Object(h.useSelector)((function(e){return p()(e,["calendar","error"])}));Object(o.useEffect)((function(){if(e){var t=(e||{}).message;t&&he.toastr.error(x,t)}}),[e])},Ee=a(63),je=a(1439),ke=a(1418),De=a(585),xe=a(1452),Ce=a(66),we="SIMPLE",Se="CHECKBOX",Ye="MULTI_DROPDOWN",Le=a(70),Te=a.n(Le),Ie=(n={},Object(c.a)(n,we,""),Object(c.a)(n,Se,!1),Object(c.a)(n,Ye,""),n),Me="daily",Ne="weekly",Be=function(e){return e.reduce((function(e,t){var a=t.code,n=t.type;return Object(O.a)(Object(O.a)({},e),{},Object(c.a)({},a,Ie[n]))}),{appointmentType:void 0})},Ae=function(e,t){return e.map((function(e){var a=e.code;return{code:a,string:t[a]}}))},qe=function(e){var t=e.appointmentData,a=e.values,n=e.config,r=n.title,c=n.questions,o=a.FNAME,i=a.appointmentType,l=t.startDate;return{title:"".concat(o," and ").concat(r),startsAt:k()(l).format("YYYY-MM-DDTHH:mm:ss"),tentative:"NOT_USED",timeZone:k.a.tz.guess(),cancelled:!1,units:1,services:[{id:i.id,name:i.name}],answers:Ae(c,a)}},Fe=function(e){var t=e.appointmentData,a=e.values,n=e.config,r=n.questions,c=t.startDate,o=a.repeat,i=a.repeatType,l=a.startDate,s=a.endDate,u=function(e){return e.find((function(e){return"busy"===e.name}))}(Te()(n,"services.items",[]));if(!o)return[{title:"busy",startsAt:k()(c).format("YYYY-MM-DDTHH:mm:ss"),tentative:"NOT_USED",timeZone:k.a.tz.guess(),cancelled:!1,units:1,services:[u],answers:Ae(r,a)}];var m=k()(c).format("HH:mm:ss"),p=k()(l),d=k()(s).diff(p,"day"),f=i===Ne?7:1;return Array.from(Array(Math.floor(d/f)+1),(function(e,t){return t*f})).map((function(e){var t=k()(l).add(e,"day");return{title:"busy",startsAt:"".concat(t.format("YYYY-MM-DD"),"T").concat(m),tentative:"NOT_USED",timeZone:k.a.tz.guess(),cancelled:!1,units:1,services:[u],answers:Ae(r,a)}}))},Pe=function(e){var t=e.map((function(e){return e.startsAt})).join(", ");return{message:"Cannot book at dates: ".concat(t)}},Re=Object(d.a)((function(e){return{wrapper:Object(O.a)(Object(O.a)({},e.typography.h4),{},{padding:e.spacing(2,0),backgroundColor:e.palette.background.gray,textAlign:"center"})}})),He=function(e){var t=e.appointmentData,a=t.startDate,n=t.endDate,r=Re(),c=Y({startDate:a,endDate:n}),o=c.displayDate,l=c.displayTime;return i.a.createElement("div",{className:r.wrapper},i.a.createElement(P.a,{variant:"h4"},o),i.a.createElement(je.a,{sx:{mt:1}},i.a.createElement(P.a,{variant:"h3"},l)))},Ve=a(1559),We=a.n(Ve),ze=a(1444),Ue=a(1435),Ze=Object(d.a)((function(e){return{group:{width:"100%",margin:e.spacing(1,0,2,0)},button:{padding:e.spacing(1.5,2),textTransform:"none"},buttonLabel:{width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center"},duration:{display:"flex",alignItems:"center"},selected:{"&&, &&:hover":{backgroundColor:e.palette.primary.main}}}})),Ge=function(e){var t=e.appointmentTypes,a=Ze(),n=Object(xe.c)(),r=n.values,c=n.setFieldValue,o=Te()(r,"appointmentType.id")||"";return i.a.createElement(i.a.Fragment,null,i.a.createElement(P.a,{variant:"h4"},"Choose an appointment type"),i.a.createElement(ze.a,{orientation:"vertical",value:o,exclusive:!0,onChange:function(e,a){var n=t.find((function(e){return e.id===a}));c("appointmentType",n)},classes:{root:a.group}},t.map((function(e){return i.a.createElement(Ue.a,{value:e.id,classes:{root:a.button,label:a.buttonLabel,selected:a.selected},key:e.id},i.a.createElement(P.a,{variant:"h5",color:"textPrimary"},e.name),i.a.createElement(P.a,{variant:"subtitle1",classes:{root:a.duration}},i.a.createElement(We.a,{fontSize:"small"}),i.a.createElement(je.a,{sx:{ml:.5,mt:.25}},function(e){var t=e.numberOfSlots,a=e.slotLengthMinutes;return"".concat(t*a," minutes")}(e))))}))))},Ke=a(1599),_e=a(1597),Je=a(1598),Xe=a(1620),Qe=Object(d.a)((function(e){return{textField:{marginTop:e.spacing(.5)},label:Object(O.a)({color:e.palette.primary.dark},e.typography.h4),input:Object(O.a)(Object(O.a)({},e.typography.h5),{},{padding:e.spacing(1,1.5)})}})),$e=function(e){var t=Qe(),a=e.name,n=e.variant,r=e.placeholder,c=void 0===r?"":r,o=e.label,l=e.value,s=e.required,u=e.onChange,m=e.classes,p=void 0===m?{}:m;return i.a.createElement(_e.a,{required:s},i.a.createElement(Je.a,{color:"secondary",className:t.label},o),i.a.createElement(Xe.a,{name:a,variant:n,placeholder:c,value:l,onChange:u,classes:{root:Object(b.a)(t.textField,p.textField)},InputProps:{classes:{input:Object(b.a)(t.input,p.input)}}}))},et=Object(d.a)((function(e){return{after:Object(O.a)({},e.typography.subtitle)}})),tt=a(1611),at=a(1593),nt=Object(d.a)((function(e){return{wrapper:{"& .MuiOutlinedInput-notchedOutline>legend>span":{display:"none"}},label:{"&&":Object(O.a)({color:e.palette.primary.dark},e.typography.h4)},select:Object(O.a)(Object(O.a)({},e.typography.h5),{},{padding:e.spacing(1,1.5)}),item:Object(O.a)({},e.typography.h5)}})),rt=function(e){var t=nt(),a=e.name,n=e.value,r=e.onChange,c=e.label,o=e.variant,l=e.required,s=e.options,u=e.classes,m=void 0===u?{}:u;return i.a.createElement(_e.a,{required:l,classes:{root:t.wrapper}},i.a.createElement(Je.a,{className:t.label},c),i.a.createElement(tt.a,{name:a,classes:{root:Object(b.a)(t.select,m.select)},value:n,onChange:r,label:"",variant:o,MenuProps:{anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},getContentAnchorEl:null}},i.a.createElement(at.a,{classes:{root:Object(b.a)(t.item,m.item)},value:""},i.a.createElement("em",null,"None")),s.map((function(e){return i.a.createElement(at.a,{key:e,value:e,classes:{root:Object(b.a)(t.item,m.item)}},e)}))))},ct=a(1601),ot=a(1615),it=Object(d.a)((function(e){return{label:Object(O.a)({},e.typography.h5),checkbox:{}}})),lt=function(e){var t=it(),a=e.name,n=e.required,r=e.checked,c=e.onChange,o=e.label,l=e.color,s=void 0===l?"primary":l,u=e.classes,m=void 0===u?{}:u;return i.a.createElement(_e.a,{required:n},i.a.createElement(ct.a,{classes:{label:Object(b.a)(t.label,m.label)},control:i.a.createElement(ot.a,{classes:{root:Object(b.a)(t.checkbox,m.checkbox)},checked:r,onChange:c,name:a,color:s}),label:o}))},st=Object(d.a)((function(e){return{after:Object(O.a)({},e.typography.subtitle)}})),ut=(r={},Object(c.a)(r,we,(function(e){var t=e.question,a=et(),n=t.code,r=t.before,c=t.after,o=t.required,l=Object(xe.c)(),s=l.values,u=l.handleChange;return i.a.createElement(je.a,{sx:{display:"flex",flexDirection:"column",my:1}},i.a.createElement($e,{name:n,variant:"outlined",placeholder:"",label:r,value:s[n],onChange:u,required:o}),Boolean(c)&&i.a.createElement(Ke.a,{className:a.after},c))})),Object(c.a)(r,Se,(function(e){var t=e.question,a=st(),n=t.after,r=t.before,c=t.required,o=t.code,l=Object(xe.c)(),s=l.values,u=l.handleChange;return i.a.createElement(je.a,{sx:{display:"flex",flexDirection:"column",my:1}},i.a.createElement(lt,{checked:s[o],onChange:u,name:o,color:"primary",label:r,required:c}),Boolean(n)&&i.a.createElement(Ke.a,{className:a.after},n))})),Object(c.a)(r,Ye,(function(e){var t=e.question,a=t.code,n=t.after,r=t.before,c=t.required,o=t.options,l=void 0===o?[]:o,s=Object(xe.c)(),u=s.values,m=s.handleChange;return i.a.createElement(je.a,{sx:{display:"flex",flexDirection:"column",my:1}},i.a.createElement(rt,{name:a,value:u[a],onChange:m,label:r,variant:"outlined",required:c,options:l}),Boolean(n)&&i.a.createElement(je.a,{sx:{mt:1}},n))})),r),mt=function(e){var t=e.questions;return i.a.createElement(i.a.Fragment,null,t.map((function(e){var t=ut[e.type];return i.a.createElement(t,{key:e.code,question:e})})))},pt=Object(y.a)({profileId:function(e){return p()(e,"calendar.profileId")},config:function(e){return p()(e,"calendar.config")},isLoading:function(e){return p()(e,"calendar.isLoading")}}),dt={setIsLoading:Z.f,setError:Z.e,addAppointments:Z.a},ft=Object(h.connect)(pt,dt)(Object(E.a)((function(e){var t=e.profileId,a=e.config,n=e.appointmentData,r=e.setIsLoading,c=e.setError,o=e.addAppointments,l=e.onSave,s=e.isLoading,u=p()(a,"questions",[]),m=p()(a,"services.items",[]).filter((function(e){return e.name!==D.n})),d=Be(u),f=function(){var e=Object(ee.a)($.a.mark((function e(i){var s,u;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r(!0),s=qe({appointmentData:n,values:i,config:a}),e.next=5,ve.createBooking({profileId:t,data:s});case 5:u=e.sent,o(u),l(),r(!1),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),r(!1),c(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}();return i.a.createElement(je.a,{sx:{display:"flex",flexDirection:"column"}},i.a.createElement(xe.b,{initialValues:d,onSubmit:f},i.a.createElement(xe.a,null,i.a.createElement(Ge,{appointmentTypes:m}),i.a.createElement(He,{appointmentData:n}),i.a.createElement(ke.a,null),i.a.createElement(je.a,{sx:{mt:4}},i.a.createElement(mt,{questions:u})),i.a.createElement(De.a,{type:"submit",color:"primary",disableElevation:!0,fullWidth:!0,variant:"contained",disabled:s},"Confirm Booking"))))}))),bt=a(1492),vt=a(1604),gt=a(1410),Ot=a(1621),ht=a(1612),yt=a(1415),Et=a(1451),jt=a(1605),kt=function(){var e=Object(xe.c)(),t=e.values,a=e.handleChange,n=e.setFieldValue,r=function(e){return function(t){n(e,k()(t).format("MM/DD/YYYY"))}};return i.a.createElement("div",null,i.a.createElement(ct.a,{control:i.a.createElement(vt.a,{name:"repeat",checked:t.repeat,onChange:a,color:"primary"}),label:"Repeat"}),i.a.createElement(gt.a,{in:t.repeat},i.a.createElement("div",null,i.a.createElement(Ot.a,{name:"repeatType",value:t.repeatType,onChange:a},i.a.createElement(ct.a,{value:"daily",control:i.a.createElement(ht.a,{color:"primary"}),label:"Daily"}),i.a.createElement(ct.a,{value:"weekly",control:i.a.createElement(ht.a,{color:"primary"}),label:"Weekly"}))),i.a.createElement(yt.a,{container:!0,justifyContent:"space-between"},i.a.createElement(Et.a,{utils:bt.a},i.a.createElement(jt.a,{disableToolbar:!0,inputVariant:"outlined",format:"MM/DD/YYYY",margin:"normal",label:"Start date",value:new Date(t.startDate),onChange:r("startDate")}),i.a.createElement(jt.a,{disableToolbar:!0,inputVariant:"outlined",format:"MM/DD/YYYY",margin:"normal",label:"End date",value:new Date(t.endDate),onChange:r("endDate")})))))},Dt=Object(y.a)({profileId:function(e){return p()(e,"calendar.profileId")},config:function(e){return p()(e,"calendar.config")},property:function(e){return p()(e,"calendar.property")},isLoading:function(e){return p()(e,"calendar.isLoading")}}),xt={setIsLoading:Z.f,setError:Z.e,addAppointments:Z.a},Ct=Object(h.connect)(Dt,xt)(Object(E.a)((function(e){var t=e.profileId,a=e.config,n=e.appointmentData,r=e.setIsLoading,c=e.setError,o=e.addAppointments,l=e.property,s=e.onSave,u=e.isLoading,m=function(e){var t=e.property,a=e.appointmentData,n=e.config.questions,r=a.startDate,c=k()(r).format("MM/DD/YYYY"),o=Te()(t,"PropertyData.FullAddress",""),i=Te()(Ce.a,["user","attributes","email"],"");return Object(O.a)(Object(O.a)({},Be(n)),{},{FNAME:o,EMAIL:i,repeat:!1,repeatType:Me,startDate:c,endDate:c})}({property:l,appointmentData:n,config:a}),p=function(){var e=Object(ee.a)($.a.mark((function e(i){var l,u,m,p;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r(!0),l=Fe({appointmentData:n,values:i,config:a}),e.next=5,ve.createBookings({profileId:t,data:l});case 5:u=e.sent,m=u.bookings,p=u.errors,U()(p)||c(Pe(p)),o(m),s(),r(!1),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),r(!1),c(e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}();return i.a.createElement(je.a,{sx:{display:"flex",flexDirection:"column"}},i.a.createElement(xe.b,{initialValues:m,onSubmit:p},i.a.createElement(xe.a,null,i.a.createElement(je.a,{sx:{mb:2}},i.a.createElement(P.a,{variant:"h4"},"Block available slots")),i.a.createElement(He,{appointmentData:n}),i.a.createElement(ke.a,null),i.a.createElement(je.a,{sx:{my:2}},i.a.createElement(kt,null)),i.a.createElement(De.a,{type:"submit",color:"primary",disableElevation:!0,fullWidth:!0,variant:"contained",disabled:u},"Confirm Booking"))))}))),wt=Object(y.a)({property:function(e){return Te()(e,["calendar","property"])}}),St=Object(h.connect)(wt)(Object(E.a)((function(e){var t=e.appointmentData,a=e.property,n=e.onSave,r=a?Ct:ft;return o.createElement(r,{appointmentData:t,onSave:n})}))),Yt=["basicLayoutComponent","commandLayoutComponent","recurrenceLayoutComponent","isRecurrence","children"],Lt=Object(d.a)((function(e){return{layout:{background:e.palette.common.white},content:{padding:e.spacing(4)}}})),Tt=function(e){var t=e.basicLayoutComponent,a=e.commandLayoutComponent,n=e.recurrenceLayoutComponent,r=(e.isRecurrence,e.children),c=Object(B.a)(e,Yt),o=Lt();return i.a.createElement("div",Object.assign({className:o.layout},c),i.a.createElement(a,null),i.a.createElement("div",{className:o.content},i.a.createElement(t,null),i.a.createElement(n,null)),r)},It=function(e){var t=e.onCommitButtonClick,a=e.isSaving,n=e.setIsSaving;return Object(o.useEffect)((function(){a&&(t(),n(!1))}),[a]),i.a.createElement("div",null)},Mt=function(){var e=Object(o.useState)(!1),t=Object(Ee.a)(e,2),a=t[0],n=t[1],r=Object(G.k)(St,(function(){return{onSave:function(){return n(!0)}}})),c=Object(G.k)(It,(function(){return{isSaving:a,setIsSaving:n}}));return i.a.createElement(u.a,{layoutComponent:Tt,basicLayoutComponent:r,commandLayoutComponent:c})},Nt=Object(d.a)((function(e){return{container:{minHeight:"100px",fontFamily:e.typography.fontFamily.avenirLT},loading:{border:"1px solid #E0E0E0",backgroundColor:e.palette.common.white}}})),Bt=Object(y.a)({config:function(e){return p()(e,["calendar","config"])},isLoading:function(e){return p()(e,["calendar","isLoading"])},appointments:function(e){return p()(e,["calendar","appointments"])}});t.default=Object(h.connect)(Bt,void 0)(Object(E.a)((function(e){var t=e.config,a=e.profileId,n=e.isLoading,r=e.appointments,o=Nt();ge({profileId:a}),Oe({profileId:a}),ye();return U()(t)&&!n?i.a.createElement(i.a.Fragment,null):i.a.createElement(X.a,{tag:"div",blocking:n,loader:i.a.createElement(J.Loader,{active:!0,type:"ball-pulse",color:"rgba(231,28,99,1)"}),className:Object(b.a)(o.container,Object(c.a)({},o.loading,n))},i.a.createElement(l.a,{elevation:3},i.a.createElement(u.e,{data:r},i.a.createElement(s.r,null),i.a.createElement(u.h,{timeTableCellComponent:N,dayScaleCellComponent:g,cellDuration:p()(t,"times.slotLengthMinutes")||60}),i.a.createElement(s.k,{onCommitChanges:function(){}}),i.a.createElement(_,null),i.a.createElement(u.g,null),i.a.createElement(u.d,null),i.a.createElement(u.f,null),i.a.createElement(u.c,{appointmentComponent:F}),i.a.createElement(u.b,{showCloseButton:!0,contentComponent:W}),i.a.createElement(Mt,null))))})))}}]);
//# sourceMappingURL=16.60c429ed.chunk.js.map