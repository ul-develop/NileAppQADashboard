(this.webpackJsonpnilehome=this.webpackJsonpnilehome||[]).push([[16],{1646:function(e,t,n){"use strict";n.r(t);var a,r,c=n(69),o=n(0),i=n.n(o),l=n(342),s=n(1540),u=n(1515),p=n(19),m=n.n(p),d=n(1421),b=n(61),f=n(24),g=n(137),v=n(164),O=n(143),j=n(429),h=n(57),y=n.n(h),E=Object(d.a)((function(e){return{cells:{width:"100%",position:"absolute",left:0,background:e.palette.primary.light}}})),k=Object(v.b)({selectingCells:function(e){return m()(e,"calendar.selectingCells")},slotLengthMinutes:function(e){return m()(e,"calendar.config.times.slotLengthMinutes")}}),C=Object(g.connect)(k)(Object(O.a)(o.memo((function(e){var t=E(),n=e.selectingCells,a=e.slotLengthMinutes,r=Object(j.n)(n,a),c=function(e){if(e.preventDefault(),!y()(n)){var t=e.target;if(!t.classList.contains(j.b)&&!Object(j.r)(j.g,t)&&!Object(j.r)(j.d,t)){var a=n.startCell,r=document.getElementById(a.toString());r&&r.dispatchEvent(new Event("mouseup",{bubbles:!0}))}}};return o.useEffect((function(){return window.addEventListener("mouseup",c),function(){window.removeEventListener("mouseup",c)}}),[]),o.createElement("div",{className:t.cells,style:r})})))),x=n(1499),D=n(65),w=n.n(D),L=Object(d.a)((function(e){return{cell:{"&&":{padding:e.spacing(1,0),width:"100%",display:"block",textAlign:"center"}},today:{backgroundColor:Object(b.a)(e.palette.primary.main,.16)}}})),I=Object(v.b)({selectingDate:function(e){return m()(e,"calendar.selectingCells.date")},isSelecting:function(e){return m()(e,"calendar.isSelecting")}}),S=Object(g.connect)(I)(Object(O.a)(o.memo((function(e){var t=L(),n=e.today,a=e.startDate,r=e.selectingDate,i=e.isSelecting&&r===w()(a).format(j.c);return o.createElement(x.a,{component:"td",sx:{display:"table-cell",position:"relative",width:"100%"}},o.createElement(u.h.DayScaleCell,Object.assign({},e,{className:Object(f.a)(t.cell,Object(c.a)({},t.today,n))})),i&&o.createElement(C,null))})))),T=n(3),M=n(278),B=n(430),A=["startDate","timeConfig","onDoubleClick"],N=Object(d.a)((function(e){return{cell:{zIndex:e.zIndex.mobileStepper},disableCell:{background:"linear-gradient(-45deg,".concat(e.palette.action.disabledBackground," 10%,transparent 10%,transparent 50%,").concat(e.palette.action.disabledBackground," 50%,").concat(e.palette.action.disabledBackground," 60%,transparent 60%,transparent)"),backgroundSize:"8px 8px",pointerEvents:"none"}}})),Y=Object(v.a)((function(e){return m()(e,"calendar.config.times")}),(function(e){return m()(e,"calendar.config.timeZone")}),(function(e,t){return{timeConfig:Object(T.a)(Object(T.a)({},e),{},{timeZone:t})}})),q=Object(g.connect)(Y)(Object(O.a)(o.memo((function(e){var t=N(),n=e.startDate,a=e.timeConfig,r=e.onDoubleClick,i=Object(M.a)(e,A),l=Object(g.useDispatch)();return o.createElement(u.h.TimeTableCell,Object.assign({},i,{startDate:n,id:n.toString(),onMouseDown:function(e){e.preventDefault(),l(Object(B.c)(n))},onMouseEnter:function(e){e.preventDefault(),l(Object(B.b)(n))},onMouseUp:function(e){e.preventDefault(),r()},className:Object(f.a)(t.cell,Object(c.a)({},t.disableCell,!Object(j.q)({dateString:n,config:a})),j.b)}))})))),P=n(188),F=n.n(P),z=n(247),R=["property","children"],H=Object(d.a)((function(e){return{appointment:{zIndex:e.zIndex.speedDial,padding:e.spacing(.5,1),backgroundColor:e.palette.primary.main,color:e.palette.common.white,"&:hover":{backgroundColor:e.palette.primary.main}},busy:{backgroundColor:e.palette.common.lightGray,color:e.palette.primary.gray,"&:hover":{backgroundColor:e.palette.common.lightGray}},title:{overflow:"hidden",fontWeight:"bold",whiteSpace:"nowrap",textOverflow:"ellipsis"}}})),W=Object(v.b)({property:function(e){return F()(e,["calendar","property"])}}),V=Object(g.connect)(W)((function(e){var t=e.property,n=(e.children,Object(M.a)(e,R)),a=n.data,r=H(),i=!t,l=Object(j.p)(a),s=a.title,p=Object(j.l)(a).displayTime;return o.createElement(u.c.Appointment,Object.assign({},n,{className:Object(f.a)(r.appointment,Object(c.a)({},r.busy,l))}),i&&Object(j.p)(a)?o.createElement("div",null,"Busy"):o.createElement("div",null,o.createElement(z.a,{variant:"subtitle1",classes:{root:r.title}},s),o.createElement(z.a,{variant:"subtitle1"},p)))})),U=n(1642),G=n(1643),Z=Object(d.a)((function(e){return{wrapper:{padding:e.spacing(2),paddingTop:0},section:{marginBottom:e.spacing(1)},busy:{color:e.palette.primary.gray}}})),K=Object(v.b)({isBuyer:function(e){return!m()(e,["calendar","property"])}}),_=Object(g.connect)(K)((function(e){var t=e.appointmentData,n=e.isBuyer,a=Z(),r=Object(j.l)(t),i=r.displayDate,s=r.displayTime,u=n&&Object(j.p)(t);return o.createElement(l.a,{className:a.wrapper},o.createElement(z.a,{variant:"h4",color:"primary",className:Object(f.a)(a.section,Object(c.a)({},a.busy,u))},u?"Busy":m()(t,"title","")),o.createElement(x.a,{sx:{mb:1,display:"flex",alignItems:"center"}},o.createElement(x.a,{sx:{mr:.5,display:"flex"}},o.createElement(U.a,{fontSize:"small"})),o.createElement(z.a,{variant:"h5"},i)),o.createElement(x.a,{sx:{mb:1,display:"flex",alignItems:"center"}},o.createElement(x.a,{sx:{mr:.5,display:"flex"}},o.createElement(G.a,{fontSize:"small"})),o.createElement(z.a,{variant:"h5"},s)))})),J=n(1518),X={setStartOfWeek:B.k,setEndOfWeek:B.f},Q=Object(g.connect)(void 0,X)(Object(O.a)((function(e){var t=e.setStartOfWeek,n=e.setEndOfWeek;return i.a.createElement(J.f,{name:"IntegratedDates"},i.a.createElement(J.e,{name:"startViewDate",computed:function(e){var n=e.startViewDate;return t(n),n}}),i.a.createElement(J.e,{name:"endViewDate",computed:function(e){var t=e.endViewDate;return n(t),t}}))}))),$=n(129),ee=n(114),te=n(10),ne=n.n(te),ae=n(28),re=n(9),ce=n(12),oe=n(14),ie=n(13),le=n(101),se=n.n(le),ue=n(434),pe=function(){function e(){Object(re.a)(this,e),this.baseURL="".concat("https://api.youcanbook.me/v1","/").concat("dc7ded13-f988-4671-b5d1-142c6096066e","/"),this.cancelToken=null}return Object(ce.a)(e,[{key:"cancel",value:function(){null!==this.cancelToken&&this.cancelToken()}},{key:"axios",value:function(e){var t=e.method,n=e.baseURL,a=void 0===n?this.baseURL:n,r=e.url,c=e.data,o=e.params,i=e.headers,l=void 0===i?{}:i,s=e.needResHeaders,u=void 0!==s&&s,p=this,d=se.a.CancelToken;return new Promise((function(e,n){var i={method:t,url:r,baseURL:a,timeout:3e4,params:o,data:c,headers:Object(T.a)(Object(T.a)({},l),{},{Authorization:ue.c}),cancelToken:new d((function(e){p.cancelToken=e}))};se.a.request(i).then((function(t){var n="object"===typeof t.data?t.data:JSON.parse(t.data);e(u?{data:n,headers:t.headers}:n)}),(function(e){var t=m()(e,["response","status"]),a=m()(e,["response","data","message"]),r=m()(e,["response","data","errors"]);n({status:t,message:a,errors:r})}))}))}}]),e}(),me=new(function(e){Object(oe.a)(n,e);var t=Object(ie.a)(n);function n(){return Object(re.a)(this,n),t.apply(this,arguments)}return Object(ce.a)(n,[{key:"getProfileById",value:function(e){var t=e.id,n=e.fields;return t?this.axios({method:"GET",url:"".concat(ue.b.PROFILES,"/").concat(t),params:{fields:n}}):{}}}]),n}(pe)),de=n(132),be=n(1595),fe=n.n(be),ge=function(e){var t=m()(e,["answers"],[]).filter((function(e){return"EMAIL"===e.code}))[0];return m()(t,"string","")},ve=function(e){return!e.cancelled},Oe=function(e){return e.map((function(e){return function(e){var t=m()(e,"startsAt"),n=m()(e,"endsAt"),a=m()(e,"timeZone");return{title:ge(e),id:m()(e,"id"),startDate:Object(j.h)(t,a),endDate:Object(j.h)(n,a),services:m()(e,"services",[]),cancelled:m()(e,"cancelled")}}(e)})).filter(ve)},je=new(function(e){Object(oe.a)(n,e);var t=Object(ie.a)(n);function n(){return Object(re.a)(this,n),t.apply(this,arguments)}return Object(ce.a)(n,[{key:"createBooking",value:function(){var e=Object(ae.a)(ne.a.mark((function e(t){var n,a,r;return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.profileId,a=t.data,e.next=3,this.axios({method:"POST",url:"".concat(ue.b.PROFILES,"/").concat(n,"/").concat(ue.b.BOOKINGS),params:{fields:ue.a},data:Object(T.a)({},a)});case 3:return r=e.sent,e.abrupt("return",Oe([r]));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createBookings",value:function(){var e=Object(ae.a)(ne.a.mark((function e(t){var n,a,r,c,o,i;return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.profileId,a=t.data,r=0,c=[],o=[];case 4:if(r===a.length){e.next=18;break}return e.prev=5,e.next=8,this.axios({method:"POST",url:"".concat(ue.b.PROFILES,"/").concat(n,"/").concat(ue.b.BOOKINGS),params:{fields:ue.a},data:a[r]});case 8:i=e.sent,o.push(i),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),c.push(a[r]);case 15:r+=1,e.next=4;break;case 18:return e.abrupt("return",{bookings:Oe(o),errors:c});case 19:case"end":return e.stop()}}),e,this,[[5,12]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getBookings",value:function(){var e=Object(ae.a)(ne.a.mark((function e(t){var n,a,r,c,o,i,l,s,u,p;return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.profileId,a=t.from,r=t.to,n){e.next=3;break}return e.abrupt("return",[]);case 3:c=!0,o="",i=[];case 6:if(!c){e.next=25;break}if(o){e.next=13;break}return e.next=10,this.axios({method:"GET",url:"".concat(ue.b.PROFILES,"/").concat(n,"/").concat(ue.b.BOOKINGS),params:{fields:ue.a,jumpToDate:w()(a).format("YYYY-MM-DD")},needResHeaders:!0});case 10:e.t0=e.sent,e.next=16;break;case 13:return e.next=15,this.axios({method:"GET",url:o,needResHeaders:!0});case 15:e.t0=e.sent;case 16:l=e.t0,s=m()(l,["headers","link"],""),o=m()(fe()(s),["next","url"],""),u=m()(l,["data"]),i=[].concat(Object(de.a)(i),Object(de.a)(u)),p=m()(u,[u.length-1,"startsAt"],""),c=o&&w()(p).isBefore(r),e.next=6;break;case 25:return e.abrupt("return",Oe(i));case 26:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(pe)),he=function(e){var t=e.profileId,n=Object(g.useDispatch)();Object(o.useEffect)((function(){return n(Object(B.i)(t)),Object(ae.a)(ne.a.mark((function e(){var a;return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(Object(B.h)(!0)),e.prev=1,e.next=4,me.getProfileById({id:t,fields:j.a});case 4:a=e.sent,n(Object(B.e)(a||{})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),n(Object(B.g)(e.t0));case 11:n(Object(B.h)(!1));case 12:case"end":return e.stop()}}),e,null,[[1,8]])})))(),function(){me.cancel()}}),[t])},ye=function(e){var t=e.profileId,n=Object(g.useDispatch)(),a=Object(g.useSelector)((function(e){return m()(e,["calendar","startOfWeek"])})),r=Object(g.useSelector)((function(e){return m()(e,["calendar","endOfWeek"])}));Object(o.useEffect)((function(){return Object(ae.a)(ne.a.mark((function e(){var c;return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,n(Object(B.h)(!0)),e.next=6,je.getBookings({profileId:t,from:a,to:r});case 6:c=e.sent,n(Object(B.d)(c)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),n(Object(B.g)(e.t0));case 13:n(Object(B.h)(!1));case 14:case"end":return e.stop()}}),e,null,[[2,10]])})))(),function(){je.cancel()}}),[r,t])},Ee=n(37),ke=function(){var e=Object(g.useSelector)((function(e){return m()(e,["calendar","error"])}));Object(o.useEffect)((function(){if(e){var t=(e||{}).message;t&&Ee.toastr.error(j.f.getTimeConfig,t)}}),[e])},Ce=n(51),xe=n(1477),De=n(618),we=n(1511),Le=n(67),Ie="SIMPLE",Se="CHECKBOX",Te="MULTI_DROPDOWN",Me=(n(638),a={},Object(c.a)(a,Ie,""),Object(c.a)(a,Se,!1),Object(c.a)(a,Te,""),a),Be="daily",Ae="weekly",Ne=function(e){return e.questions.reduce((function(e,t){var n=t.code,a=t.type;return Object(T.a)(Object(T.a)({},e),{},Object(c.a)({},n,Me[a]))}),{appointmentType:void 0})},Ye=function(e,t){return e.map((function(e){var n=e.code;return{code:n,string:t[n]}})).filter((function(e){return e.string}))},qe=function(e,t){var n=e.startCell,a=e.endCell,r=Object(j.k)(e,t).start,c=Object(j.s)(n),o=Object(j.s)(a),i=Math.abs((c-o)/t)+1;return Array.from(Array(i),(function(e,n){return{startsAt:w()(r).add(n*t,"m").format("YYYY-MM-DDTHH:mm:ss")}}))},Pe=function(e){var t=e.selectingCells,n=e.values,a=e.config,r=a.title,c=a.questions,o=a.times.slotLengthMinutes,i=n.FNAME,l=n.appointmentType;return qe(t,o).map((function(e){return{startsAt:e.startsAt,title:"".concat(i," and ").concat(r),tentative:"NOT_USED",timeZone:w.a.tz.guess(),cancelled:!1,units:1,services:[l],answers:Ye(c,n)}}))},Fe=function(e){var t=e.selectingCells,n=e.values,a=e.config,r=a.questions,c=a.times.slotLengthMinutes,o=n.repeat,i=n.repeatType,l=n.startDate,s=n.endDate,u=function(e){return e.find((function(e){return"busy"===e.name.toLowerCase()}))}(F()(a,"services.items",[])),p=qe(t,c);if(!o)return p.map((function(e){return{startsAt:e.startsAt,title:"busy",tentative:"NOT_USED",timeZone:w.a.tz.guess(),cancelled:!1,units:1,services:[u],answers:Ye(r,n)}}));var m=w()(l),d=w()(s).diff(m,"day"),b=i===Ae?7:1;return Array.from(Array(Math.floor(d/b)+1),(function(e,t){return t*b})).reduce((function(e,t){var a=w()(l).add(t,"day"),c=p.map((function(e){var t=e.startsAt;return{title:"busy",startsAt:"".concat(a.format("YYYY-MM-DD"),"T").concat(w()(t).format("HH:mm:ss")),tentative:"NOT_USED",timeZone:w.a.tz.guess(),cancelled:!1,units:1,services:[u],answers:Ye(r,n)}}));return[].concat(Object(de.a)(e),Object(de.a)(c))}),[])},ze=function(e){var t=e.map((function(e){return e.startsAt})).join(", ");return{message:"Cannot book at dates: ".concat(t)}},Re=Object(d.a)((function(e){return{wrapper:Object(T.a)(Object(T.a)({},e.typography.h4),{},{padding:e.spacing(2,0),backgroundColor:e.palette.background.gray,textAlign:"center"})}})),He=Object(v.b)({selectingCells:function(e){return m()(e,"calendar.selectingCells")},slotLengthMinutes:function(e){return m()(e,"calendar.config.times.slotLengthMinutes")}}),We=Object(g.connect)(He)(Object(O.a)(o.memo((function(e){var t=e.selectingCells,n=e.slotLengthMinutes,a=Re();if(y()(t))return o.createElement("div",null);var r=t.date,c=Object(j.k)(t,n),i=c.start,l=c.end,s=Object(j.j)(i),u=Object(j.j)(l);return o.createElement("div",{className:a.wrapper},o.createElement(z.a,{variant:"h4"},Object(j.i)(r)),o.createElement(x.a,{sx:{mt:1}},o.createElement(z.a,{variant:"h3"},s," - ",u)))})))),Ve=n(1600),Ue=n.n(Ve),Ge=n(1504),Ze=n(1495),Ke=Object(d.a)((function(e){return{group:{width:"100%",margin:e.spacing(1,0,2,0)},button:{padding:e.spacing(1.5,2),textTransform:"none"},buttonLabel:{width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center"},duration:{display:"flex",alignItems:"center"},selected:{"&&, &&:hover":{backgroundColor:e.palette.primary.main}}}})),_e=function(e){var t=e.appointmentTypes,n=Ke(),a=Object(we.c)(),r=a.values,c=a.setFieldValue,l=F()(r,"appointmentType.id")||"";Object(o.useEffect)((function(){if(1===t.length){var e=Object(Ce.a)(t,1)[0];c("appointmentType",e)}}),[t.length]);return i.a.createElement(i.a.Fragment,null,i.a.createElement(z.a,{variant:"h4"},"Choose an appointment type"),i.a.createElement(Ge.a,{orientation:"vertical",value:l,exclusive:!0,onChange:function(e,n){var a=t.find((function(e){return e.id===n}));c("appointmentType",a)},classes:{root:n.group}},t.map((function(e){return i.a.createElement(Ze.a,{value:e.id,classes:{root:n.button,label:n.buttonLabel,selected:n.selected},key:e.id},i.a.createElement(z.a,{variant:"h5",color:"textPrimary"},e.name),i.a.createElement(z.a,{variant:"subtitle1",classes:{root:n.duration}},i.a.createElement(Ue.a,{fontSize:"small"}),i.a.createElement(x.a,{sx:{ml:.5,mt:.25}},Object(j.m)(e))))}))))},Je=n(1639),Xe=n(1637),Qe=n(1638),$e=n(1660),et=Object(d.a)((function(e){return{textField:{marginTop:e.spacing(.5)},label:Object(T.a)({color:e.palette.primary.dark},e.typography.h4),input:Object(T.a)(Object(T.a)({},e.typography.h5),{},{padding:e.spacing(1,1.5)})}})),tt=function(e){var t=et(),n=e.name,a=e.variant,r=e.placeholder,c=void 0===r?"":r,o=e.label,l=e.value,s=e.required,u=e.onChange,p=e.classes,m=void 0===p?{}:p;return i.a.createElement(Xe.a,{required:s},i.a.createElement(Qe.a,{color:"secondary",className:t.label},o),i.a.createElement($e.a,{name:n,variant:a,placeholder:c,value:l,onChange:u,classes:{root:Object(f.a)(t.textField,m.textField)},InputProps:{classes:{input:Object(f.a)(t.input,m.input)}}}))},nt=Object(d.a)((function(e){return{after:Object(T.a)({},e.typography.subtitle)}})),at=n(1651),rt=n(1633),ct=Object(d.a)((function(e){return{wrapper:{"& .MuiOutlinedInput-notchedOutline>legend>span":{display:"none"}},label:{"&&":Object(T.a)({color:e.palette.primary.dark},e.typography.h4)},select:Object(T.a)(Object(T.a)({},e.typography.h5),{},{padding:e.spacing(1,1.5)}),item:Object(T.a)({},e.typography.h5)}})),ot=function(e){var t=ct(),n=e.name,a=e.value,r=e.onChange,c=e.label,o=e.variant,l=e.required,s=e.options,u=e.classes,p=void 0===u?{}:u;return i.a.createElement(Xe.a,{required:l,classes:{root:t.wrapper}},i.a.createElement(Qe.a,{className:t.label},c),i.a.createElement(at.a,{name:n,classes:{root:Object(f.a)(t.select,p.select)},value:a,onChange:r,label:"",variant:o,MenuProps:{anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},getContentAnchorEl:null}},i.a.createElement(rt.a,{classes:{root:Object(f.a)(t.item,p.item)},value:""},i.a.createElement("em",null,"None")),s.map((function(e){return i.a.createElement(rt.a,{key:e,value:e,classes:{root:Object(f.a)(t.item,p.item)}},e)}))))},it=n(1641),lt=n(1655),st=Object(d.a)((function(e){return{label:Object(T.a)({},e.typography.h5),checkbox:{}}})),ut=function(e){var t=st(),n=e.name,a=e.required,r=e.checked,c=e.onChange,o=e.label,l=e.color,s=void 0===l?"primary":l,u=e.classes,p=void 0===u?{}:u;return i.a.createElement(Xe.a,{required:a},i.a.createElement(it.a,{classes:{label:Object(f.a)(t.label,p.label)},control:i.a.createElement(lt.a,{classes:{root:Object(f.a)(t.checkbox,p.checkbox)},checked:r,onChange:c,name:n,color:s}),label:o}))},pt=Object(d.a)((function(e){return{after:Object(T.a)({},e.typography.subtitle)}})),mt=(r={},Object(c.a)(r,Ie,(function(e){var t=e.question,n=nt(),a=t.code,r=t.before,c=t.after,o=t.required,l=Object(we.c)(),s=l.values,u=l.handleChange;return i.a.createElement(x.a,{sx:{display:"flex",flexDirection:"column",my:1}},i.a.createElement(tt,{name:a,variant:"outlined",placeholder:"",label:r,value:s[a],onChange:u,required:o}),Boolean(c)&&i.a.createElement(Je.a,{className:n.after},c))})),Object(c.a)(r,Se,(function(e){var t=e.question,n=pt(),a=t.after,r=t.before,c=t.required,o=t.code,l=Object(we.c)(),s=l.values,u=l.handleChange;return i.a.createElement(x.a,{sx:{display:"flex",flexDirection:"column",my:1}},i.a.createElement(ut,{checked:s[o],onChange:u,name:o,color:"primary",label:r,required:c}),Boolean(a)&&i.a.createElement(Je.a,{className:n.after},a))})),Object(c.a)(r,Te,(function(e){var t=e.question,n=t.code,a=t.after,r=t.before,c=t.required,o=t.options,l=void 0===o?[]:o,s=Object(we.c)(),u=s.values,p=s.handleChange;return i.a.createElement(x.a,{sx:{display:"flex",flexDirection:"column",my:1}},i.a.createElement(ot,{name:n,value:u[n],onChange:p,label:r,variant:"outlined",required:c,options:l}),Boolean(a)&&i.a.createElement(x.a,{sx:{mt:1}},a))})),r),dt=function(e){var t=e.questions;return i.a.createElement(i.a.Fragment,null,t.map((function(e){var t=mt[e.type];return t?i.a.createElement(t,{key:e.code,question:e}):i.a.createElement(i.a.Fragment,null)})))},bt=n(1),ft=Object(v.b)({profileId:function(e){return m()(e,"calendar.profileId")},config:function(e){return m()(e,"calendar.config")},isLoading:function(e){return m()(e,"calendar.isLoading")},selectingCells:function(e){return m()(e,"calendar.selectingCells")}}),gt={setIsLoading:B.h,setError:B.g,addAppointments:B.a},vt=Object(g.connect)(ft,gt)(Object(O.a)((function(e){var t=e.profileId,n=e.config,a=e.selectingCells,r=e.setIsLoading,c=e.setError,o=e.addAppointments,l=e.onSave,s=e.isLoading,u=m()(n,"questions",[]),p=m()(n,"services.items",[]).filter((function(e){return e.name.toLowerCase()!==bt.n})),d=Ne({questions:u,selectingCells:a}),b=function(){var e=Object(ae.a)(ne.a.mark((function e(i){var s,u,p,m;return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r(!0),s=Pe({selectingCells:a,values:i,config:n}),e.next=5,je.createBookings({profileId:t,data:s});case 5:u=e.sent,p=u.bookings,m=u.errors,y()(m)||c(ze(m)),o(p),l(),r(!1),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),r(!1),c(e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}();return i.a.createElement(x.a,{sx:{display:"flex",flexDirection:"column"}},i.a.createElement(we.b,{initialValues:d,onSubmit:b},i.a.createElement(we.a,null,i.a.createElement(_e,{appointmentTypes:p}),i.a.createElement(We,null),i.a.createElement(xe.a,null),i.a.createElement(x.a,{sx:{mt:4}},i.a.createElement(dt,{questions:u})),i.a.createElement(De.a,{type:"submit",color:"primary",disableElevation:!0,fullWidth:!0,variant:"contained",disabled:s},"Confirm Booking"))))}))),Ot=n(1542),jt=n(1644),ht=n(1470),yt=n(1661),Et=n(1652),kt=n(1474),Ct=n(1510),xt=n(1645),Dt=Object(d.a)((function(e){return{popover:Object(T.a)({},e.typography.h5)}})),wt=function(){var e=Dt(),t=Object(we.c)(),n=t.values,a=t.handleChange,r=t.setFieldValue,c=function(e){return function(t){r(e,w()(t).format("MM/DD/YYYY"))}};return i.a.createElement("div",null,i.a.createElement(it.a,{control:i.a.createElement(jt.a,{name:"repeat",checked:n.repeat,onChange:a,color:"primary"}),label:"Repeat"}),i.a.createElement(ht.a,{in:n.repeat},i.a.createElement("div",null,i.a.createElement(yt.a,{name:"repeatType",value:n.repeatType,onChange:a},i.a.createElement(it.a,{value:"daily",control:i.a.createElement(Et.a,{color:"primary"}),label:"Daily"}),i.a.createElement(it.a,{value:"weekly",control:i.a.createElement(Et.a,{color:"primary"}),label:"Weekly"}))),i.a.createElement(kt.a,{container:!0,justifyContent:"space-between"},i.a.createElement(Ct.a,{utils:Ot.a},i.a.createElement(xt.a,{variant:"inline",inputVariant:"outlined",format:"MM/DD/YYYY",margin:"normal",label:"Start date",value:new Date(n.startDate),onChange:c("startDate"),PopoverProps:{classes:{root:e.popover},id:j.d}}),i.a.createElement(xt.a,{variant:"inline",inputVariant:"outlined",format:"MM/DD/YYYY",margin:"normal",label:"End date",value:new Date(n.endDate),onChange:c("endDate"),PopoverProps:{classes:{root:e.popover},id:j.d}})))))},Lt=Object(v.b)({profileId:function(e){return m()(e,"calendar.profileId")},config:function(e){return m()(e,"calendar.config")},property:function(e){return m()(e,"calendar.property")},isLoading:function(e){return m()(e,"calendar.isLoading")},selectingCells:function(e){return m()(e,"calendar.selectingCells")}}),It={setIsLoading:B.h,setError:B.g,addAppointments:B.a},St=Object(g.connect)(Lt,It)(Object(O.a)((function(e){var t=e.profileId,n=e.config,a=e.selectingCells,r=e.setIsLoading,c=e.setError,o=e.addAppointments,l=e.property,s=e.onSave,u=e.isLoading;if(y()(a))return i.a.createElement(x.a,null);var p=function(e){var t=e.property,n=e.selectingCells,a=e.config,r=a.questions,c=a.times.slotLengthMinutes,o=Object(j.k)(n,c).start.format("MM/DD/YYYY"),i=F()(t,"PropertyData.FullAddress",""),l=F()(Le.a,["user","attributes","email"],"");return Object(T.a)(Object(T.a)({},Ne({questions:r})),{},{FNAME:i,EMAIL:l,repeat:!1,repeatType:Be,startDate:o,endDate:o})}({property:l,selectingCells:a,config:n}),m=function(){var e=Object(ae.a)(ne.a.mark((function e(i){var l,u,p,m;return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r(!0),l=Fe({selectingCells:a,values:i,config:n}),e.next=5,je.createBookings({profileId:t,data:l});case 5:u=e.sent,p=u.bookings,m=u.errors,y()(m)||c(ze(m)),o(p),s(),r(!1),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),r(!1),c(e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}();return i.a.createElement(x.a,{sx:{display:"flex",flexDirection:"column"}},i.a.createElement(we.b,{initialValues:p,onSubmit:m},i.a.createElement(we.a,null,i.a.createElement(x.a,{sx:{mb:2}},i.a.createElement(z.a,{variant:"h4"},"Block available slots")),i.a.createElement(We,null),i.a.createElement(xe.a,null),i.a.createElement(x.a,{sx:{my:2}},i.a.createElement(wt,null)),i.a.createElement(De.a,{type:"submit",color:"primary",disableElevation:!0,fullWidth:!0,variant:"contained",disabled:u},"Confirm Booking"))))}))),Tt=Object(v.b)({property:function(e){return F()(e,["calendar","property"])}}),Mt=Object(g.connect)(Tt)(Object(O.a)((function(e){var t=e.appointmentData,n=e.property,a=e.onSave,r=n?St:vt;return o.createElement(r,{appointmentData:t,onSave:a})}))),Bt=["basicLayoutComponent","commandLayoutComponent","recurrenceLayoutComponent","isRecurrence","children"],At=Object(d.a)((function(e){return{layout:{background:e.palette.common.white},content:{padding:e.spacing(4),width:"30vw",minWidth:"300px",overflow:"auto",maxHeight:"90vh"}}})),Nt=function(e){var t=e.basicLayoutComponent,n=e.commandLayoutComponent,a=e.recurrenceLayoutComponent,r=(e.isRecurrence,e.children),c=Object(M.a)(e,Bt),o=At();return i.a.createElement("div",Object.assign({className:o.layout},c),i.a.createElement(n,null),i.a.createElement("div",{className:o.content},i.a.createElement(t,null),i.a.createElement(a,null)),r)},Yt=function(e){var t=e.onCommitButtonClick,n=e.isSaving,a=e.setIsSaving;return Object(o.useEffect)((function(){n&&(t(),a(!1))}),[n]),i.a.createElement("div",null)},qt=n(627),Pt=n(620),Ft=n(617),zt=["children","visible","className","onHide"],Rt=Object(d.a)((function(e){return{root:{display:"flex",alignItems:"center",justifyContent:"center"}}})),Ht=function(e){var t=e.children,n=e.visible,a=e.className,r=e.onHide,c=Object(M.a)(e,zt),i=Rt(),l=Object(g.useDispatch)();return o.createElement(qt.a,Object.assign({id:j.g,className:Object(f.a)(i.root,a),onClose:function(){r(),l(Object(B.l)())},closeAfterTransition:!0,BackdropComponent:Pt.a,BackdropProps:{timeout:500},open:n,variant:"temporary",anchor:"left"},c),o.createElement(Ft.a,{in:n},o.createElement("div",null,t)))},Wt=function(){var e=Object(o.useState)(!1),t=Object(Ce.a)(e,2),n=t[0],a=t[1],r=Object(g.useDispatch)(),c=function(){a(!0),r(Object(B.l)())},l=Object(J.k)(Mt,(function(){return{onSave:c}})),s=Object(J.k)(Yt,(function(){return{isSaving:n,setIsSaving:a}}));return i.a.createElement(u.a,{layoutComponent:Nt,basicLayoutComponent:l,commandLayoutComponent:s,overlayComponent:Ht})},Vt=n(427),Ut=["style","children"],Gt=function(e){var t=e.style,n=e.children,a=Object(M.a)(e,Ut),r=Object(Vt.a)();return o.createElement("div",Object.assign({style:Object(T.a)(Object(T.a)({},t),{},{zIndex:r.zIndex.appBar})},a),n)},Zt=Object(d.a)((function(e){return{container:{minHeight:"100px",fontFamily:e.typography.fontFamily.avenirLT},loading:{border:"1px solid #E0E0E0",backgroundColor:e.palette.common.white}}})),Kt=Object(v.b)({config:function(e){return m()(e,["calendar","config"])},isLoading:function(e){return m()(e,["calendar","isLoading"])},appointments:function(e){return m()(e,["calendar","appointments"])}});t.default=Object(g.connect)(Kt,void 0)(Object(O.a)((function(e){var t=e.config,n=e.profileId,a=e.isLoading,r=e.appointments,o=Zt();he({profileId:n}),ye({profileId:n}),ke();return y()(t)&&!a?i.a.createElement(i.a.Fragment,null):i.a.createElement(ee.a,{tag:"div",blocking:a,loader:i.a.createElement($.Loader,{active:!0,type:"ball-pulse",color:"rgba(231,28,99,1)"}),className:Object(f.a)(o.container,Object(c.a)({},o.loading,a))},i.a.createElement(l.a,{elevation:3},i.a.createElement(u.e,{data:r},i.a.createElement(s.r,null),i.a.createElement(u.h,{timeTableCellComponent:q,dayScaleCellComponent:S,cellDuration:m()(t,"times.slotLengthMinutes")||j.e}),i.a.createElement(s.k,{onCommitChanges:function(){}}),i.a.createElement(Q,null),i.a.createElement(u.g,null),i.a.createElement(u.d,null),i.a.createElement(u.f,null),i.a.createElement(u.c,{appointmentComponent:V,containerComponent:Gt}),i.a.createElement(u.b,{showCloseButton:!0,contentComponent:_}),i.a.createElement(Wt,null))))})))}}]);
//# sourceMappingURL=16.a9996004.chunk.js.map