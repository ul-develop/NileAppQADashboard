(this.webpackJsonpnilehome=this.webpackJsonpnilehome||[]).push([[16],{1679:function(e,t,n){"use strict";n.r(t);var a,r,c=n(61),o=n(0),i=n.n(o),l=n(348),s=n(1565),u=n(1540),m=n(16),p=n.n(m),d=n(1446),f=n(63),b=n(24),g=n(138),O=n(166),v=n(144),j=n(251),h=n(57),E=n.n(h),y=Object(d.a)((function(e){return{cells:{width:"100%",position:"absolute",left:0,background:e.palette.primary.light}}})),x=Object(O.b)({selectingCells:function(e){return p()(e,"calendar.selectingCells")},slotLengthMinutes:function(e){return p()(e,"calendar.config.times.slotLengthMinutes")}}),k=Object(g.connect)(x)(Object(v.a)(o.memo((function(e){var t=y(),n=e.selectingCells,a=e.slotLengthMinutes,r=Object(j.o)(n,a),c=function(e){if(e.preventDefault(),!E()(n)){var t=e.target;if(!t.classList.contains(j.b)&&!Object(j.s)(j.g,t)&&!Object(j.s)(j.d,t)){var a=n.startCell,r=document.getElementById(a.toString());r&&r.dispatchEvent(new Event("mouseup",{bubbles:!0}))}}};return o.useEffect((function(){return window.addEventListener("mouseup",c),function(){window.removeEventListener("mouseup",c)}}),[]),o.createElement("div",{className:t.cells,style:r})})))),C=n(1524),D=n(59),w=n.n(D),I=Object(d.a)((function(e){return{cell:{"&&":{padding:e.spacing(1,0),width:"100%",display:"block",textAlign:"center"}},today:{backgroundColor:Object(f.a)(e.palette.primary.main,.16)}}})),L=Object(O.b)({selectingDate:function(e){return p()(e,"calendar.selectingCells.date")},isSelecting:function(e){return p()(e,"calendar.isSelecting")}}),S=Object(g.connect)(L)(Object(v.a)(o.memo((function(e){var t=I(),n=e.today,a=e.startDate,r=e.selectingDate,i=e.isSelecting&&r===w()(a).format(j.c);return o.createElement(C.a,{component:"td",sx:{display:"table-cell",position:"relative",width:"100%"}},o.createElement(u.h.DayScaleCell,Object.assign({},e,{className:Object(b.a)(t.cell,Object(c.a)({},t.today,n))})),i&&o.createElement(k,null))})))),T=n(3),M=n(283),A=n(440),q=["startDate","timeConfig","onDoubleClick"],B=Object(d.a)((function(e){return{cell:{zIndex:e.zIndex.mobileStepper},disableCell:{background:"linear-gradient(-45deg,".concat(e.palette.action.disabledBackground," 10%,transparent 10%,transparent 50%,").concat(e.palette.action.disabledBackground," 50%,").concat(e.palette.action.disabledBackground," 60%,transparent 60%,transparent)"),backgroundSize:"8px 8px",pointerEvents:"none"}}})),N=Object(O.a)((function(e){return p()(e,"calendar.config.times")}),(function(e){return p()(e,"calendar.config.timeZone")}),(function(e,t){return{timeConfig:Object(T.a)(Object(T.a)({},e),{},{timeZone:t})}})),Y=Object(g.connect)(N)(Object(v.a)(o.memo((function(e){var t=B(),n=e.startDate,a=e.timeConfig,r=e.onDoubleClick,i=Object(M.a)(e,q),l=Object(g.useDispatch)();return o.createElement(u.h.TimeTableCell,Object.assign({},i,{startDate:n,id:n.toString(),onMouseDown:function(e){e.preventDefault(),l(Object(A.c)(n))},onMouseEnter:function(e){e.preventDefault(),l(Object(A.b)(n))},onMouseUp:function(e){e.preventDefault(),r()},className:Object(b.a)(t.cell,Object(c.a)({},t.disableCell,!Object(j.r)({dateString:n,config:a})),j.b)}))})))),P=n(190),z=n.n(P),F=n(250),R=["property","children"],H=Object(d.a)((function(e){return{appointment:{zIndex:e.zIndex.speedDial,padding:e.spacing(.5,1),backgroundColor:e.palette.primary.main,color:e.palette.common.white,"&:hover":{backgroundColor:e.palette.primary.main}},busy:{backgroundColor:e.palette.common.lightGray,color:e.palette.primary.gray,"&:hover":{backgroundColor:e.palette.common.lightGray}},title:{overflow:"hidden",fontWeight:"bold",whiteSpace:"nowrap",textOverflow:"ellipsis"}}})),V=Object(O.b)({property:function(e){return z()(e,["calendar","property"])}}),W=Object(g.connect)(V)((function(e){var t=e.property,n=(e.children,Object(M.a)(e,R)),a=n.data,r=H(),i=!t,l=Object(j.q)(a),s=a.title,m=Object(j.l)(a).displayTime;return o.createElement(u.c.Appointment,Object.assign({},n,{className:Object(b.a)(r.appointment,Object(c.a)({},r.busy,i||l))}),i?o.createElement("div",null,"Busy"):o.createElement("div",null,o.createElement(F.a,{variant:"subtitle1",classes:{root:r.title}},s),o.createElement(F.a,{variant:"subtitle1"},m)))})),Z=n(1673),U=n(1674),G=n(1675),_=n(1676),K=Object(d.a)((function(e){return{wrapper:{padding:e.spacing(2),paddingTop:0},section:{marginBottom:e.spacing(1)},busy:{color:e.palette.primary.gray}}})),J=Object(O.b)({isBuyer:function(e){return!p()(e,["calendar","property"])}}),X=Object(g.connect)(J)((function(e){var t=e.appointmentData,n=e.isBuyer,a=K(),r=Object(j.l)(t),i=r.displayDate,s=r.displayTime,u=Object(j.q)(t),m=Object(j.n)(t),p=m.fullName,d=m.email,f=m.dre;return o.createElement(l.a,{className:a.wrapper},o.createElement(F.a,{variant:"h4",color:"primary",className:Object(b.a)(a.section,Object(c.a)({},a.busy,n||u))},n?"Busy":p),!n&&o.createElement(C.a,{sx:{mb:1,display:"flex",alignItems:"center"}},o.createElement(C.a,{sx:{mr:.5,display:"flex"}},o.createElement(Z.a,{fontSize:"small"})),o.createElement(F.a,{variant:"h5"},d)),!n&&f&&o.createElement(C.a,{sx:{mb:1,display:"flex",alignItems:"center"}},o.createElement(C.a,{sx:{mr:.5,display:"flex"}},o.createElement(U.a,{fontSize:"small"})),o.createElement(F.a,{variant:"h5"},f)),o.createElement(C.a,{sx:{mb:1,display:"flex",alignItems:"center"}},o.createElement(C.a,{sx:{mr:.5,display:"flex"}},o.createElement(G.a,{fontSize:"small"})),o.createElement(F.a,{variant:"h5"},i)),o.createElement(C.a,{sx:{mb:1,display:"flex",alignItems:"center"}},o.createElement(C.a,{sx:{mr:.5,display:"flex"}},o.createElement(_.a,{fontSize:"small"})),o.createElement(F.a,{variant:"h5"},s)))})),$=n(1543),Q={setStartOfWeek:A.l,setEndOfWeek:A.g},ee=Object(g.connect)(void 0,Q)(Object(v.a)((function(e){var t=e.setStartOfWeek,n=e.setEndOfWeek;return i.a.createElement($.f,{name:"IntegratedDates"},i.a.createElement($.e,{name:"startViewDate",computed:function(e){var n=e.startViewDate;return t(n),n}}),i.a.createElement($.e,{name:"endViewDate",computed:function(e){var t=e.endViewDate;return n(t),t}}))}))),te=n(131),ne=n(115),ae=n(10),re=n.n(ae),ce=n(28),oe=n(9),ie=n(12),le=n(14),se=n(13),ue=n(101),me=n.n(ue),pe=n(444),de=function(){function e(){Object(oe.a)(this,e),this.baseURL="".concat("https://api.youcanbook.me/v1","/").concat("dc7ded13-f988-4671-b5d1-142c6096066e","/"),this.cancelToken=null}return Object(ie.a)(e,[{key:"cancel",value:function(){null!==this.cancelToken&&this.cancelToken()}},{key:"axios",value:function(e){var t=e.method,n=e.baseURL,a=void 0===n?this.baseURL:n,r=e.url,c=e.data,o=e.params,i=e.headers,l=void 0===i?{}:i,s=e.needResHeaders,u=void 0!==s&&s,m=this,d=me.a.CancelToken;return new Promise((function(e,n){var i={method:t,url:r,baseURL:a,timeout:3e4,params:o,data:c,headers:Object(T.a)(Object(T.a)({},l),{},{Authorization:pe.c}),cancelToken:new d((function(e){m.cancelToken=e}))};me.a.request(i).then((function(t){var n="object"===typeof t.data?t.data:JSON.parse(t.data);e(u?{data:n,headers:t.headers}:n)}),(function(e){var t=p()(e,["response","status"]),a=p()(e,["response","data","message"]),r=p()(e,["response","data","errors"]);n({status:t,message:a,errors:r})}))}))}}]),e}(),fe=new(function(e){Object(le.a)(n,e);var t=Object(se.a)(n);function n(){return Object(oe.a)(this,n),t.apply(this,arguments)}return Object(ie.a)(n,[{key:"getProfileById",value:function(e){var t=e.id,n=e.fields;return t?this.axios({method:"GET",url:"".concat(pe.b.PROFILES,"/").concat(t),params:{fields:n}}):{}}}]),n}(de)),be=n(116),ge=n(1622),Oe=n.n(ge),ve=function(e){var t=p()(e,["answers"],[]).filter((function(e){return"EMAIL"===e.code}))[0];return p()(t,"string","")},je=function(e){return!e.cancelled},he=function(e){return e.map((function(e){return function(e){var t=p()(e,"startsAt"),n=p()(e,"endsAt"),a=p()(e,"timeZone");return{title:ve(e),id:p()(e,"id"),rawStart:t,startDate:t,rawEnd:n,endDate:n,services:p()(e,"services",[]),cancelled:p()(e,"cancelled"),answers:p()(e,"answers",[]),timeZone:a}}(e)})).filter(je)},Ee=new(function(e){Object(le.a)(n,e);var t=Object(se.a)(n);function n(){return Object(oe.a)(this,n),t.apply(this,arguments)}return Object(ie.a)(n,[{key:"createBooking",value:function(){var e=Object(ce.a)(re.a.mark((function e(t){var n,a,r;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.profileId,a=t.data,e.next=3,this.axios({method:"POST",url:"".concat(pe.b.PROFILES,"/").concat(n,"/").concat(pe.b.BOOKINGS),params:{fields:pe.a},data:Object(T.a)({},a)});case 3:return r=e.sent,e.abrupt("return",he([r]));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createBookings",value:function(){var e=Object(ce.a)(re.a.mark((function e(t){var n,a,r,c,o,i;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.profileId,a=t.data,r=0,c=[],o=[];case 4:if(r===a.length){e.next=18;break}return e.prev=5,e.next=8,this.axios({method:"POST",url:"".concat(pe.b.PROFILES,"/").concat(n,"/").concat(pe.b.BOOKINGS),params:{fields:pe.a},data:a[r]});case 8:i=e.sent,o.push(i),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),c.push(a[r]);case 15:r+=1,e.next=4;break;case 18:return e.abrupt("return",{bookings:he(o),errors:c});case 19:case"end":return e.stop()}}),e,this,[[5,12]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getBookings",value:function(){var e=Object(ce.a)(re.a.mark((function e(t){var n,a,r,c,o,i,l,s,u,m;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.profileId,a=t.from,r=t.to,n){e.next=3;break}return e.abrupt("return",[]);case 3:c=!0,o="",i=[];case 6:if(!c){e.next=25;break}if(o){e.next=13;break}return e.next=10,this.axios({method:"GET",url:"".concat(pe.b.PROFILES,"/").concat(n,"/").concat(pe.b.BOOKINGS),params:{fields:pe.a,jumpToDate:w()(a).format("YYYY-MM-DD")},needResHeaders:!0});case 10:e.t0=e.sent,e.next=16;break;case 13:return e.next=15,this.axios({method:"GET",url:o,needResHeaders:!0});case 15:e.t0=e.sent;case 16:l=e.t0,s=p()(l,["headers","link"],""),o=p()(Oe()(s),["next","url"],""),u=p()(l,["data"]),i=[].concat(Object(be.a)(i),Object(be.a)(u)),m=p()(u,[u.length-1,"startsAt"],""),c=o&&w()(m).isBefore(r),e.next=6;break;case 25:return e.abrupt("return",he(i));case 26:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(de)),ye=function(e){var t=e.profileId,n=Object(g.useDispatch)(),a=Object(g.useSelector)((function(e){return p()(e,["calendar","clientTimeZone"])})),r=Object(g.useSelector)((function(e){return p()(e,["calendar","config"])}));Object(o.useEffect)((function(){return n(Object(A.j)(t)),Object(ce.a)(re.a.mark((function e(){var a;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(Object(A.i)(!0)),e.prev=1,e.next=4,fe.getProfileById({id:t,fields:j.a});case 4:a=e.sent,n(Object(A.f)(a||{})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),n(Object(A.h)(e.t0));case 11:n(Object(A.i)(!1));case 12:case"end":return e.stop()}}),e,null,[[1,8]])})))(),function(){fe.cancel()}}),[t]),Object(o.useEffect)((function(){n(Object(A.f)(r))}),[a])},xe=function(e){var t=e.profileId,n=Object(g.useDispatch)(),a=Object(g.useSelector)((function(e){return p()(e,["calendar","startOfWeek"])})),r=Object(g.useSelector)((function(e){return p()(e,["calendar","endOfWeek"])})),c=Object(g.useSelector)((function(e){return p()(e,["calendar","appointments"])})),i=Object(g.useSelector)((function(e){return p()(e,["calendar","clientTimeZone"])}));Object(o.useEffect)((function(){return Object(ce.a)(re.a.mark((function e(){var c;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,n(Object(A.i)(!0)),e.next=6,Ee.getBookings({profileId:t,from:a,to:r});case 6:c=e.sent,n(Object(A.d)(c)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),n(Object(A.h)(e.t0));case 13:n(Object(A.i)(!1));case 14:case"end":return e.stop()}}),e,null,[[2,10]])})))(),function(){Ee.cancel()}}),[r,t]),Object(o.useEffect)((function(){n(Object(A.d)(c))}),[i])},ke=n(37),Ce=function(){var e=Object(g.useSelector)((function(e){return p()(e,["calendar","error"])}));Object(o.useEffect)((function(){if(e){var t=(e||{}).message;t&&ke.toastr.error(j.f.getTimeConfig,t)}}),[e])},De=n(51),we=n(1502),Ie=n(1533),Le=n(68),Se="SIMPLE",Te="CHECKBOX",Me="MULTI_DROPDOWN",Ae=(n(446),a={},Object(c.a)(a,Se,""),Object(c.a)(a,Te,!1),Object(c.a)(a,Me,""),a),qe="daily",Be="weekly",Ne=function(e){return e.questions.reduce((function(e,t){var n=t.code,a=t.type;return Object(T.a)(Object(T.a)({},e),{},Object(c.a)({},n,Ae[a]))}),{appointmentType:void 0})},Ye=function(e,t){return e.map((function(e){var n=e.code;return{code:n,string:t[n]}})).filter((function(e){return e.string}))},Pe=function(e,t){var n=e.startCell,a=e.endCell,r=Object(j.k)(e,t).start,c=Object(j.t)(n),o=Object(j.t)(a),i=Math.abs((c-o)/t)+1;return Array.from(Array(i),(function(e,n){return{startsAt:w()(r).add(n*t,"m").format("YYYY-MM-DDTHH:mm:ss")}}))},ze=function(e){var t=e.selectingCells,n=e.values,a=e.config,r=a.title,c=a.questions,o=a.times.slotLengthMinutes,i=n.FNAME,l=n.appointmentType;return Pe(t,o).map((function(e){return{startsAt:e.startsAt,title:"".concat(i," and ").concat(r),tentative:"NOT_USED",timeZone:w.a.tz.guess(),cancelled:!1,units:1,services:[l],answers:Ye(c,n)}}))},Fe=function(e){return e.find((function(e){return"busy"===e.name.toLowerCase()}))},Re=function(e){var t=e.selectingCells,n=e.values,a=e.config,r=a.questions,c=a.times.slotLengthMinutes,o=n.repeat,i=n.repeatType,l=n.startDate,s=n.endDate,u=z()(a,"services.items",[]),m=Fe(u),p=Pe(t,c);if(!o)return p.map((function(e){return{startsAt:e.startsAt,title:"busy",tentative:"NOT_USED",timeZone:w.a.tz.guess(),cancelled:!1,units:1,services:[m],answers:Ye(r,n)}}));var d=w()(l),f=w()(s).diff(d,"day"),b=i===Be?7:1;return Array.from(Array(Math.floor(f/b)+1),(function(e,t){return t*b})).reduce((function(e,t){var a=w()(l).add(t,"day"),c=p.map((function(e){var t=e.startsAt;return{title:"busy",startsAt:"".concat(a.format("YYYY-MM-DD"),"T").concat(w()(t).format("HH:mm:ss")),tentative:"NOT_USED",timeZone:w.a.tz.guess(),cancelled:!1,units:1,services:[m],answers:Ye(r,n)}}));return[].concat(Object(be.a)(e),Object(be.a)(c))}),[])},He=function(e){var t=e.map((function(e){return e.startsAt})).join(", ");return{message:"Cannot book at dates: ".concat(t)}},Ve=/^[A-Za-z0-9+_.-]+@(.+)$/,We=Object(d.a)((function(e){return{wrapper:Object(T.a)(Object(T.a)({},e.typography.h4),{},{padding:e.spacing(2,0),backgroundColor:e.palette.background.gray,textAlign:"center"})}})),Ze=Object(O.b)({selectingCells:function(e){return p()(e,"calendar.selectingCells")},slotLengthMinutes:function(e){return p()(e,"calendar.config.times.slotLengthMinutes")}}),Ue=Object(g.connect)(Ze)(Object(v.a)(o.memo((function(e){var t=e.selectingCells,n=e.slotLengthMinutes,a=We();if(E()(t))return o.createElement("div",null);var r=t.date,c=Object(j.k)(t,n),i=c.start,l=c.end,s=Object(j.j)(i),u=Object(j.j)(l);return o.createElement("div",{className:a.wrapper},o.createElement(F.a,{variant:"h4"},Object(j.i)(r)),o.createElement(C.a,{sx:{mt:1}},o.createElement(F.a,{variant:"h3"},s," - ",u)))})))),Ge=n(1627),_e=n.n(Ge),Ke=n(1529),Je=n(1520),Xe=Object(d.a)((function(e){return{group:{width:"100%",margin:e.spacing(1,0,2,0)},button:{padding:e.spacing(1.5,2),textTransform:"none"},buttonLabel:{width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center"},duration:{display:"flex",alignItems:"center"},selected:{"&&, &&:hover":{backgroundColor:e.palette.primary.main}}}})),$e=function(e){var t=e.appointmentTypes,n=Xe(),a=Object(Ie.c)(),r=a.values,c=a.setFieldValue,l=z()(r,"appointmentType.id")||"";Object(o.useEffect)((function(){if(1===t.length){var e=Object(De.a)(t,1)[0];c("appointmentType",e)}}),[t.length]);return i.a.createElement(i.a.Fragment,null,i.a.createElement(F.a,{variant:"h4"},"Choose an appointment type"),i.a.createElement(Ke.a,{orientation:"vertical",value:l,exclusive:!0,onChange:function(e,n){var a=t.find((function(e){return e.id===n}));c("appointmentType",a)},classes:{root:n.group}},t.map((function(e){return i.a.createElement(Je.a,{value:e.id,classes:{root:n.button,label:n.buttonLabel,selected:n.selected},key:e.id},i.a.createElement(F.a,{variant:"h5",color:"textPrimary"},e.name),i.a.createElement(F.a,{variant:"subtitle1",classes:{root:n.duration}},i.a.createElement(_e.a,{fontSize:"small"}),i.a.createElement(C.a,{sx:{ml:.5,mt:.25}},Object(j.m)(e))))}))))},Qe=n(1670),et=n(1668),tt=n(1669),nt=n(1694),at=Object(d.a)((function(e){return{textField:{marginTop:e.spacing(.5)},label:Object(T.a)({color:e.palette.primary.dark},e.typography.h4),input:Object(T.a)(Object(T.a)({},e.typography.h5),{},{padding:e.spacing(1,1.5)})}})),rt=function(e){var t=at(),n=e.name,a=e.variant,r=e.placeholder,c=void 0===r?"":r,o=e.label,l=e.value,s=e.required,u=e.onChange,m=e.classes,p=void 0===m?{}:m;return i.a.createElement(et.a,{required:s},i.a.createElement(tt.a,{color:"secondary",className:t.label},o),i.a.createElement(nt.a,{name:n,variant:a,placeholder:c,value:l,onChange:u,classes:{root:Object(b.a)(t.textField,p.textField)},InputProps:{classes:{input:Object(b.a)(t.input,p.input)}}}))},ct=Object(d.a)((function(e){return{after:Object(T.a)({},e.typography.subtitle)}})),ot=n(1684),it=n(1664),lt=Object(d.a)((function(e){return{wrapper:{"& .MuiOutlinedInput-notchedOutline>legend>span":{display:"none"}},label:{"&&":Object(T.a)({color:e.palette.primary.dark},e.typography.h4)},select:Object(T.a)(Object(T.a)({},e.typography.h5),{},{padding:e.spacing(1,1.5)}),item:Object(T.a)({},e.typography.h5)}})),st=function(e){var t=lt(),n=e.name,a=e.value,r=e.onChange,c=e.label,o=e.variant,l=e.required,s=e.options,u=e.classes,m=void 0===u?{}:u;return i.a.createElement(et.a,{required:l,classes:{root:t.wrapper}},i.a.createElement(tt.a,{className:t.label},c),i.a.createElement(ot.a,{name:n,classes:{root:Object(b.a)(t.select,m.select)},value:a,onChange:r,label:"",variant:o,MenuProps:{anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},getContentAnchorEl:null}},i.a.createElement(it.a,{classes:{root:Object(b.a)(t.item,m.item)},value:""},i.a.createElement("em",null,"None")),s.map((function(e){return i.a.createElement(it.a,{key:e,value:e,classes:{root:Object(b.a)(t.item,m.item)}},e)}))))},ut=n(1672),mt=n(1689),pt=Object(d.a)((function(e){return{label:Object(T.a)({},e.typography.h5),checkbox:{}}})),dt=function(e){var t=pt(),n=e.name,a=e.required,r=e.checked,c=e.onChange,o=e.label,l=e.color,s=void 0===l?"primary":l,u=e.classes,m=void 0===u?{}:u;return i.a.createElement(et.a,{required:a},i.a.createElement(ut.a,{classes:{label:Object(b.a)(t.label,m.label)},control:i.a.createElement(mt.a,{classes:{root:Object(b.a)(t.checkbox,m.checkbox)},checked:r,onChange:c,name:n,color:s}),label:o}))},ft=Object(d.a)((function(e){return{after:Object(T.a)({},e.typography.subtitle)}})),bt=(r={},Object(c.a)(r,Se,(function(e){var t=e.question,n=ct(),a=t.code,r=t.before,c=t.after,o=t.required,l=Object(Ie.c)(),s=l.values,u=l.handleChange;return i.a.createElement(C.a,{sx:{display:"flex",flexDirection:"column",my:1}},i.a.createElement(rt,{name:a,variant:"outlined",placeholder:"",label:r,value:s[a],onChange:u,required:o}),Boolean(c)&&i.a.createElement(Qe.a,{className:n.after},c))})),Object(c.a)(r,Te,(function(e){var t=e.question,n=ft(),a=t.after,r=t.before,c=t.required,o=t.code,l=Object(Ie.c)(),s=l.values,u=l.handleChange;return i.a.createElement(C.a,{sx:{display:"flex",flexDirection:"column",my:1}},i.a.createElement(dt,{checked:s[o],onChange:u,name:o,color:"primary",label:r,required:c}),Boolean(a)&&i.a.createElement(Qe.a,{className:n.after},a))})),Object(c.a)(r,Me,(function(e){var t=e.question,n=t.code,a=t.after,r=t.before,c=t.required,o=t.options,l=void 0===o?[]:o,s=Object(Ie.c)(),u=s.values,m=s.handleChange;return i.a.createElement(C.a,{sx:{display:"flex",flexDirection:"column",my:1}},i.a.createElement(st,{name:n,value:u[n],onChange:m,label:r,variant:"outlined",required:c,options:l}),Boolean(a)&&i.a.createElement(C.a,{sx:{mt:1}},a))})),r),gt=function(e){var t=e.questions;return i.a.createElement(i.a.Fragment,null,t.map((function(e){var t=bt[e.type];return t?i.a.createElement(t,{key:e.code,question:e}):i.a.createElement(i.a.Fragment,null)})))},Ot=n(1),vt=n(633),jt=Object(d.a)((function(e){return{button:{marginTop:e.spacing(2),padding:e.spacing(2)}}})),ht=function(e){var t=e.questions,n=e.isLoading,a=jt(),r=function(e,t){var n=t.appointmentType,a=t.EMAIL;return!!n&&(!e.some((function(e){var n=e.code;return e.required&&!t[n]}))&&new RegExp(Ve).test(a))}(t,Object(Ie.c)().values);return o.createElement(vt.a,{type:"submit",color:"primary",disableElevation:!0,fullWidth:!0,variant:"contained",disabled:n||!r,classes:{root:a.button}},"Confirm Booking")},Et=Object(O.b)({profileId:function(e){return p()(e,"calendar.profileId")},config:function(e){return p()(e,"calendar.config")},isLoading:function(e){return p()(e,"calendar.isLoading")},selectingCells:function(e){return p()(e,"calendar.selectingCells")}}),yt={setIsLoading:A.i,setError:A.h,addAppointments:A.a},xt=Object(g.connect)(Et,yt)(Object(v.a)((function(e){var t=e.profileId,n=e.config,a=e.selectingCells,r=e.setIsLoading,c=e.setError,o=e.addAppointments,l=e.onSave,s=e.isLoading,u=p()(n,"questions",[]),m=p()(n,"services.items",[]).filter((function(e){return e.name.toLowerCase()!==Ot.n})),d=Ne({questions:u,selectingCells:a}),f=function(){var e=Object(ce.a)(re.a.mark((function e(i){var s,u,m,p;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r(!0),s=ze({selectingCells:a,values:i,config:n}),e.next=5,Ee.createBookings({profileId:t,data:s});case 5:u=e.sent,m=u.bookings,p=u.errors,E()(p)||c(He(p)),o(m),l(),r(!1),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),r(!1),c(e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}();return i.a.createElement(C.a,{sx:{display:"flex",flexDirection:"column"}},i.a.createElement(Ie.b,{initialValues:d,onSubmit:f},i.a.createElement(Ie.a,null,i.a.createElement($e,{appointmentTypes:m}),i.a.createElement(Ue,null),i.a.createElement(we.a,null),i.a.createElement(C.a,{sx:{mt:4}},i.a.createElement(gt,{questions:u})),i.a.createElement(ht,{questions:u,isLoading:s}))))}))),kt=n(1567),Ct=n(1677),Dt=n(1495),wt=n(1695),It=n(1685),Lt=n(1499),St=n(1536),Tt=n(1678),Mt=Object(d.a)((function(e){return{popover:Object(T.a)({},e.typography.h5)}})),At=function(){var e=Mt(),t=Object(Ie.c)(),n=t.values,a=t.handleChange,r=t.setFieldValue,c=function(e){return function(t){r(e,w()(t).format("MM/DD/YYYY"))}};return i.a.createElement("div",null,i.a.createElement(ut.a,{control:i.a.createElement(Ct.a,{name:"repeat",checked:n.repeat,onChange:a,color:"primary"}),label:"Repeat"}),i.a.createElement(Dt.a,{in:n.repeat},i.a.createElement("div",null,i.a.createElement(wt.a,{name:"repeatType",value:n.repeatType,onChange:a},i.a.createElement(ut.a,{value:"daily",control:i.a.createElement(It.a,{color:"primary"}),label:"Daily"}),i.a.createElement(ut.a,{value:"weekly",control:i.a.createElement(It.a,{color:"primary"}),label:"Weekly"}))),i.a.createElement(Lt.a,{container:!0,justifyContent:"space-between"},i.a.createElement(St.a,{utils:kt.a},i.a.createElement(Tt.a,{variant:"inline",inputVariant:"outlined",format:"MM/DD/YYYY",margin:"normal",label:"Start date",value:new Date(n.startDate),onChange:c("startDate"),PopoverProps:{classes:{root:e.popover},id:j.d}}),i.a.createElement(Tt.a,{variant:"inline",inputVariant:"outlined",format:"MM/DD/YYYY",margin:"normal",label:"End date",value:new Date(n.endDate),onChange:c("endDate"),PopoverProps:{classes:{root:e.popover},id:j.d}})))))},qt=Object(O.b)({profileId:function(e){return p()(e,"calendar.profileId")},config:function(e){return p()(e,"calendar.config")},property:function(e){return p()(e,"calendar.property")},isLoading:function(e){return p()(e,"calendar.isLoading")},selectingCells:function(e){return p()(e,"calendar.selectingCells")}}),Bt={setIsLoading:A.i,setError:A.h,addAppointments:A.a},Nt=Object(g.connect)(qt,Bt)(Object(v.a)((function(e){var t=e.profileId,n=e.config,a=e.selectingCells,r=e.setIsLoading,c=e.setError,o=e.addAppointments,l=e.property,s=e.onSave,u=e.isLoading;if(E()(a))return i.a.createElement(C.a,null);var m=p()(n,"questions",[]),d=function(e){var t=e.property,n=e.selectingCells,a=e.config,r=a.questions,c=a.times.slotLengthMinutes,o=Object(j.k)(n,c).start.format("MM/DD/YYYY"),i=z()(a,"services.items",[]),l=Fe(i),s=z()(t,"PropertyData.FullAddress",""),u=z()(Le.a,["user","attributes","email"],"");return Object(T.a)(Object(T.a)({},Ne({questions:r})),{},{appointmentType:l,FNAME:s,EMAIL:u,DRE:"1",repeat:!1,repeatType:qe,startDate:o,endDate:o})}({property:l,selectingCells:a,config:n}),f=function(){var e=Object(ce.a)(re.a.mark((function e(i){var l,u,m,p;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r(!0),l=Re({selectingCells:a,values:i,config:n}),e.next=5,Ee.createBookings({profileId:t,data:l});case 5:u=e.sent,m=u.bookings,p=u.errors,E()(p)||c(He(p)),o(m),s(),r(!1),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),r(!1),c(e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}();return i.a.createElement(C.a,{sx:{display:"flex",flexDirection:"column"}},i.a.createElement(Ie.b,{initialValues:d,onSubmit:f},i.a.createElement(Ie.a,null,i.a.createElement(C.a,{sx:{mb:2}},i.a.createElement(F.a,{variant:"h4"},"Block available slots")),i.a.createElement(Ue,null),i.a.createElement(we.a,null),i.a.createElement(C.a,{sx:{my:2}},i.a.createElement(At,null)),i.a.createElement(ht,{questions:m,isLoading:u}))))}))),Yt=Object(O.b)({property:function(e){return z()(e,["calendar","property"])}}),Pt=Object(g.connect)(Yt)(Object(v.a)((function(e){var t=e.appointmentData,n=e.property,a=e.onSave,r=n?Nt:xt;return o.createElement(r,{appointmentData:t,onSave:a})}))),zt=["basicLayoutComponent","commandLayoutComponent","recurrenceLayoutComponent","isRecurrence","children"],Ft=Object(d.a)((function(e){return{layout:{background:e.palette.common.white},content:{padding:e.spacing(4),width:"30vw",minWidth:"300px",overflow:"auto",maxHeight:"90vh"}}})),Rt=function(e){var t=e.basicLayoutComponent,n=e.commandLayoutComponent,a=e.recurrenceLayoutComponent,r=(e.isRecurrence,e.children),c=Object(M.a)(e,zt),o=Ft();return i.a.createElement("div",Object.assign({className:o.layout},c),i.a.createElement(n,null),i.a.createElement("div",{className:o.content},i.a.createElement(t,null),i.a.createElement(a,null)),r)},Ht=function(e){var t=e.onCommitButtonClick,n=e.isSaving,a=e.setIsSaving;return Object(o.useEffect)((function(){n&&(t(),a(!1))}),[n]),i.a.createElement("div",null)},Vt=n(642),Wt=n(635),Zt=n(632),Ut=["children","visible","className","onHide"],Gt=Object(d.a)((function(e){return{root:{display:"flex",alignItems:"center",justifyContent:"center"}}})),_t=function(e){var t=e.children,n=e.visible,a=e.className,r=e.onHide,c=Object(M.a)(e,Ut),i=Gt(),l=Object(g.useDispatch)();return o.createElement(Vt.a,Object.assign({id:j.g,className:Object(b.a)(i.root,a),onClose:function(){r(),l(Object(A.m)())},closeAfterTransition:!0,BackdropComponent:Wt.a,BackdropProps:{timeout:500},open:n,variant:"temporary",anchor:"left"},c),o.createElement(Zt.a,{in:n},o.createElement("div",null,t)))},Kt=function(){var e=Object(o.useState)(!1),t=Object(De.a)(e,2),n=t[0],a=t[1],r=Object(g.useDispatch)(),c=function(){a(!0),r(Object(A.m)())},l=Object($.k)(Pt,(function(){return{onSave:c}})),s=Object($.k)(Ht,(function(){return{isSaving:n,setIsSaving:a}}));return i.a.createElement(u.a,{layoutComponent:Rt,basicLayoutComponent:l,commandLayoutComponent:s,overlayComponent:_t})},Jt=n(438),Xt=["style","children"],$t=function(e){var t=e.style,n=e.children,a=Object(M.a)(e,Xt),r=Object(Jt.a)();return o.createElement("div",Object.assign({style:Object(T.a)(Object(T.a)({},t),{},{zIndex:r.zIndex.appBar})},a),n)},Qt=n(1671),en=n(1686),tn=n(1628),nn=n.n(tn),an=Object(o.memo)((function(){var e=w.a.tz.names(),t=Object(o.useState)(""),n=Object(De.a)(t,2),a=n[0],r=n[1],c=Object(g.useDispatch)(),l=Object(g.useSelector)((function(e){return z()(e,["calendar","clientTimeZone"])}));return i.a.createElement(C.a,{sx:{p:2},alignItems:"center",display:"flex"},i.a.createElement(C.a,{sx:{width:{xs:"100%",lg:"30%"}}},i.a.createElement(en.a,{options:e,value:l,onChange:function(e,t){t&&c(Object(A.e)(t))},getOptionLabel:function(e){return e},inputValue:a,onInputChange:function(e,t){r(t)},renderInput:function(e){return i.a.createElement(nt.a,Object.assign({},e,{variant:"outlined",InputProps:Object(T.a)(Object(T.a)({},e.InputProps),{},{startAdornment:i.a.createElement(i.a.Fragment,null,i.a.createElement(Qt.a,{position:"start"},i.a.createElement(nn.a,null)),e.InputProps.startAdornment)})}))}})))})),rn=Object(d.a)((function(e){return{container:{minHeight:"100px",fontFamily:e.typography.fontFamily.avenirLT},loading:{border:"1px solid #E0E0E0",backgroundColor:e.palette.common.white}}})),cn=Object(O.b)({config:function(e){return p()(e,["calendar","config"])},isLoading:function(e){return p()(e,["calendar","isLoading"])},appointments:function(e){return p()(e,["calendar","appointments"])}});t.default=Object(g.connect)(cn,void 0)(Object(v.a)((function(e){var t=e.config,n=e.profileId,a=e.isLoading,r=e.appointments,o=rn();ye({profileId:n}),xe({profileId:n}),Ce();return E()(t)&&!a?i.a.createElement(i.a.Fragment,null):i.a.createElement(ne.a,{tag:"div",blocking:a,loader:i.a.createElement(te.Loader,{active:!0,type:"ball-pulse",color:"rgba(231,28,99,1)"}),className:Object(b.a)(o.container,Object(c.a)({},o.loading,a))},i.a.createElement(l.a,{elevation:3},i.a.createElement(an,null),i.a.createElement(u.e,{data:r},i.a.createElement(s.r,null),i.a.createElement(u.h,{timeTableCellComponent:Y,dayScaleCellComponent:S,cellDuration:p()(t,"times.slotLengthMinutes")||j.e}),i.a.createElement(s.k,{onCommitChanges:function(){}}),i.a.createElement(ee,null),i.a.createElement(u.g,null),i.a.createElement(u.d,null),i.a.createElement(u.f,null),i.a.createElement(u.c,{appointmentComponent:W,containerComponent:$t}),i.a.createElement(u.b,{showCloseButton:!0,contentComponent:X}),i.a.createElement(Kt,null))))})))}}]);
//# sourceMappingURL=16.d61faaf4.chunk.js.map