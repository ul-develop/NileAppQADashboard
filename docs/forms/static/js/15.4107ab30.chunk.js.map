{"version":3,"sources":["components/MilestoneTracker/MilestoneTrackerTable.js","components/MilestoneTracker/helper.js","components/MilestoneTracker/MilestoneTracker.js"],"names":["TableHeaderCell","withStyles","theme","root","fontWeight","TableCell","useStyles","makeStyles","widget","marginBottom","spacing","description","typography","h5","color","palette","primary","gray","table","fontFamily","avenirLT","cell","height","breakpoints","up","border","MilestoneTrackerTable","contingencies","offer","classes","_isEmpty","Widget","className","title","_get","Table","TableHead","TableRow","padding","TableBody","map","contingency","key","dueDate","USER_ROLES","loading","backgroundColor","common","white","minHeight","withErrorBoundary","offers","isLoading","role","user","isBuyer","getRole","useContext","UserContext","offerList","reduce","list","current","Property","PropertyData","PAUploadedDate","tag","blocking","loader","active","type","clsx","acc","isOfferContingencies","mappingOfferContingencies","displayMilestoneTracker"],"mappings":"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","file":"static/js/15.4107ab30.chunk.js","sourcesContent":["// @flow\nimport React, { Fragment } from 'react';\nimport type { Element } from 'react';\nimport { Widget } from 'components/Widget';\nimport { makeStyles, withStyles } from '@material-ui/core/styles';\nimport _isEmpty from 'lodash/isEmpty';\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableRow,\n} from '@material-ui/core';\nimport type { Offer } from 'types/Offer';\nimport _get from 'lodash/get';\n\nconst TableHeaderCell = withStyles(theme => ({\n  root: {\n    fontWeight: 'bold',\n  },\n}))(TableCell);\n\nconst useStyles = makeStyles(theme => ({\n  widget: {\n    marginBottom: theme.spacing(3),\n  },\n  description: {\n    ...theme.typography.h5,\n    marginBottom: theme.spacing(3),\n    color: theme.palette.primary.gray,\n  },\n  table: {\n    fontFamily: theme.typography.fontFamily.avenirLT,\n  },\n  cell: {\n    height: theme.spacing(6),\n    [theme.breakpoints.up('md')]: {\n      border: 'none',\n    },\n  },\n}));\n\ntype Props = {\n  contingencies: Object[],\n  offer: Offer,\n};\n\nconst MilestoneTrackerTable = ({\n  contingencies,\n  offer,\n}: Props): Element<'div' | typeof Fragment> => {\n  const classes = useStyles();\n\n  if (_isEmpty(contingencies) || _isEmpty(offer)) return <></>;\n\n  return (\n    <Widget className={classes.widget} title=\"Milestone Tracker\">\n      <div className={classes.description}>\n        Milestone tracker of your property <strong>{_get(offer, 'Property.PropertyData.FullAddress', '')}</strong>\n      </div>\n      <Table className={classes.table}>\n        <TableHead>\n          <TableRow>\n            <TableHeaderCell padding=\"none\">Type</TableHeaderCell>\n            <TableHeaderCell padding=\"none\">Due Date</TableHeaderCell>\n          </TableRow>\n        </TableHead>\n        <TableBody>\n          {contingencies.map(contingency => {\n            return (\n              <TableRow key={contingency.title}>\n                <TableCell className={classes.cell} padding=\"none\">\n                  {contingency.title}\n                </TableCell>\n                <TableCell className={classes.cell} padding=\"none\">\n                  {contingency.dueDate || 'N/A'}\n                </TableCell>\n              </TableRow>\n            );\n          })}\n        </TableBody>\n      </Table>\n    </Widget>\n  );\n};\nexport default MilestoneTrackerTable;\n","// @flow\nimport React from 'react';\nimport type { Element } from 'react';\nimport _get from 'lodash/get';\nimport _isEmpty from 'lodash/isEmpty';\nimport MilestoneTrackerTable from './MilestoneTrackerTable';\nimport { mappingOfferContingencies, isOfferContingencies } from 'helpers/Offer';\nimport type { Offer } from 'types/Offer';\n\nexport const USER_ROLES = {\n  BUYER: 'buyer',\n  SELLER: 'seller',\n};\n\nexport const getRole = (user: Object): string => {\n  const isBuyer = _get(user, 'IsBuyer', false);\n  const isSeller = _get(user, 'IsSeller', false);\n\n  if (isSeller) return USER_ROLES.SELLER;\n  if (isBuyer) return USER_ROLES.BUYER;\n  return '';\n};\n\nexport const displayMilestoneTracker = (\n  offers: Array<Offer>,\n): Array<Element<Object>> => {\n  return offers.reduce((acc, offer) => {\n    const isValid =\n      isOfferContingencies(offer) && !_isEmpty(_get(offer, ['Contingencies']));\n\n    if (!isValid) return acc;\n\n    const contingencies = mappingOfferContingencies(offer);\n    return [\n      ...acc,\n      <MilestoneTrackerTable\n        key={_get(offer, ['OfferId'])}\n        offer={offer}\n        contingencies={contingencies}\n      />,\n    ];\n  }, []);\n};\n\nexport const mapSellerData = (properties: Array<Object>): Array<Offer> => {\n  return properties.reduce((list, current) => {\n    const originalOffers = _get(current, 'Offers') || [];\n    const offers = originalOffers.map(offer => ({\n      ...offer,\n      Property: {\n        PropertyData: _get(current, 'PropertyData'),\n        PAUploadedDate: _get(current, 'PAUploadedDate'),\n      },\n    }));\n    return [...list, ...offers];\n  }, []);\n};\n","// @flow\nimport React, { useContext, Fragment } from 'react';\nimport type { Element } from 'react';\nimport { Loader } from 'react-loaders';\nimport BlockUi from 'react-block-ui';\nimport { makeStyles } from '@material-ui/core/styles';\nimport clsx from 'clsx';\nimport _isEmpty from 'lodash/isEmpty';\nimport type { Offer as OfferType } from 'types/Offer';\nimport { withErrorBoundary } from 'components/ErrorBoundary';\nimport UserContext from 'contexts/UserContext';\nimport {\n  USER_ROLES,\n  getRole,\n  mapSellerData,\n  displayMilestoneTracker,\n} from './helper';\n\nconst useStyles = makeStyles(theme => ({\n  loading: {\n    border: '1px solid #E0E0E0',\n    backgroundColor: theme.palette.common.white,\n    minHeight: '100px',\n  },\n}));\n\ntype Props = {\n  offers: Array<OfferType>,\n  isLoading: Boolean,\n};\n\nconst MilestoneTracker = ({\n  offers,\n  isLoading,\n}: Props): Element<'div' | typeof Fragment> => {\n  const classes = useStyles();\n  const user = useContext(UserContext);\n  const role = getRole(user);\n  const isBuyer = role === USER_ROLES.BUYER;\n\n  if (_isEmpty(offers) || !role) return <></>;\n\n  const offerList = isBuyer ? offers : mapSellerData(offers);\n\n  return (\n    <BlockUi\n      tag=\"div\"\n      blocking={isLoading}\n      loader={<Loader active type=\"ball-pulse\" color=\"rgba(231,28,99,1)\" />}\n      className={clsx({\n        [classes.loading]: isLoading,\n      })}\n    >\n      {displayMilestoneTracker(offerList)}\n    </BlockUi>\n  );\n};\n\nexport default (withErrorBoundary(MilestoneTracker): Element<'div'>);\n"],"sourceRoot":""}